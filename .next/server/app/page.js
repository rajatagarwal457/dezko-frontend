(()=>{var a={};a.id=974,a.ids=[974],a.modules={78:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.GaxiosError=b.GAXIOS_ERROR_SYMBOL=void 0,b.defaultErrorRedactor=function a(b){let c="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function d(a){a&&a.forEach((b,d)=>{(/^authentication$/i.test(d)||/^authorization$/i.test(d)||/secret/i.test(d))&&a.set(d,c)})}function e(a,b){if("object"==typeof a&&null!==a&&"string"==typeof a[b]){let d=a[b];(/grant_type=/i.test(d)||/assertion=/i.test(d)||/secret/i.test(d))&&(a[b]=c)}}function f(a){a&&"object"==typeof a&&(a instanceof FormData||a instanceof URLSearchParams||"forEach"in a&&"set"in a?a.forEach((b,d)=>{(["grant_type","assertion"].includes(d)||/secret/.test(d))&&a.set(d,c)}):("grant_type"in a&&(a.grant_type=c),"assertion"in a&&(a.assertion=c),"client_secret"in a&&(a.client_secret=c)))}return b.config&&(d(b.config.headers),e(b.config,"data"),f(b.config.data),e(b.config,"body"),f(b.config.body),b.config.url.searchParams.has("token")&&b.config.url.searchParams.set("token",c),b.config.url.searchParams.has("client_secret")&&b.config.url.searchParams.set("client_secret",c)),b.response&&(a({config:b.response.config}),d(b.response.headers),b.response.bodyUsed&&(e(b.response,"data"),f(b.response.data))),b};let e=d(c(88633)),f=d(c(97376)).default.pkg;b.GAXIOS_ERROR_SYMBOL=Symbol.for(`${f.name}-gaxios-error`);class g extends Error{config;response;code;status;error;[b.GAXIOS_ERROR_SYMBOL]=f.version;static[Symbol.hasInstance](a){return!!a&&"object"==typeof a&&b.GAXIOS_ERROR_SYMBOL in a&&a[b.GAXIOS_ERROR_SYMBOL]===f.version||Function.prototype[Symbol.hasInstance].call(g,a)}constructor(a,b,c,d){if(super(a,{cause:d}),this.config=b,this.response=c,this.error=d instanceof Error?d:void 0,this.config=(0,e.default)(!0,{},b),this.response&&(this.response.config=(0,e.default)(!0,{},this.response.config)),this.response){try{this.response.data=function(a,b){switch(a){case"stream":default:return b;case"json":return JSON.parse(JSON.stringify(b));case"arraybuffer":return JSON.parse(Buffer.from(b).toString("utf8"));case"blob":return JSON.parse(b.text())}}(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}d instanceof DOMException?this.code=d.name:d&&"object"==typeof d&&"code"in d&&("string"==typeof d.code||"number"==typeof d.code)&&(this.code=d.code)}static extractAPIErrorFromResponse(a,b="The request failed"){let c=b;if("string"==typeof a.data&&(c=a.data),a.data&&"object"==typeof a.data&&"error"in a.data&&a.data.error&&!a.ok){if("string"==typeof a.data.error)return{message:a.data.error,code:a.status,status:a.statusText};if("object"==typeof a.data.error){c="message"in a.data.error&&"string"==typeof a.data.error.message?a.data.error.message:c;let b="status"in a.data.error&&"string"==typeof a.data.error.status?a.data.error.status:a.statusText,d="code"in a.data.error&&"number"==typeof a.data.error.code?a.data.error.code:a.status;if("errors"in a.data.error&&Array.isArray(a.data.error.errors)){let e=[];for(let b of a.data.error.errors)"object"==typeof b&&"message"in b&&"string"==typeof b.message&&e.push(b.message);return Object.assign({message:e.join("\n")||c,code:d,status:b},a.data.error)}return Object.assign({message:c,code:d,status:b},a.data.error)}}return{message:c,code:a.status,status:a.statusText}}}b.GaxiosError=g},164:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"removePathPrefix",{enumerable:!0,get:function(){return e}});let d=c(60894);function e(a,b){if(!(0,d.pathHasPrefix)(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:"/"+c}},189:(a,b,c)=>{Promise.resolve().then(c.bind(c,29642))},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},320:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"normalizeLocalePath",{enumerable:!0,get:function(){return d}});let c=new WeakMap;function d(a,b){let d;if(!b)return{pathname:a};let e=c.get(b);e||(e=b.map(a=>a.toLowerCase()),c.set(b,e));let f=a.split("/",2);if(!f[1])return{pathname:a};let g=f[1].toLowerCase(),h=e.indexOf(g);return h<0?{pathname:a}:(d=b[h],{pathname:a=a.slice(d.length+1)||"/",detectedLocale:d})}},1056:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{Router:function(){return f.default},createRouter:function(){return p},default:function(){return n},makePublicRouterInstance:function(){return q},useRouter:function(){return o},withRouter:function(){return i.default}});let d=c(35288),e=d._(c(38301)),f=d._(c(86612)),g=c(18355),h=d._(c(98122)),i=d._(c(87307)),j={router:null,readyCallbacks:[],ready(a){if(this.router)return a()}},k=["pathname","route","query","asPath","components","isFallback","basePath","locale","locales","defaultLocale","isReady","isPreview","isLocaleDomain","domainLocales"],l=["push","replace","reload","back","prefetch","beforePopState"];function m(){if(!j.router)throw Object.defineProperty(Error('No router instance found.\nYou should only use "next/router" on the client side of your app.\n'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return j.router}Object.defineProperty(j,"events",{get:()=>f.default.events}),k.forEach(a=>{Object.defineProperty(j,a,{get:()=>m()[a]})}),l.forEach(a=>{j[a]=function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return m()[a](...c)}}),["routeChangeStart","beforeHistoryChange","routeChangeComplete","routeChangeError","hashChangeStart","hashChangeComplete"].forEach(a=>{j.ready(()=>{f.default.events.on(a,function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];let e="on"+a.charAt(0).toUpperCase()+a.substring(1);if(j[e])try{j[e](...c)}catch(a){console.error("Error when running the Router event: "+e),console.error((0,h.default)(a)?a.message+"\n"+a.stack:a+"")}})})});let n=j;function o(){let a=e.default.useContext(g.RouterContext);if(!a)throw Object.defineProperty(Error("NextRouter was not mounted. https://nextjs.org/docs/messages/next-router-not-mounted"),"__NEXT_ERROR_CODE",{value:"E509",enumerable:!1,configurable:!0});return a}function p(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return j.router=new f.default(...b),j.readyCallbacks.forEach(a=>a()),j.readyCallbacks=[],j.router}function q(a){let b={};for(let c of k){if("object"==typeof a[c]){b[c]=Object.assign(Array.isArray(a[c])?[]:{},a[c]);continue}b[c]=a[c]}return b.events=f.default.events,l.forEach(c=>{b[c]=function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return a[c](...d)}}),b}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},1682:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UserRefreshClient=b.USER_REFRESH_ACCOUNT_TYPE=void 0;let d=c(32852),e=c(72449);b.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class f extends d.OAuth2Client{_refreshToken;constructor(a,b,c,d,e){let f=a&&"object"==typeof a?a:{clientId:a,clientSecret:b,refreshToken:c,eagerRefreshThresholdMillis:d,forceRefreshOnFailure:e};super(f),this._refreshToken=f.refreshToken,this.credentials.refresh_token=f.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(a){let b={...f.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:a})};return e.AuthClient.setMethodName(b,"fetchIdToken"),(await this.transporter.request(b)).data.id_token}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the user refresh token");if("authorized_user"!==a.type)throw Error('The incoming JSON object does not have the "authorized_user" type');if(!a.client_id)throw Error("The incoming JSON object does not contain a client_id field");if(!a.client_secret)throw Error("The incoming JSON object does not contain a client_secret field");if(!a.refresh_token)throw Error("The incoming JSON object does not contain a refresh_token field");this._clientId=a.client_id,this._clientSecret=a.client_secret,this._refreshToken=a.refresh_token,this.credentials.refresh_token=a.refresh_token,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}async fromStreamAsync(a){return new Promise((b,c)=>{if(!a)return c(Error("Must pass in a stream containing the user refresh token."));let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);return this.fromJSON(a),b()}catch(a){return c(a)}})})}static fromJSON(a){let b=new f;return b.fromJSON(a),b}}b.UserRefreshClient=f},1708:a=>{"use strict";a.exports=require("node:process")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3752:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(5957),b)},4052:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.createCrypto=function(){return h()?new f.BrowserCrypto:new g.NodeCrypto},b.hasBrowserCrypto=h;let f=c(73133),g=c(96693);function h(){return"undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle}e(c(57932),b)},4573:a=>{"use strict";a.exports=require("node:buffer")},5957:function(a,b,c){"use strict";let d;var e,f,g,h=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),i=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),j=this&&this.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&h(b,a,c[d]);return i(b,a),b});Object.defineProperty(b,"__esModule",{value:!0}),b.env=b.DebugLogBackendBase=b.placeholder=b.AdhocDebugLogger=b.LogSeverity=void 0,b.getNodeBackend=r,b.getDebugBackend=function(a){return new s(a)},b.getStructuredBackend=function(a){return new t(a)},b.setBackend=function(a){d=a,u.clear()},b.log=v;let k=c(94735),l=j(c(19771)),m=j(c(28354)),n=c(11229);(f=g||(b.LogSeverity=g={})).DEFAULT="DEFAULT",f.DEBUG="DEBUG",f.INFO="INFO",f.WARNING="WARNING",f.ERROR="ERROR";class o extends k.EventEmitter{constructor(a,b){super(),this.namespace=a,this.upstream=b,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(a,b)=>this.on(a,b)}),this.func.debug=(...a)=>this.invokeSeverity(g.DEBUG,...a),this.func.info=(...a)=>this.invokeSeverity(g.INFO,...a),this.func.warn=(...a)=>this.invokeSeverity(g.WARNING,...a),this.func.error=(...a)=>this.invokeSeverity(g.ERROR,...a),this.func.sublog=a=>v(a,this.func)}invoke(a,...b){if(this.upstream)try{this.upstream(a,...b)}catch(a){}try{this.emit("log",a,b)}catch(a){}}invokeSeverity(a,...b){this.invoke({severity:a},...b)}}b.AdhocDebugLogger=o,b.placeholder=new o("",()=>{}).func;class p{constructor(){var a;this.cached=new Map,this.filters=[],this.filtersSet=!1;let c=null!=(a=l.env[b.env.nodeEnables])?a:"*";"all"===c&&(c="*"),this.filters=c.split(",")}log(a,b,...c){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let d=this.cached.get(a);d||(d=this.makeLogger(a),this.cached.set(a,d)),d(b,...c)}catch(a){console.error(a)}}}b.DebugLogBackendBase=p;class q extends p{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(a){return this.enabledRegexp.test(a)}makeLogger(a){return this.enabledRegexp.test(a)?(b,...c)=>{var d;let e,f=`${n.Colours.green}${a}${n.Colours.reset}`,h=`${n.Colours.yellow}${l.pid}${n.Colours.reset}`;switch(b.severity){case g.ERROR:e=`${n.Colours.red}${b.severity}${n.Colours.reset}`;break;case g.INFO:e=`${n.Colours.magenta}${b.severity}${n.Colours.reset}`;break;case g.WARNING:e=`${n.Colours.yellow}${b.severity}${n.Colours.reset}`;break;default:e=null!=(d=b.severity)?d:g.DEFAULT}let i=m.formatWithOptions({colors:n.Colours.enabled},...c),j=Object.assign({},b);delete j.severity;let k=Object.getOwnPropertyNames(j).length?JSON.stringify(j):"",o=k?`${n.Colours.grey}${k}${n.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",h,f,e,i,k?` ${o}`:"")}:()=>{}}setFilters(){let a=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=RegExp(`^${a}$`,"i")}}function r(){return new q}class s extends p{constructor(a){super(),this.debugPkg=a}makeLogger(a){let b=this.debugPkg(a);return(a,...c)=>{b(c[0],...c.slice(1))}}setFilters(){var a;let b=null!=(a=l.env.NODE_DEBUG)?a:"";l.env.NODE_DEBUG=`${b}${b?",":""}${this.filters.join(",")}`}}class t extends p{constructor(a){super(),this.upstream=null!=a?a:void 0}makeLogger(a){var b;let c=null==(b=this.upstream)?void 0:b.makeLogger(a);return(a,...b)=>{var d;let e=JSON.stringify(Object.assign({severity:null!=(d=a.severity)?d:g.INFO,message:m.format(...b)},a));c?c(a,e):console.log("%s",e)}}setFilters(){var a;null==(a=this.upstream)||a.setFilters()}}b.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};let u=new Map;function v(a,c){let e;if(!d&&!l.env[b.env.nodeEnables]||!a)return b.placeholder;c&&(a=`${c.instance.namespace}:${a}`);let f=u.get(a);if(f)return f.func;if(null===d)return b.placeholder;void 0===d&&(d=r());let g=new o(a,(b,...c)=>{if(e!==d){if(null===d)return;void 0===d&&(d=r()),e=d}null==d||d.log(a,b,...c)});return u.set(a,g),g.func}},7363:(a,b,c)=>{"use strict";c(77740);let{Duplex:d}=c(27910);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}a.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._final(b)});null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._write(b,c,d)});a.send(b,d)},h.on("end",f),h.on("error",g),h}},7423:(a,b,c)=>{"use strict";b.kF=void 0;let d=c(58925);Object.defineProperty(b,"kF",{enumerable:!0,get:function(){return d.GoogleAuth}}),c(54447),c(30911),c(72449),c(82648),c(35046),c(82083),c(93759),c(53533),c(83364),c(41867),c(32852),c(56455),c(1682),c(83948),c(29780),c(41167),c(13284),c(52177),c(47447),c(12724),c(59857),c(73820),new d.GoogleAuth},8051:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"denormalizePagePath",{enumerable:!0,get:function(){return f}});let d=c(59347),e=c(14937);function f(a){let b=(0,e.normalizePathSep)(a);return b.startsWith("/index/")&&!(0,d.isDynamicRoute)(b)?b.slice(6):"/index"!==b?b:"/"}},8111:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FileSubjectTokenSupplier=void 0;let d=c(28354),e=c(29021),f=(0,d.promisify)(e.readFile??(()=>{})),g=(0,d.promisify)(e.realpath??(()=>{})),h=(0,d.promisify)(e.lstat??(()=>{}));class i{filePath;formatType;subjectTokenFieldName;constructor(a){this.filePath=a.filePath,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName}async getSubjectToken(){let a,b=this.filePath;try{if(b=await g(b),!(await h(b)).isFile())throw Error()}catch(a){throw a instanceof Error&&(a.message=`The file at ${b} does not exist, or it is not a file. ${a.message}`),a}let c=await f(b,{encoding:"utf8"});if("text"===this.formatType?a=c:"json"===this.formatType&&this.subjectTokenFieldName&&(a=JSON.parse(c)[this.subjectTokenFieldName]),!a)throw Error("Unable to parse the subject_token from the credential_source file");return a}}b.FileSubjectTokenSupplier=i},10279:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,17742)),"C:\\stuff\\code\\project-dezko\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"C:\\stuff\\code\\project-dezko\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}],I=["C:\\stuff\\code\\project-dezko\\app\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},10805:(a,b,c)=>{"use strict";var d=c(79428).Buffer,e=c(79428).SlowBuffer;function f(a,b){if(!d.isBuffer(a)||!d.isBuffer(b)||a.length!==b.length)return!1;for(var c=0,e=0;e<a.length;e++)c|=a[e]^b[e];return 0===c}a.exports=f,f.install=function(){d.prototype.equal=e.prototype.equal=function(a){return f(this,a)}};var g=d.prototype.equal,h=e.prototype.equal;f.restore=function(){d.prototype.equal=g,e.prototype.equal=h}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11107:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return f}});let d=c(92800),e=c(58430),f=a=>{if(!a.startsWith("/"))return a;let{pathname:b,query:c,hash:f}=(0,e.parsePath)(a);return""+(0,d.removeTrailingSlash)(b)+c+f};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},11229:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Colours=void 0;class c{static isEnabled(a){return a&&a.isTTY&&("function"!=typeof a.getColorDepth||a.getColorDepth()>2)}static refresh(){c.enabled=c.isEnabled(null==process?void 0:process.stderr),this.enabled?(c.reset="\x1b[0m",c.bright="\x1b[1m",c.dim="\x1b[2m",c.red="\x1b[31m",c.green="\x1b[32m",c.yellow="\x1b[33m",c.blue="\x1b[34m",c.magenta="\x1b[35m",c.cyan="\x1b[36m",c.white="\x1b[37m",c.grey="\x1b[90m"):(c.reset="",c.bright="",c.dim="",c.red="",c.green="",c.yellow="",c.blue="",c.magenta="",c.cyan="",c.white="",c.grey="")}}b.Colours=c,c.enabled=!1,c.reset="",c.bright="",c.dim="",c.red="",c.green="",c.yellow="",c.blue="",c.magenta="",c.cyan="",c.white="",c.grey="",c.refresh()},11723:a=>{"use strict";a.exports=require("querystring")},12412:a=>{"use strict";a.exports=require("assert")},12724:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PluggableAuthClient=b.ExecutableError=void 0;let d=c(52177),e=c(75994),f=c(80223);var g=c(80223);Object.defineProperty(b,"ExecutableError",{enumerable:!0,get:function(){return g.ExecutableError}});class h extends d.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(a){if(super(a),!a.credential_source.executable||(this.command=a.credential_source.executable.command,!this.command))throw Error('No valid Pluggable Auth "credential_source" provided.');if(void 0===a.credential_source.executable.timeout_millis)this.timeoutMillis=3e4;else if(this.timeoutMillis=a.credential_source.executable.timeout_millis,this.timeoutMillis<5e3||this.timeoutMillis>12e4)throw Error("Timeout must be between 5000120000 milliseconds.");this.outputFile=a.credential_source.executable.output_file,this.handler=new f.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){let a;if("1"!==process.env.GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES)throw Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");if(this.outputFile&&(a=await this.handler.retrieveCachedResponse()),!a){let b=new Map;b.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),b.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),b.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&b.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let c=this.getServiceAccountEmail();c&&b.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",c),a=await this.handler.retrieveResponseFromExecutable(b)}if(a.version>1)throw Error("Version of executable is not currently supported, maximum supported version is 1.");if(!a.success)throw new f.ExecutableError(a.errorMessage,a.errorCode);if(this.outputFile&&!a.expirationTime)throw new e.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(a.isExpired())throw Error("Executable response is expired.");return a.subjectToken}}b.PluggableAuthClient=h},12914:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},13284:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ExternalAccountClient=void 0;let d=c(52177),e=c(41167),f=c(83948),g=c(12724);class h{constructor(){throw Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(a){return a&&a.type===d.EXTERNAL_ACCOUNT_TYPE?a.credential_source?.environment_id?new f.AwsClient(a):a.credential_source?.executable?new g.PluggableAuthClient(a):new e.IdentityPoolClient(a):null}}b.ExternalAccountClient=h},14436:(a,b,c)=>{Promise.resolve().then(c.bind(c,23138)),Promise.resolve().then(c.bind(c,29076)),Promise.resolve().then(c.bind(c,63721)),Promise.resolve().then(c.bind(c,7583)),Promise.resolve().then(c.t.bind(c,27532,23))},14937:(a,b)=>{"use strict";function c(a){return a.replace(/\\/g,"/")}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"normalizePathSep",{enumerable:!0,get:function(){return c}})},15238:(a,b)=>{"use strict";function c(a){let b={};for(let[c,d]of a.entries()){let a=b[c];void 0===a?b[c]=d:Array.isArray(a)?a.push(d):b[c]=[a,d]}return b}function d(a){return"string"==typeof a?a:("number"!=typeof a||isNaN(a))&&"boolean"!=typeof a?"":String(a)}function e(a){let b=new URLSearchParams;for(let[c,e]of Object.entries(a))if(Array.isArray(e))for(let a of e)b.append(c,d(a));else b.set(c,d(e));return b}function f(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];for(let b of c){for(let c of b.keys())a.delete(c);for(let[c,d]of b.entries())a.append(c,d)}return a}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{assign:function(){return f},searchParamsToUrlQuery:function(){return c},urlQueryToSearchParams:function(){return e}})},16293:(a,b,c)=>{var d,e=c(62253).Buffer,f=c(55511),g=c(89158),h=c(28354),i="secret must be a string or buffer",j="key must be a string or a buffer",k="function"==typeof f.createPublicKey;function l(a){if(!e.isBuffer(a)&&"string"!=typeof a&&(!k||"object"!=typeof a||"string"!=typeof a.type||"string"!=typeof a.asymmetricKeyType||"function"!=typeof a.export))throw p(j)}function m(a){if(!e.isBuffer(a)&&"string"!=typeof a&&"object"!=typeof a)throw p("key must be a string, a buffer or an object")}function n(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o(a){var b=4-(a=a.toString()).length%4;if(4!==b)for(var c=0;c<b;++c)a+="=";return a.replace(/\-/g,"+").replace(/_/g,"/")}function p(a){var b=[].slice.call(arguments,1);return TypeError(h.format.bind(h,a).apply(null,b))}function q(a){var b;return b=a,e.isBuffer(b)||"string"==typeof b||(a=JSON.stringify(a)),a}function r(a){return function(b,c){!function(a){if(!e.isBuffer(a)){if("string"!=typeof a){if(!k||"object"!=typeof a||"secret"!==a.type||"function"!=typeof a.export)throw p(i)}}}(c),b=q(b);var d=f.createHmac("sha"+a,c);return n((d.update(b),d.digest("base64")))}}k&&(j+=" or a KeyObject",i+="or a KeyObject");var s="timingSafeEqual"in f?function(a,b){return a.byteLength===b.byteLength&&f.timingSafeEqual(a,b)}:function(a,b){return d||(d=c(10805)),d(a,b)};function t(a){return function(b,c,d){var f=r(a)(b,d);return s(e.from(c),e.from(f))}}function u(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign(c,"base64")))}}function v(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify(d,c,"base64")}}function w(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign({key:c,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function x(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify({key:d,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},c,"base64")}}function y(a){var b=u(a);return function(){var c=b.apply(null,arguments);return g.derToJose(c,"ES"+a)}}function z(a){var b=v(a);return function(c,d,e){return b(c,d=g.joseToDer(d,"ES"+a).toString("base64"),e)}}function A(){return function(){return""}}function B(){return function(a,b){return""===b}}a.exports=function(a){var b=a.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!b)throw p('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',a);var c=(b[1]||b[3]).toLowerCase(),d=b[2];return{sign:({hs:r,rs:u,ps:w,es:y,none:A})[c](d),verify:({hs:t,rs:v,ps:x,es:z,none:B})[c](d)}}},16923:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{hasAdjacentParameterIssues:function(){return d},normalizeAdjacentParameters:function(){return e},normalizeTokensForRegexp:function(){return f},stripParameterSeparators:function(){return g}});let c="_NEXTSEP_";function d(a){return"string"==typeof a&&!!(/\/\(\.{1,3}\):[^/\s]+/.test(a)||/:[a-zA-Z_][a-zA-Z0-9_]*:[a-zA-Z_][a-zA-Z0-9_]*/.test(a))}function e(a){let b=a;return(b=b.replace(/(\([^)]*\)):([^/\s]+)/g,`$1${c}:$2`)).replace(/:([^:/\s)]+)(?=:)/g,`:$1${c}`)}function f(a){return a.map(a=>"object"==typeof a&&null!==a&&"modifier"in a&&("*"===a.modifier||"+"===a.modifier)&&"prefix"in a&&"suffix"in a&&""===a.prefix&&""===a.suffix?{...a,prefix:"/"}:a)}function g(a){let b={};for(let[d,e]of Object.entries(a))"string"==typeof e?b[d]=e.replace(RegExp(`^${c}`),""):Array.isArray(e)?b[d]=e.map(a=>"string"==typeof a?a.replace(RegExp(`^${c}`),""):a):b[d]=e;return b}},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k,metadata:()=>i,viewport:()=>j});var d=c(75338),e=c(61730),f=c(59067),g=c.n(f);c(82704);var h=c(84105);let i={title:"Vireo - AI Video Editor | Make Viral Reels & TikToks Instantly",description:"Turn your raw clips into viral-ready reels in seconds. Vireo is the AI-powered video editor that creates beat-synced TikToks, Instagram Reels & YouTube Shorts automatically. No editing skills needed.",keywords:"video editor, reel maker, TikTok video editor, viral video creator, AI video editor, beat sync editor, Instagram reels maker, short video creator, YouTube Shorts maker, reel creator app, automatic video editor, turn clips into reels, video to TikTok converter, viral reels, short form video, social media video editor",authors:[{name:"Vireo"}],robots:"index, follow",openGraph:{type:"website",url:"https://editvireo.com/",title:"Vireo - AI Video Editor | Make Viral Reels & TikToks Instantly",description:"Turn your raw clips into viral-ready reels in seconds. AI-powered beat-synced editing for TikTok, Instagram Reels & YouTube Shorts.",images:[{url:"https://editvireo.com/android-chrome-512x512.png",width:512,height:512}],siteName:"Vireo",locale:"en_US"},twitter:{card:"summary_large_image",title:"Vireo - AI Video Editor | Make Viral Reels & TikToks Instantly",description:"Turn your raw clips into viral-ready reels in seconds. AI-powered beat-synced editing for TikTok, Instagram Reels & YouTube Shorts.",images:["https://editvireo.com/android-chrome-512x512.png"]},icons:{icon:[{url:"/favicon-16x16.png",sizes:"16x16",type:"image/png"},{url:"/favicon-32x32.png",sizes:"32x32",type:"image/png"}],apple:"/apple-touch-icon.png"},manifest:"/site.webmanifest"},j={themeColor:"#4ECDC4"};function k({children:a}){return(0,d.jsx)(e.lJ,{children:(0,d.jsxs)("html",{lang:"en",children:[(0,d.jsxs)("head",{children:[(0,d.jsx)(h.default,{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-SPQWPZYRCP",strategy:"afterInteractive"}),(0,d.jsx)(h.default,{id:"google-analytics",strategy:"afterInteractive",children:`
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-SPQWPZYRCP');
            `}),(0,d.jsx)(h.default,{async:!0,src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7431469479082797",crossOrigin:"anonymous",strategy:"afterInteractive"}),(0,d.jsx)(h.default,{defer:!0,src:"https://cloud.umami.is/script.js","data-website-id":"8725e3eb-4d82-457c-baf1-a0f9875bd0df",strategy:"afterInteractive"}),(0,d.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",integrity:"sha512-SfZ6P3xYpNsmW4W+WvVManIeZDV4mQdlqzTeWY5Avzkdxl3pNGdisM8Iky3UczZz7YT1Nx1B4ezhO6LNpH3K0w==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"}),(0,d.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"WebApplication",name:"Vireo",alternateName:"Vireo Video Editor",url:"https://editvireo.com",description:"AI-powered video editor that turns raw clips into viral-ready reels with automatic beat-synced editing for TikTok, Instagram Reels, and YouTube Shorts.",applicationCategory:"MultimediaApplication",operatingSystem:"Web Browser",browserRequirements:"Requires JavaScript",offers:{"@type":"Offer",price:"0",priceCurrency:"USD",description:"Free tier with 2 video generations"},featureList:["AI-powered video editing","Automatic beat synchronization","TikTok reel creation","Instagram Reels maker","YouTube Shorts creator","Multiple vibe styles","One-click viral videos"],screenshot:"https://editvireo.com/android-chrome-512x512.png",softwareVersion:"1.0",creator:{"@type":"Organization",name:"Vireo",url:"https://editvireo.com"}})}}),(0,d.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"SoftwareApplication",name:"Vireo - AI Video Editor",applicationCategory:"VideoApplication",operatingSystem:"Web",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",ratingCount:"150"}})}})]}),(0,d.jsx)("body",{className:g().className,children:a})]})})}},17545:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isLocalURL",{enumerable:!0,get:function(){return f}});let d=c(61962),e=c(33043);function f(a){if(!(0,d.isAbsoluteUrl)(a))return!0;try{let b=(0,d.getLocationOrigin)(),c=new URL(a,b);return c.origin===b&&(0,e.hasBasePath)(c.pathname)}catch(a){return!1}}},17605:(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=c(63674),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),a.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},17742:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\stuff\\\\code\\\\project-dezko\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\stuff\\code\\project-dezko\\app\\page.tsx","default")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:a=>{"use strict";a.exports=require("process")},20425:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GoogleToken=void 0;var d=i(c(29021)),e=c(30911),f=i(c(99255)),g=i(c(33873)),h=c(28354);function i(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(i=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=j(a)&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(var h in a)"default"!==h&&({}).hasOwnProperty.call(a,h)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,h))&&(f.get||f.set)?e(g,h,f):g[h]=a[h]);return g})(a,b)}function j(a){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function k(a,b){if(b.has(a))throw TypeError("Cannot initialize the same private elements twice on an object")}function l(a,b,c){return a.set(m(a,b),c),c}function m(a,b,c){if("function"==typeof a?a===b:a.has(b))return arguments.length<3?b:c;throw TypeError("Private element is not present on this object")}function n(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,v(d.key),d)}}function o(a,b,c){return b&&n(a.prototype,b),c&&n(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function p(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function q(a){var b="function"==typeof Map?new Map:void 0;return(q=function(a){if(null===a||!function(a){try{return -1!==Function.toString.call(a).indexOf("[native code]")}catch(b){return"function"==typeof a}}(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return function(a,b,c){if(r())return Reflect.construct.apply(null,arguments);var d=[null];d.push.apply(d,b);var e=new(a.bind.apply(a,d));return c&&s(e,c.prototype),e}(a,arguments,t(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s(c,a)})(a)}function r(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(r=function(){return!!a})()}function s(a,b){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function t(a){return(t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function u(a,b,c){return(b=v(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function v(a){var b=function(a,b){if("object"!=j(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=j(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==j(b)?b:b+""}function w(){var a,b,c="function"==typeof Symbol?Symbol:{},d=c.iterator||"@@iterator",e=c.toStringTag||"@@toStringTag";function f(c,d,e,f){var i=Object.create((d&&d.prototype instanceof h?d:h).prototype);return x(i,"_invoke",function(c,d,e){var f,h,i,j=0,k=e||[],l=!1,m={p:0,n:0,v:a,a:n,f:n.bind(a,4),d:function(b,c){return f=b,h=0,i=a,m.n=c,g}};function n(c,d){for(h=c,i=d,b=0;!l&&j&&!e&&b<k.length;b++){var e,f=k[b],n=m.p,o=f[2];c>3?(e=o===d)&&(i=f[(h=f[4])?5:(h=3,3)],f[4]=f[5]=a):f[0]<=n&&((e=c<2&&n<f[1])?(h=0,m.v=d,m.n=f[1]):n<o&&(e=c<3||f[0]>d||d>o)&&(f[4]=c,f[5]=d,m.n=o,h=0))}if(e||c>1)return g;throw l=!0,d}return function(e,k,o){if(j>1)throw TypeError("Generator is already running");for(l&&1===k&&n(k,o),h=k,i=o;(b=h<2?a:i)||!l;){f||(h?h<3?(h>1&&(m.n=-1),n(h,i)):m.n=i:m.v=i);try{if(j=2,f){if(h||(e="next"),b=f[e]){if(!(b=b.call(f,i)))throw TypeError("iterator result is not an object");if(!b.done)return b;i=b.value,h<2&&(h=0)}else 1===h&&(b=f.return)&&b.call(f),h<2&&(i=TypeError("The iterator does not provide a '"+e+"' method"),h=1);f=a}else if((b=(l=m.n<0)?i:c.call(d,m))!==g)break}catch(b){f=a,h=1,i=b}finally{j=1}}return{value:b,done:l}}}(c,e,f),!0),i}var g={};function h(){}function i(){}function j(){}b=Object.getPrototypeOf;var k=j.prototype=h.prototype=Object.create([][d]?b(b([][d]())):(x(b={},d,function(){return this}),b));function l(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,j):(a.__proto__=j,x(a,e,"GeneratorFunction")),a.prototype=Object.create(k),a}return i.prototype=j,x(k,"constructor",j),x(j,"constructor",i),i.displayName="GeneratorFunction",x(j,e,"GeneratorFunction"),x(k),x(k,e,"Generator"),x(k,d,function(){return this}),x(k,"toString",function(){return"[object Generator]"}),(w=function(){return{w:f,m:l}})()}function x(a,b,c,d){var e=Object.defineProperty;try{e({},"",{})}catch(a){e=0}(x=function(a,b,c,d){if(b)e?e(a,b,{value:c,enumerable:!d,configurable:!d,writable:!d}):a[b]=c;else{var f=function(b,c){x(a,b,function(a){return this._invoke(b,c,a)})};f("next",0),f("throw",1),f("return",2)}})(a,b,c,d)}function y(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function z(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){y(f,d,e,g,h,"next",a)}function h(a){y(f,d,e,g,h,"throw",a)}g(void 0)})}}var A=d.readFile?(0,h.promisify)(d.readFile):z(w().m(function a(){return w().w(function(a){for(;;)switch(a.n){case 0:throw new C("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return a.a(2)}},a)})),B="https://oauth2.googleapis.com/token",C=function(a){function b(a,c){var d,e,f;return p(this,b),e=b,f=[a],e=t(e),u(d=function(a,b){if(b&&("object"==j(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");var c=a;if(void 0===c)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(this,r()?Reflect.construct(e,f||[],t(this).constructor):e.apply(this,f)),"code",void 0),d.code=c,d}if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");return b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),a&&s(b,a),o(b)}(q(Error)),D=new WeakMap,E=new WeakSet;function F(a){return G.apply(this,arguments)}function G(){return(G=z(w().m(function a(b){return w().w(function(a){for(;;)switch(a.n){case 0:if(!D.get(m(D,this))||b.forceRefresh){a.n=1;break}return a.a(2,D.get(m(D,this)));case 1:return a.p=1,a.n=2,l(D,this,m(E,this,H).call(this,b));case 2:return a.a(2,a.v);case 3:return a.p=3,l(D,this,void 0),a.f(3);case 4:return a.a(2)}},a,this,[[1,,3,4]])}))).apply(this,arguments)}function H(a){return I.apply(this,arguments)}function I(){return(I=z(w().m(function a(b){var c;return w().w(function(a){for(;;)switch(a.n){case 0:if(!1!==this.isTokenExpiring()||!1!==b.forceRefresh){a.n=1;break}return a.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){a.n=2;break}throw Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){a.n=4;break}return a.n=3,this.getCredentials(this.keyFile);case 3:c=a.v,this.key=c.privateKey,this.iss=c.clientEmail||this.iss,c.clientEmail||m(E,this,J).call(this);case 4:return a.a(2,m(E,this,N).call(this))}},a,this)}))).apply(this,arguments)}function J(){if(!this.iss)throw new C("email is required.","MISSING_CREDENTIALS")}function K(){return L.apply(this,arguments)}function L(){return(L=z(w().m(function a(){var b;return w().w(function(a){for(;;)switch(a.n){case 0:if(this.accessToken){a.n=1;break}throw Error("No token to revoke.");case 1:return b="https://oauth2.googleapis.com/revoke?token="+this.accessToken,a.n=2,this.transporter.request({url:b,retry:!0});case 2:m(E,this,M).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return a.a(2)}},a,this)}))).apply(this,arguments)}function M(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.keyFile=a.keyFile,this.key=a.key,this.rawToken=void 0,this.iss=a.email||a.iss,this.sub=a.sub,this.additionalClaims=a.additionalClaims,"object"===j(a.scope)?this.scope=a.scope.join(" "):this.scope=a.scope,this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,a.transporter&&(this.transporter=a.transporter)}function N(){return O.apply(this,arguments)}function O(){return(O=z(w().m(function a(){var b,c,d,e,g,h,i,j,k,l;return w().w(function(a){for(;;)switch(a.n){case 0:return b=Math.floor(new Date().getTime()/1e3),c=this.additionalClaims||{},d=Object.assign({iss:this.iss,scope:this.scope,aud:B,exp:b+3600,iat:b,sub:this.sub},c),e=f.sign({header:{alg:"RS256"},payload:d,secret:this.key}),a.p=1,a.n=2,this.transporter.request({method:"POST",url:B,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:e}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return g=a.v,this.rawToken=g.data,this.expiresAt=null===g.data.expires_in||void 0===g.data.expires_in?void 0:(b+g.data.expires_in)*1e3,a.a(2,this.rawToken);case 3:throw a.p=3,l=a.v,this.rawToken=void 0,this.tokenExpires=void 0,(j=l.response&&null!=(h=l.response)&&h.data?null==(i=l.response)?void 0:i.data:{}).error&&(k=j.error_description?": ".concat(j.error_description):"",l.message="".concat(j.error).concat(k)),l;case 4:return a.a(2)}},a,this,[[1,3]])}))).apply(this,arguments)}b.GoogleToken=function(){var a;return o(function a(b){p(this,a),k(this,E),E.add(this),u(this,"expiresAt",void 0),u(this,"key",void 0),u(this,"keyFile",void 0),u(this,"iss",void 0),u(this,"sub",void 0),u(this,"scope",void 0),u(this,"rawToken",void 0),u(this,"tokenExpires",void 0),u(this,"email",void 0),u(this,"additionalClaims",void 0),u(this,"eagerRefreshThresholdMillis",void 0),u(this,"transporter",{request:function(a){return(0,e.request)(a)}}),k(this,D),D.set(this,void 0),m(E,this,M).call(this,b)},[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var a=new Date().getTime();return!this.rawToken||!this.expiresAt||a>=this.expiresAt}},{key:"isTokenExpiring",value:function(){var a,b=new Date().getTime(),c=null!=(a=this.eagerRefreshThresholdMillis)?a:0;return!this.rawToken||!this.expiresAt||this.expiresAt<=b+c}},{key:"getToken",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===j(a)&&(b=a,a=void 0),b=Object.assign({forceRefresh:!1},b),a){var c=a;m(E,this,F).call(this,b).then(function(a){return c(null,a)},a);return}return m(E,this,F).call(this,b)}},{key:"getCredentials",value:(a=z(w().m(function a(b){var c,d,e,f,h;return w().w(function(a){for(;;)switch(a.n){case 0:a.n=".json"===(h=g.extname(b))?1:".der"===h||".crt"===h||".pem"===h?4:".p12"===h||".pfx"===h?6:7;break;case 1:return a.n=2,A(b,"utf8");case 2:if(d=(c=JSON.parse(a.v)).private_key,e=c.client_email,!(!d||!e)){a.n=3;break}throw new C("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return a.a(2,{privateKey:d,clientEmail:e});case 4:return a.n=5,A(b,"utf8");case 5:return f=a.v,a.a(2,{privateKey:f});case 6:throw new C("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new C("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return a.a(2)}},a)})),function(b){return a.apply(this,arguments)})},{key:"revokeToken",value:function(a){return a?void m(E,this,K).call(this).then(function(){return a()},a):m(E,this,K).call(this)}}])}()},20766:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"addPathSuffix",{enumerable:!0,get:function(){return e}});let d=c(58430);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return""+c+b+e+f}},20879:(a,b,c)=>{"use strict";let d,e=c(74075),f=c(78086),g=c(61075),{kStatusCode:h}=c(63674),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");class p{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",s),this._inflate.on("data",r)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",q)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}function q(a){this[n].push(a),this[l]+=a.length}function r(a){if(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)return void this[n].push(a);this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",r),this.reset()}function s(a){if(this[k]._inflate=null,this[o])return void this[m](this[o]);a[h]=1007,this[m](a)}a.exports=p},21111:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LRUCache=void 0,b.snakeToCamel=h,b.originalOrCamelOptions=function(a){return{get:function(b){let c=a||{};return c[b]??c[h(b)]}}},b.removeUndefinedValuesInObject=function(a){return Object.entries(a).forEach(([b,c])=>{(void 0===c||"undefined"===c)&&delete a[b]}),a},b.isValidFile=j,b.getWellKnownCertificateConfigFileLocation=function(){let a=process.env.CLOUDSDK_CONFIG||(e.platform().startsWith("win")?f.join(process.env.APPDATA||"",g):f.join(process.env.HOME||"",".config",g));return f.join(a,"certificate_config.json")};let d=c(29021),e=c(21820),f=c(33873),g="gcloud";function h(a){return a.replace(/([_][^_])/g,a=>a.slice(1).toUpperCase())}class i{capacity;#a=new Map;maxAge;constructor(a){this.capacity=a.capacity,this.maxAge=a.maxAge}#b(a,b){this.#a.delete(a),this.#a.set(a,{value:b,lastAccessed:Date.now()})}set(a,b){this.#b(a,b),this.#c()}get(a){let b=this.#a.get(a);if(b)return this.#b(a,b.value),this.#c(),b.value}#c(){let a=this.maxAge?Date.now()-this.maxAge:0,b=this.#a.entries().next();for(;!b.done&&(this.#a.size>this.capacity||b.value[1].lastAccessed<a);)this.#a.delete(b.value[0]),b=this.#a.entries().next()}}async function j(a){try{return(await d.promises.lstat(a)).isFile()}catch(a){return!1}}b.LRUCache=i},21820:a=>{"use strict";a.exports=require("os")},22595:(a,b)=>{"use strict";function c(a,b,c,d,f){let g=a[b];if(f&&f.has(b)?g=f.get(b):Array.isArray(g)?g=g.map(a=>encodeURIComponent(a)):"string"==typeof g&&(g=encodeURIComponent(g)),!g){let f="oc"===c;if("c"===c||f)return f?{param:b,value:null,type:c,treeSegment:[b,"",c]}:{param:b,value:g=d.split("/").slice(1).flatMap(b=>{var c;let d=e(b);return null!=(c=a[d.key])?c:d.key}),type:c,treeSegment:[b,g.join("/"),c]}}return{param:b,value:g,treeSegment:[b,Array.isArray(g)?g.join("/"):g,c],type:c}}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{PARAMETER_PATTERN:function(){return d},getDynamicParam:function(){return c},parseMatchedParameter:function(){return f},parseParameter:function(){return e}});let d=/^([^[]*)\[((?:\[[^\]]*\])|[^\]]+)\](.*)$/;function e(a){let b=a.match(d);return b?f(b[2]):f(a)}function f(a){let b=a.startsWith("[")&&a.endsWith("]");b&&(a=a.slice(1,-1));let c=a.startsWith("...");return c&&(a=a.slice(3)),{key:a,repeat:c,optional:b}}},22708:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"escapeStringRegexp",{enumerable:!0,get:function(){return e}});let c=/[|\\{}()[\]^$+*?.-]/,d=/[|\\{}()[\]^$+*?.-]/g;function e(a){return c.test(a)?a.replace(d,"\\$&"):a}},26069:(a,b,c)=>{var d=c(43604).stringify,e=c(75758);a.exports=function(a){return{parse:e(a),stringify:d}},a.exports.parse=e(),a.exports.stringify=d},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},26802:(a,b,c)=>{"use strict";let{Writable:d}=c(27910),e=c(20879),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=c(63674),{concat:j,toArrayBuffer:k,unmask:l}=c(78086),{isValidStatusCode:m,isValidUTF8:n}=c(86200),o=Buffer[Symbol.species];class p extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0);return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);if(c>2097151)return void a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a)}haveLength(a){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return void a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}a.exports=p},27381:(a,b)=>{"use strict";function c(a,b){return void 0===b&&(b=""),("/"===a?"/index":/^\/index(\/|$)/.test(a)?"/index"+a:a)+b}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return c}})},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29642:(a,b,c)=>{"use strict";let d,e;c.r(b),c.d(b,{default:()=>fp});var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah=c(21124),ai=c(38301),aj=c.n(ai),ak=c(93551);c(51354),c(56962);var al=c(84063);c(1056),c(57809),c(75151),c(63246),c(62973),c(11350),(0,al.wV)({packageName:"@clerk/nextjs"}),(0,al.kX)("@clerk/nextjs");let am=ak.iB,an=ak.Bl;ak.EH;let ao=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},ap=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var aq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let ar=(0,ai.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,ai.createElement)("svg",{ref:i,...aq,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:ap("lucide",e),...!f&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(h)&&{"aria-hidden":"true"},...h},[...g.map(([a,b])=>(0,ai.createElement)(a,b)),...Array.isArray(f)?f:[f]])),as=(a,b)=>{let c=(0,ai.forwardRef)(({className:c,...d},e)=>(0,ai.createElement)(ar,{ref:e,iconNode:b,className:ap(`lucide-${ao(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...d}));return c.displayName=ao(a),c},at=as("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),au=as("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),av=as("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var aw=function(a){return a.LANDING="LANDING",a.PROCESSING="PROCESSING",a.RESULT="RESULT",a.DASHBOARD="DASHBOARD",a}({});let ax=({children:a,variant:b="primary",size:c="md",isLoading:d,className:e="",...f})=>(0,ah.jsxs)("button",{className:`font-bold rounded-full transition-all duration-200 transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${{primary:"bg-vireo-pink text-white shadow-lg hover:shadow-xl focus:ring-vireo-pink/30 hover:bg-[#ff5252]",secondary:"bg-vireo-yellow text-vireo-dark shadow-md hover:shadow-lg focus:ring-vireo-yellow/30 hover:bg-[#ffdf40]",outline:"border-2 border-vireo-purple text-vireo-purple hover:bg-vireo-purple hover:text-white"}[b]} ${{sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-xl"}[c]} ${e}`,disabled:d||f.disabled,...f,children:[d?(0,ah.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ah.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ah.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,a]}),ay=as("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),az=as("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),aA=as("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),aB="http://44.200.94.8:8000",aC={async getUploadUrl(a,b,c){let d=await fetch(`${aB}/get-upload-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:a,filename:b,content_type:c})});if(!d.ok)throw Error(`Failed to get upload URL: ${d.statusText}`);return d.json()},async uploadVideos(a,b,c){let d=b.replace(/[^a-zA-Z0-9]/g,"_"),e=crypto.randomUUID(),f=`${d}-${e}`,g=a.map(async a=>{let b=a.name,{upload_url:c}=await this.getUploadUrl(f,b,a.type),d=await fetch(c,{method:"PUT",body:a,headers:{"Content-Type":a.type}});if(!d.ok)throw Error(`Upload failed for ${b}: ${d.statusText}`);return b});return{message:"Uploads successful",files:await Promise.all(g),session_id:f}},async generateVideo(a,b,c){let d={sessionId:a,fileNames:b,...c&&{vibe:c}},e=await fetch(`${aB}/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!e.ok)throw Error((await e.json().catch(()=>({detail:e.statusText}))).detail||"Video generation failed");return e.json()},async logError(a){let b={error:a.message},c=await fetch(`${aB}/error`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error(`Error logging failed: ${c.statusText}`);return c.json()},async getSongs(){let a=await fetch(`${aB}/songs`);if(!a.ok)throw Error(`Failed to fetch songs: ${a.statusText}`);return a.json()},async clearUploads(){let a=await fetch(`${aB}/clear`,{method:"DELETE"});if(!a.ok)throw Error(`Clear failed: ${a.statusText}`);return a.json()},async checkVideoStatus(a,b){try{let c=b||this.getVideoUrl(a),d=await fetch(c,{method:"HEAD"});return{exists:d.ok,ready:d.ok}}catch(a){return{exists:!1,ready:!1}}},getVideoUrl:a=>`${aB}/outputs/${a}`,async getUserQuota(a){try{let b=await fetch(`${aB}/user-quota/${a}`);if(!b.ok)return{generationCount:0,isPremium:!1};return b.json()}catch(a){return console.error("Failed to fetch user quota:",a),{generationCount:0,isPremium:!1}}},async syncQuota(a,b){try{await fetch(`${aB}/sync-quota`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,generationCount:b})})}catch(a){console.error("Failed to sync quota:",a)}}},aD=[{id:"party",label:"Party",emoji:"\uD83C\uDF89"},{id:"nostalgia",label:"Nostalgia",emoji:"\uD83D\uDCFC"},{id:"cute",label:"Cute",emoji:"\uD83D\uDC96"},{id:"hardcore",label:"Hardcore",emoji:""},{id:"lovey-dovey",label:"Lovey Dovey",emoji:"\uD83E\uDD70"},{id:"2025-throwback",label:"2025 Throwback",emoji:"\uD83D\uDD01"}],aE=({onStartProcessing:a,isSignedIn:b,isProcessing:c=!1,userId:d,userName:e,userEmail:f,canGenerate:g=!0,onShowPaymentModal:h})=>{let[i,j]=(0,ai.useState)([]),[k,l]=(0,ai.useState)(!1),[m,n]=(0,ai.useState)(!1),[o,p]=(0,ai.useState)(null),[q,r]=(0,ai.useState)(!1),[s,t]=(0,ai.useState)(null),u=(0,ai.useRef)(null),v=(0,ai.useRef)(!1),w=(0,ai.useRef)(null),x=async a=>{if(!b||!a)return;let c=[];for(let b of Array.from(a)){if(i.length+c.length>=20){alert("Maximum 20 clips allowed!");break}if(!b.type.startsWith("video/"))continue;if(b.size>0x19000000){alert(`File ${b.name} is too large (Max 400MB)`);continue}let a=new File([new Blob([await b.arrayBuffer()],{type:b.type})],b.name,{type:b.type,lastModified:b.lastModified}),d=URL.createObjectURL(a);c.push({id:Math.random().toString(36).substr(2,9),file:a,previewUrl:d,name:b.name})}j(a=>[...a,...c])},y=async()=>{if(!d||!e)return void alert("User information not available. Please sign in.");n(!0),r(!0),v.current=!0;try{let a=i.map(a=>a.file),b=await aC.uploadVideos(a,e,d);t(b),u.current=b,r(!1),v.current=!1}catch(a){console.error("Upload failed:",a),await aC.logError(a),r(!1),v.current=!1,u.current=null,alert("Upload failed. Please try again."),n(!1)}};return(0,ah.jsxs)("div",{className:"w-full max-w-3xl mx-auto px-4 animate-fade-in flex flex-col items-center",children:[(0,ah.jsxs)("div",{className:"text-center mb-8 md:mb-12",children:[(0,ah.jsxs)("h1",{className:"text-4xl md:text-6xl font-black text-vireo-dark mb-4 tracking-tight leading-tight dark:text-white",children:["Main character energy, ",(0,ah.jsx)("span",{className:"text-vireo-teal inline-block transform hover:rotate-2 transition-transform cursor-default",children:"instantly."})]}),(0,ah.jsx)("p",{className:"text-lg md:text-xl text-gray-500 font-medium",children:"Vireo turns forgotten clips into stories worth sharing."})]}),(0,ah.jsxs)("div",{className:`w-full relative transition-all duration-500 ${m?"min-h-[520px] md:min-h-[400px]":"min-h-[300px]"}`,children:[(0,ah.jsxs)("div",{className:`
            w-full bg-white rounded-3xl border-4 border-dashed transition-all duration-500 group absolute inset-0
            h-[300px] flex flex-col items-center justify-center p-8
            ${m?"opacity-0 scale-95 pointer-events-none z-0":"opacity-100 scale-100 z-10"}
            ${k?"border-vireo-pink bg-vireo-pink/5 scale-105":"border-gray-200 hover:border-vireo-teal hover:bg-vireo-teal/5"}
            dark:bg-gray-800 dark:border-gray-700 dark:hover:border-vireo-teal dark:hover:bg-vireo-teal/10
          `,onDragOver:a=>{a.preventDefault(),b&&!m&&l(!0)},onDragLeave:a=>{a.preventDefault(),l(!1)},onDrop:a=>{a.preventDefault(),l(!1),b&&!m&&x(a.dataTransfer.files)},onClick:()=>{b&&!m&&w.current?.click()},children:[(0,ah.jsx)("input",{type:"file",ref:w,className:"hidden",multiple:!0,accept:"video/*",onChange:a=>x(a.target.files)}),0===i.length?(0,ah.jsxs)("div",{className:"text-center pointer-events-none",children:[(0,ah.jsx)("div",{className:"w-20 h-20 bg-vireo-yellow rounded-full flex items-center justify-center mx-auto mb-6 transform group-hover:scale-110 group-hover:rotate-6 transition-transform",children:(0,ah.jsx)(ay,{className:"w-10 h-10 text-vireo-orange"})}),b?(0,ah.jsxs)(ah.Fragment,{children:[(0,ah.jsx)("h3",{className:"text-2xl font-bold text-vireo-dark mb-2 dark:text-white",children:"Drop your clips here \uD83D\uDCF8"}),(0,ah.jsx)("p",{className:"text-gray-400 dark:text-gray-300",children:"or click to browse files"})]}):(0,ah.jsxs)("div",{className:"pointer-events-auto",children:[(0,ah.jsx)("h3",{className:"text-2xl font-bold text-vireo-dark mb-2 dark:text-white",children:"Sign in to upload clips \uD83D\uDD12"}),(0,ah.jsx)(ak.hZ,{mode:"modal",children:(0,ah.jsx)("button",{className:"mt-2 px-6 py-2 bg-vireo-teal text-white rounded-lg font-bold hover:bg-opacity-90 transition-all",onClick:a=>a.stopPropagation(),children:"Sign In"})})]})]}):(0,ah.jsx)("div",{className:"w-full h-full overflow-y-auto pointer-events-auto cursor-default px-2",onClick:a=>a.stopPropagation(),children:(0,ah.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 w-full pb-4",children:[i.map(a=>(0,ah.jsxs)("div",{className:"relative aspect-square bg-gray-100 rounded-xl overflow-hidden group/item shadow-sm",children:[(0,ah.jsx)("video",{src:a.previewUrl,className:"w-full h-full object-cover"}),(0,ah.jsx)("button",{onClick:()=>(a=>{j(b=>{let c=b.filter(b=>b.id!==a),d=b.find(b=>b.id===a);return d&&URL.revokeObjectURL(d.previewUrl),c})})(a.id),className:"absolute top-2 right-2 bg-white/90 p-1 rounded-full text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity hover:bg-white",children:(0,ah.jsx)(az,{className:"w-4 h-4"})}),(0,ah.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent p-2",children:(0,ah.jsx)("p",{className:"text-xs text-white truncate",children:a.name})})]},a.id)),i.length<20&&(0,ah.jsxs)("button",{onClick:()=>w.current?.click(),className:"aspect-square rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center text-gray-400 hover:border-vireo-teal hover:text-vireo-teal hover:bg-white transition-colors",children:[(0,ah.jsx)(aA,{className:"w-8 h-8 mb-1"}),(0,ah.jsx)("span",{className:"text-xs font-bold",children:"Add More"})]})]})})]}),(0,ah.jsx)("div",{className:`
            w-full bg-white rounded-3xl border-4 border-vireo-teal transition-all duration-500 absolute inset-0
            h-[520px] md:h-[400px] flex flex-col items-center justify-center p-4 md:p-8
            ${m?"opacity-100 scale-100 z-10":"opacity-0 scale-95 pointer-events-none z-0"}
            dark:bg-gray-800 dark:border-vireo-teal
          `,children:(0,ah.jsxs)("div",{className:"w-full",children:[(0,ah.jsx)("h3",{className:"text-xl md:text-2xl font-bold text-vireo-dark mb-1 md:mb-2 text-center dark:text-white",children:"Choose your vibe "}),(0,ah.jsx)("p",{className:"text-sm md:text-base text-gray-500 text-center mb-4 md:mb-6",children:"Select the energy for your video"}),(0,ah.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4",children:aD.map(a=>(0,ah.jsxs)("button",{onClick:()=>{p(a.id)},className:`
                    p-4 md:p-6 rounded-2xl border-3 transition-all duration-300 flex flex-col items-center justify-center gap-1 md:gap-2
                    ${o===a.id?"border-vireo-pink bg-vireo-pink/10 scale-105 shadow-lg":"border-gray-200 bg-white hover:border-vireo-teal hover:bg-vireo-teal/5 hover:scale-105 shadow-md hover:shadow-lg"}
                    dark:border-gray-700 dark:bg-gray-800 dark:hover:border-vireo-teal
                  `,children:[(0,ah.jsx)("span",{className:"text-3xl md:text-4xl",children:a.emoji}),(0,ah.jsx)("span",{className:`text-xs md:text-sm font-bold ${o===a.id?"text-vireo-pink":"text-gray-700 dark:text-gray-300"}`,children:a.label})]},a.id))})]})})]}),(0,ah.jsx)("div",{className:"mt-8 transition-all duration-500",children:m?(0,ah.jsx)("div",{className:`transition-all duration-500 transform ${o?"translate-y-0 opacity-100":"translate-y-10 opacity-0 pointer-events-none"}`,children:(0,ah.jsx)(ax,{size:"lg",variant:"primary",className:"text-xl px-12 py-5 shadow-vireo-pink/40 shadow-xl",onClick:()=>{if(!o)return;if(!g)return void h?.();let b=i.map(a=>a.name);a(new Promise(a=>{let b=()=>{u.current&&!v.current?a(u.current):setTimeout(b,100)};b()}),[],b,o)},disabled:!o,children:"Make me the main character "})}):(0,ah.jsx)("div",{className:`transition-all duration-500 transform ${i.length>0?"translate-y-0 opacity-100":"translate-y-10 opacity-0 pointer-events-none"}`,children:(0,ah.jsx)(ax,{size:"lg",variant:"primary",className:"text-xl px-12 py-5 shadow-vireo-pink/40 shadow-xl",onClick:y,disabled:q,children:q?"Uploading...":"Upload "})})})]})};var aF=function(){return(aF=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};Object.create;function aG(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}Object.create,"function"==typeof SuppressedError&&SuppressedError;var aH=c(36249),aI=c.n(aH),aJ="-ms-",aK="-moz-",aL="-webkit-",aM="comm",aN="rule",aO="decl",aP="@keyframes",aQ=Math.abs,aR=String.fromCharCode,aS=Object.assign;function aT(a,b){return(a=b.exec(a))?a[0]:a}function aU(a,b,c){return a.replace(b,c)}function aV(a,b,c){return a.indexOf(b,c)}function aW(a,b){return 0|a.charCodeAt(b)}function aX(a,b,c){return a.slice(b,c)}function aY(a){return a.length}function aZ(a,b){return b.push(a),a}function a$(a,b){return a.filter(function(a){return!aT(a,b)})}var a_=1,a0=1,a1=0,a2=0,a3=0,a4="";function a5(a,b,c,d,e,f,g,h){return{value:a,root:b,parent:c,type:d,props:e,children:f,line:a_,column:a0,length:g,return:"",siblings:h}}function a6(a,b){return aS(a5("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},b)}function a7(a){for(;a.root;)a=a6(a.root,{children:[a]});aZ(a,a.siblings)}function a8(){return a3=a2<a1?aW(a4,a2++):0,a0++,10===a3&&(a0=1,a_++),a3}function a9(){return aW(a4,a2)}function ba(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bb(a){var b,c;return(b=a2-1,c=function a(b){for(;a8();)switch(a3){case b:return a2;case 34:case 39:34!==b&&39!==b&&a(a3);break;case 40:41===b&&a(b);break;case 92:a8()}return a2}(91===a?a+2:40===a?a+1:a),aX(a4,b,c)).trim()}function bc(a,b){for(var c="",d=0;d<a.length;d++)c+=b(a[d],d,a,b)||"";return c}function bd(a,b,c,d){switch(a.type){case"@layer":if(a.children.length)break;case"@import":case aO:return a.return=a.return||a.value;case aM:return"";case aP:return a.return=a.value+"{"+bc(a.children,d)+"}";case aN:if(!aY(a.value=a.props.join(",")))return""}return aY(c=bc(a.children,d))?a.return=a.value+"{"+c+"}":""}function be(a,b,c,d){if(a.length>-1&&!a.return)switch(a.type){case aO:a.return=function a(b,c,d){var e;switch(e=c,45^aW(b,0)?(((e<<2^aW(b,0))<<2^aW(b,1))<<2^aW(b,2))<<2^aW(b,3):0){case 5103:return aL+"print-"+b+b;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return aL+b+b;case 4789:return aK+b+b;case 5349:case 4246:case 4810:case 6968:case 2756:return aL+b+aK+b+aJ+b+b;case 5936:switch(aW(b,c+11)){case 114:return aL+b+aJ+aU(b,/[svh]\w+-[tblr]{2}/,"tb")+b;case 108:return aL+b+aJ+aU(b,/[svh]\w+-[tblr]{2}/,"tb-rl")+b;case 45:return aL+b+aJ+aU(b,/[svh]\w+-[tblr]{2}/,"lr")+b}case 6828:case 4268:case 2903:return aL+b+aJ+b+b;case 6165:return aL+b+aJ+"flex-"+b+b;case 5187:return aL+b+aU(b,/(\w+).+(:[^]+)/,aL+"box-$1$2"+aJ+"flex-$1$2")+b;case 5443:return aL+b+aJ+"flex-item-"+aU(b,/flex-|-self/g,"")+(aT(b,/flex-|baseline/)?"":aJ+"grid-row-"+aU(b,/flex-|-self/g,""))+b;case 4675:return aL+b+aJ+"flex-line-pack"+aU(b,/align-content|flex-|-self/g,"")+b;case 5548:return aL+b+aJ+aU(b,"shrink","negative")+b;case 5292:return aL+b+aJ+aU(b,"basis","preferred-size")+b;case 6060:return aL+"box-"+aU(b,"-grow","")+aL+b+aJ+aU(b,"grow","positive")+b;case 4554:return aL+aU(b,/([^-])(transform)/g,"$1"+aL+"$2")+b;case 6187:return aU(aU(aU(b,/(zoom-|grab)/,aL+"$1"),/(image-set)/,aL+"$1"),b,"")+b;case 5495:case 3959:return aU(b,/(image-set\([^]*)/,aL+"$1$`$1");case 4968:return aU(aU(b,/(.+:)(flex-)?(.*)/,aL+"box-pack:$3"+aJ+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+aL+b+b;case 4200:if(!aT(b,/flex-|baseline/))return aJ+"grid-column-align"+aX(b,c)+b;break;case 2592:case 3360:return aJ+aU(b,"template-","")+b;case 4384:case 3616:if(d&&d.some(function(a,b){return c=b,aT(a.props,/grid-\w+-end/)}))return~aV(b+(d=d[c].value),"span",0)?b:aJ+aU(b,"-start","")+b+aJ+"grid-row-span:"+(~aV(d,"span",0)?aT(d,/\d+/):aT(d,/\d+/)-aT(b,/\d+/))+";";return aJ+aU(b,"-start","")+b;case 4896:case 4128:return d&&d.some(function(a){return aT(a.props,/grid-\w+-start/)})?b:aJ+aU(aU(b,"-end","-span"),"span ","")+b;case 4095:case 3583:case 4068:case 2532:return aU(b,/(.+)-inline(.+)/,aL+"$1$2")+b;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(aY(b)-1-c>6)switch(aW(b,c+1)){case 109:if(45!==aW(b,c+4))break;case 102:return aU(b,/(.+:)(.+)-([^]+)/,"$1"+aL+"$2-$3$1"+aK+(108==aW(b,c+3)?"$3":"$2-$3"))+b;case 115:return~aV(b,"stretch",0)?a(aU(b,"stretch","fill-available"),c,d)+b:b}break;case 5152:case 5920:return aU(b,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,c,d,e,f,g,h){return aJ+c+":"+d+h+(e?aJ+c+"-span:"+(f?g:g-d)+h:"")+b});case 4949:if(121===aW(b,c+6))return aU(b,":",":"+aL)+b;break;case 6444:switch(aW(b,45===aW(b,14)?18:11)){case 120:return aU(b,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+aL+(45===aW(b,14)?"inline-":"")+"box$3$1"+aL+"$2$3$1"+aJ+"$2box$3")+b;case 100:return aU(b,":",":"+aJ)+b}break;case 5719:case 2647:case 2135:case 3927:case 2391:return aU(b,"scroll-","scroll-snap-")+b}return b}(a.value,a.length,c);return;case aP:return bc([a6(a,{value:aU(a.value,"@","@"+aL)})],d);case aN:if(a.length){var e,f;return e=c=a.props,f=function(b){switch(aT(b,d=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":a7(a6(a,{props:[aU(b,/:(read-\w+)/,":"+aK+"$1")]})),a7(a6(a,{props:[b]})),aS(a,{props:a$(c,d)});break;case"::placeholder":a7(a6(a,{props:[aU(b,/:(plac\w+)/,":"+aL+"input-$1")]})),a7(a6(a,{props:[aU(b,/:(plac\w+)/,":"+aK+"$1")]})),a7(a6(a,{props:[aU(b,/:(plac\w+)/,aJ+"input-$1")]})),a7(a6(a,{props:[b]})),aS(a,{props:a$(c,d)})}return""},e.map(f).join("")}}}function bf(a,b,c,d,e,f,g,h,i,j,k,l){for(var m=e-1,n=0===e?f:[""],o=n.length,p=0,q=0,r=0;p<d;++p)for(var s=0,t=aX(a,m+1,m=aQ(q=g[p])),u=a;s<o;++s)(u=(q>0?n[s]+" "+t:aU(t,/&\f/g,n[s])).trim())&&(i[r++]=u);return a5(a,b,c,0===e?aN:h,i,j,k,l)}function bg(a,b,c,d,e){return a5(a,b,c,aO,aX(a,0,d),aX(a,d+1,-1),d,e)}var bh={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bi="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",bj="active",bk="data-styled-version",bl="6.1.19",bm="/*!sc*/\n",bn="undefined"!=typeof window&&"undefined"!=typeof document,bo=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY),bp=Object.freeze([]),bq=Object.freeze({}),br=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),bs=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,bt=/(^-|-$)/g;function bu(a){return a.replace(bs,"-").replace(bt,"")}var bv=/(a)(d)/gi,bw=function(a){return String.fromCharCode(a+(a>25?39:97))};function bx(a){var b,c="";for(b=Math.abs(a);b>52;b=b/52|0)c=bw(b%52)+c;return(bw(b%52)+c).replace(bv,"$1-$2")}var by,bz=function(a,b){for(var c=b.length;c;)a=33*a^b.charCodeAt(--c);return a},bA=function(a){return bz(5381,a)};function bB(a){return"string"==typeof a}var bC="function"==typeof Symbol&&Symbol.for,bD=bC?Symbol.for("react.memo"):60115,bE=bC?Symbol.for("react.forward_ref"):60112,bF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},bG={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},bH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bI=((by={})[bE]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},by[bD]=bH,by);function bJ(a){return("type"in a&&a.type.$$typeof)===bD?bH:"$$typeof"in a?bI[a.$$typeof]:bF}var bK=Object.defineProperty,bL=Object.getOwnPropertyNames,bM=Object.getOwnPropertySymbols,bN=Object.getOwnPropertyDescriptor,bO=Object.getPrototypeOf,bP=Object.prototype;function bQ(a){return"function"==typeof a}function bR(a){return"object"==typeof a&&"styledComponentId"in a}function bS(a,b){return a&&b?"".concat(a," ").concat(b):a||b||""}function bT(a,b){if(0===a.length)return"";for(var c=a[0],d=1;d<a.length;d++)c+=b?b+a[d]:a[d];return c}function bU(a){return null!==a&&"object"==typeof a&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function bV(a,b){Object.defineProperty(a,"toString",{value:b})}function bW(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(b.length>0?" Args: ".concat(b.join(", ")):""))}var bX=function(){function a(a){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=a}return a.prototype.indexOfGroup=function(a){for(var b=0,c=0;c<a;c++)b+=this.groupSizes[c];return b},a.prototype.insertRules=function(a,b){if(a>=this.groupSizes.length){for(var c=this.groupSizes,d=c.length,e=d;a>=e;)if((e<<=1)<0)throw bW(16,"".concat(a));this.groupSizes=new Uint32Array(e),this.groupSizes.set(c),this.length=e;for(var f=d;f<e;f++)this.groupSizes[f]=0}for(var g=this.indexOfGroup(a+1),h=(f=0,b.length);f<h;f++)this.tag.insertRule(g,b[f])&&(this.groupSizes[a]++,g++)},a.prototype.clearGroup=function(a){if(a<this.length){var b=this.groupSizes[a],c=this.indexOfGroup(a),d=c+b;this.groupSizes[a]=0;for(var e=c;e<d;e++)this.tag.deleteRule(c)}},a.prototype.getGroup=function(a){var b="";if(a>=this.length||0===this.groupSizes[a])return b;for(var c=this.groupSizes[a],d=this.indexOfGroup(a),e=d+c,f=d;f<e;f++)b+="".concat(this.tag.getRule(f)).concat(bm);return b},a}(),bY=new Map,bZ=new Map,b$=1,b_=function(a){if(bY.has(a))return bY.get(a);for(;bZ.has(b$);)b$++;var b=b$++;return bY.set(a,b),bZ.set(b,a),b},b0=function(a,b){b$=b+1,bY.set(a,b),bZ.set(b,a)},b1="style[".concat(bi,"][").concat(bk,'="').concat(bl,'"]'),b2=new RegExp("^".concat(bi,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),b3=function(a,b,c){for(var d,e=c.split(","),f=0,g=e.length;f<g;f++)(d=e[f])&&a.registerName(b,d)},b4=function(a,b){for(var c,d=(null!=(c=b.textContent)?c:"").split(bm),e=[],f=0,g=d.length;f<g;f++){var h=d[f].trim();if(h){var i=h.match(b2);if(i){var j=0|parseInt(i[1],10),k=i[2];0!==j&&(b0(k,j),b3(a,k,i[3]),a.getTag().insertRules(j,e)),e.length=0}else e.push(h)}}},b5=function(a){for(var b=document.querySelectorAll(b1),c=0,d=b.length;c<d;c++){var e=b[c];e&&e.getAttribute(bi)!==bj&&(b4(a,e),e.parentNode&&e.parentNode.removeChild(e))}},b6=function(a){var b,d=document.head,e=a||d,f=document.createElement("style"),g=(b=Array.from(e.querySelectorAll("style[".concat(bi,"]"))))[b.length-1],h=void 0!==g?g.nextSibling:null;f.setAttribute(bi,bj),f.setAttribute(bk,bl);var i=c.nc;return i&&f.setAttribute("nonce",i),e.insertBefore(f,h),f},b7=function(){function a(a){this.element=b6(a),this.element.appendChild(document.createTextNode("")),this.sheet=function(a){if(a.sheet)return a.sheet;for(var b=document.styleSheets,c=0,d=b.length;c<d;c++){var e=b[c];if(e.ownerNode===a)return e}throw bW(17)}(this.element),this.length=0}return a.prototype.insertRule=function(a,b){try{return this.sheet.insertRule(b,a),this.length++,!0}catch(a){return!1}},a.prototype.deleteRule=function(a){this.sheet.deleteRule(a),this.length--},a.prototype.getRule=function(a){var b=this.sheet.cssRules[a];return b&&b.cssText?b.cssText:""},a}(),b8=function(){function a(a){this.element=b6(a),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(a,b){if(a<=this.length&&a>=0){var c=document.createTextNode(b);return this.element.insertBefore(c,this.nodes[a]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(a){this.element.removeChild(this.nodes[a]),this.length--},a.prototype.getRule=function(a){return a<this.length?this.nodes[a].textContent:""},a}(),b9=function(){function a(a){this.rules=[],this.length=0}return a.prototype.insertRule=function(a,b){return a<=this.length&&(this.rules.splice(a,0,b),this.length++,!0)},a.prototype.deleteRule=function(a){this.rules.splice(a,1),this.length--},a.prototype.getRule=function(a){return a<this.length?this.rules[a]:""},a}(),ca=bn,cb={isServer:!bn,useCSSOMInjection:!bo},cc=function(){function a(a,b,c){void 0===a&&(a=bq),void 0===b&&(b={});var d=this;this.options=aF(aF({},cb),a),this.gs=b,this.names=new Map(c),this.server=!!a.isServer,!this.server&&bn&&ca&&(ca=!1,b5(this)),bV(this,function(){for(var a=d.getTag(),b=a.length,c="",e=0;e<b;e++)!function(b){var e=bZ.get(b);if(void 0===e)return;var f=d.names.get(e),g=a.getGroup(b);if(void 0!==f&&f.size&&0!==g.length){var h="".concat(bi,".g").concat(b,'[id="').concat(e,'"]'),i="";void 0!==f&&f.forEach(function(a){a.length>0&&(i+="".concat(a,","))}),c+="".concat(g).concat(h,'{content:"').concat(i,'"}').concat(bm)}}(e);return c})}return a.registerId=function(a){return b_(a)},a.prototype.rehydrate=function(){!this.server&&bn&&b5(this)},a.prototype.reconstructWithOptions=function(b,c){return void 0===c&&(c=!0),new a(aF(aF({},this.options),b),this.gs,c&&this.names||void 0)},a.prototype.allocateGSInstance=function(a){return this.gs[a]=(this.gs[a]||0)+1},a.prototype.getTag=function(){var a,b,c;return this.tag||(this.tag=(b=(a=this.options).useCSSOMInjection,c=a.target,new bX(a.isServer?new b9(c):b?new b7(c):new b8(c))))},a.prototype.hasNameForId=function(a,b){return this.names.has(a)&&this.names.get(a).has(b)},a.prototype.registerName=function(a,b){if(b_(a),this.names.has(a))this.names.get(a).add(b);else{var c=new Set;c.add(b),this.names.set(a,c)}},a.prototype.insertRules=function(a,b,c){this.registerName(a,b),this.getTag().insertRules(b_(a),c)},a.prototype.clearNames=function(a){this.names.has(a)&&this.names.get(a).clear()},a.prototype.clearRules=function(a){this.getTag().clearGroup(b_(a)),this.clearNames(a)},a.prototype.clearTag=function(){this.tag=void 0},a}(),cd=/&/g,ce=/^\s*\/\/.*$/gm;function cf(a){var b,c,d,e=void 0===a?bq:a,f=e.options,g=void 0===f?bq:f,h=e.plugins,i=void 0===h?bp:h,j=function(a,d,e){return e.startsWith(c)&&e.endsWith(c)&&e.replaceAll(c,"").length>0?".".concat(b):a},k=i.slice();k.push(function(a){a.type===aN&&a.value.includes("&")&&(a.props[0]=a.props[0].replace(cd,c).replace(d,j))}),g.prefix&&k.push(be),k.push(bd);var l=function(a,e,f,h){void 0===e&&(e=""),void 0===f&&(f=""),void 0===h&&(h="&"),b=h,c=e,d=RegExp("\\".concat(c,"\\b"),"g");var i,j,l,m,n,o,p=a.replace(ce,""),q=(n=function a(b,c,d,e,f,g,h,i,j){for(var k,l,m,n,o=0,p=0,q=h,r=0,s=0,t=0,u=1,v=1,w=1,x=0,y="",z=f,A=g,B=e,C=y;v;)switch(t=x,x=a8()){case 40:if(108!=t&&58==aW(C,q-1)){-1!=aV(C+=aU(bb(x),"&","&\f"),"&\f",aQ(o?i[o-1]:0))&&(w=-1);break}case 34:case 39:case 91:C+=bb(x);break;case 9:case 10:case 13:case 32:C+=function(a){for(;a3=a9();)if(a3<33)a8();else break;return ba(a)>2||ba(a3)>3?"":" "}(t);break;case 92:C+=function(a,b){for(var c;--b&&a8()&&!(a3<48)&&!(a3>102)&&(!(a3>57)||!(a3<65))&&(!(a3>70)||!(a3<97)););return c=a2+(b<6&&32==a9()&&32==a8()),aX(a4,a,c)}(a2-1,7);continue;case 47:switch(a9()){case 42:case 47:aZ((k=function(a,b){for(;a8();)if(a+a3===57)break;else if(a+a3===84&&47===a9())break;return"/*"+aX(a4,b,a2-1)+"*"+aR(47===a?a:a8())}(a8(),a2),l=c,m=d,n=j,a5(k,l,m,aM,aR(a3),aX(k,2,-2),0,n)),j);break;default:C+="/"}break;case 123*u:i[o++]=aY(C)*w;case 125*u:case 59:case 0:switch(x){case 0:case 125:v=0;case 59+p:-1==w&&(C=aU(C,/\f/g,"")),s>0&&aY(C)-q&&aZ(s>32?bg(C+";",e,d,q-1,j):bg(aU(C," ","")+";",e,d,q-2,j),j);break;case 59:C+=";";default:if(aZ(B=bf(C,c,d,o,p,f,i,y,z=[],A=[],q,g),g),123===x)if(0===p)a(C,c,B,B,z,g,q,i,A);else switch(99===r&&110===aW(C,3)?100:r){case 100:case 108:case 109:case 115:a(b,B,B,e&&aZ(bf(b,B,B,0,0,f,i,y,f,z=[],q,A),A),f,A,q,i,e?z:A);break;default:a(C,B,B,B,[""],A,0,i,A)}}o=p=s=0,u=w=1,y=C="",q=h;break;case 58:q=1+aY(C),s=t;default:if(u<1){if(123==x)--u;else if(125==x&&0==u++&&125==(a3=a2>0?aW(a4,--a2):0,a0--,10===a3&&(a0=1,a_--),a3))continue}switch(C+=aR(x),x*u){case 38:w=p>0?1:(C+="\f",-1);break;case 44:i[o++]=(aY(C)-1)*w,w=1;break;case 64:45===a9()&&(C+=bb(a8())),r=a9(),p=q=aY(y=C+=function(a){for(;!ba(a9());)a8();return aX(a4,a,a2)}(a2)),x++;break;case 45:45===t&&2==aY(C)&&(u=0)}}return g}("",null,null,null,[""],(m=l=f||e?"".concat(f," ").concat(e," { ").concat(p," }"):p,a_=a0=1,a1=aY(a4=m),a2=0,l=[]),0,[0],l),a4="",n);g.namespace&&(q=function a(b,c){return b.map(function(b){return"rule"===b.type&&(b.value="".concat(c," ").concat(b.value),b.value=b.value.replaceAll(",",",".concat(c," ")),b.props=b.props.map(function(a){return"".concat(c," ").concat(a)})),Array.isArray(b.children)&&"@keyframes"!==b.type&&(b.children=a(b.children,c)),b})}(q,g.namespace));var r=[];return bc(q,(j=(i=k.concat((o=function(a){return r.push(a)},function(a){!a.root&&(a=a.return)&&o(a)}))).length,function(a,b,c,d){for(var e="",f=0;f<j;f++)e+=i[f](a,b,c,d)||"";return e})),r};return l.hash=i.length?i.reduce(function(a,b){return b.name||bW(15),bz(a,b.name)},5381).toString():"",l}var cg=new cc,ch=cf(),ci=aj().createContext({shouldForwardProp:void 0,styleSheet:cg,stylis:ch}),cj=(ci.Consumer,aj().createContext(void 0));function ck(){return(0,ai.useContext)(ci)}function cl(a){var b=(0,ai.useState)(a.stylisPlugins),c=b[0],d=b[1],e=ck().styleSheet,f=(0,ai.useMemo)(function(){var b=e;return a.sheet?b=a.sheet:a.target&&(b=b.reconstructWithOptions({target:a.target},!1)),a.disableCSSOMInjection&&(b=b.reconstructWithOptions({useCSSOMInjection:!1})),b},[a.disableCSSOMInjection,a.sheet,a.target,e]),g=(0,ai.useMemo)(function(){return cf({options:{namespace:a.namespace,prefix:a.enableVendorPrefixes},plugins:c})},[a.enableVendorPrefixes,a.namespace,c]);(0,ai.useEffect)(function(){aI()(c,a.stylisPlugins)||d(a.stylisPlugins)},[a.stylisPlugins]);var h=(0,ai.useMemo)(function(){return{shouldForwardProp:a.shouldForwardProp,styleSheet:f,stylis:g}},[a.shouldForwardProp,f,g]);return aj().createElement(ci.Provider,{value:h},aj().createElement(cj.Provider,{value:g},a.children))}var cm=function(){function a(a,b){var c=this;this.inject=function(a,b){void 0===b&&(b=ch);var d=c.name+b.hash;a.hasNameForId(c.id,d)||a.insertRules(c.id,d,b(c.rules,d,"@keyframes"))},this.name=a,this.id="sc-keyframes-".concat(a),this.rules=b,bV(this,function(){throw bW(12,String(c.name))})}return a.prototype.getName=function(a){return void 0===a&&(a=ch),this.name+a.hash},a}();function cn(a){for(var b="",c=0;c<a.length;c++){var d=a[c];if(1===c&&"-"===d&&"-"===a[0])return a;d>="A"&&d<="Z"?b+="-"+d.toLowerCase():b+=d}return b.startsWith("ms-")?"-"+b:b}var co=function(a){return null==a||!1===a||""===a},cp=function(a){var b=[];for(var c in a){var d=a[c];a.hasOwnProperty(c)&&!co(d)&&(Array.isArray(d)&&d.isCss||bQ(d)?b.push("".concat(cn(c),":"),d,";"):bU(d)?b.push.apply(b,aG(aG(["".concat(c," {")],cp(d),!1),["}"],!1)):b.push("".concat(cn(c),": ").concat(null==d||"boolean"==typeof d||""===d?"":"number"!=typeof d||0===d||c in bh||c.startsWith("--")?String(d).trim():"".concat(d,"px"),";")))}return b};function cq(a,b,c,d){if(co(a))return[];if(bR(a))return[".".concat(a.styledComponentId)];if(bQ(a))return!bQ(a)||a.prototype&&a.prototype.isReactComponent||!b?[a]:cq(a(b),b,c,d);return a instanceof cm?c?(a.inject(c,d),[a.getName(d)]):[a]:bU(a)?cp(a):Array.isArray(a)?Array.prototype.concat.apply(bp,a.map(function(a){return cq(a,b,c,d)})):[a.toString()]}function cr(a){for(var b=0;b<a.length;b+=1){var c=a[b];if(bQ(c)&&!bR(c))return!1}return!0}var cs=bA(bl),ct=function(){function a(a,b,c){this.rules=a,this.staticRulesId="",this.isStatic=(void 0===c||c.isStatic)&&cr(a),this.componentId=b,this.baseHash=bz(cs,b),this.baseStyle=c,cc.registerId(b)}return a.prototype.generateAndInjectStyles=function(a,b,c){var d=this.baseStyle?this.baseStyle.generateAndInjectStyles(a,b,c):"";if(this.isStatic&&!c.hash)if(this.staticRulesId&&b.hasNameForId(this.componentId,this.staticRulesId))d=bS(d,this.staticRulesId);else{var e=bT(cq(this.rules,a,b,c)),f=bx(bz(this.baseHash,e)>>>0);if(!b.hasNameForId(this.componentId,f)){var g=c(e,".".concat(f),void 0,this.componentId);b.insertRules(this.componentId,f,g)}d=bS(d,f),this.staticRulesId=f}else{for(var h=bz(this.baseHash,c.hash),i="",j=0;j<this.rules.length;j++){var k=this.rules[j];if("string"==typeof k)i+=k;else if(k){var l=bT(cq(k,a,b,c));h=bz(h,l+j),i+=l}}if(i){var m=bx(h>>>0);b.hasNameForId(this.componentId,m)||b.insertRules(this.componentId,m,c(i,".".concat(m),void 0,this.componentId)),d=bS(d,m)}}return d},a}(),cu=aj().createContext(void 0);cu.Consumer;var cv={};function cw(a,b,c){var d,e,f,g,h=bR(a),i=!bB(a),j=b.attrs,k=void 0===j?bp:j,l=b.componentId,m=void 0===l?(d=b.displayName,e=b.parentComponentId,cv[f="string"!=typeof d?"sc":bu(d)]=(cv[f]||0)+1,g="".concat(f,"-").concat(bx(bA(bl+f+cv[f])>>>0)),e?"".concat(e,"-").concat(g):g):l,n=b.displayName,o=void 0===n?bB(a)?"styled.".concat(a):"Styled(".concat(a.displayName||a.name||"Component",")"):n,p=b.displayName&&b.componentId?"".concat(bu(b.displayName),"-").concat(b.componentId):b.componentId||m,q=h&&a.attrs?a.attrs.concat(k).filter(Boolean):k,r=b.shouldForwardProp;if(h&&a.shouldForwardProp){var s=a.shouldForwardProp;if(b.shouldForwardProp){var t=b.shouldForwardProp;r=function(a,b){return s(a,b)&&t(a,b)}}else r=s}var u=new ct(c,p,h?a.componentStyle:void 0);function v(a,b){return function(a,b,c){var d,e,f=a.attrs,g=a.componentStyle,h=a.defaultProps,i=a.foldedComponentIds,j=a.styledComponentId,k=a.target,l=aj().useContext(cu),m=ck(),n=a.shouldForwardProp||m.shouldForwardProp,o=(void 0===(d=h)&&(d=bq),b.theme!==d.theme&&b.theme||l||d.theme||bq),p=function(a,b,c){for(var d,e=aF(aF({},b),{className:void 0,theme:c}),f=0;f<a.length;f+=1){var g=bQ(d=a[f])?d(e):d;for(var h in g)e[h]="className"===h?bS(e[h],g[h]):"style"===h?aF(aF({},e[h]),g[h]):g[h]}return b.className&&(e.className=bS(e.className,b.className)),e}(f,b,o),q=p.as||k,r={};for(var s in p)void 0===p[s]||"$"===s[0]||"as"===s||"theme"===s&&p.theme===o||("forwardedAs"===s?r.as=p.forwardedAs:n&&!n(s,q)||(r[s]=p[s]));var t=(e=ck(),g.generateAndInjectStyles(p,e.styleSheet,e.stylis)),u=bS(i,j);return t&&(u+=" "+t),p.className&&(u+=" "+p.className),r[bB(q)&&!br.has(q)?"class":"className"]=u,c&&(r.ref=c),(0,ai.createElement)(q,r)}(w,a,b)}v.displayName=o;var w=aj().forwardRef(v);return w.attrs=q,w.componentStyle=u,w.displayName=o,w.shouldForwardProp=r,w.foldedComponentIds=h?bS(a.foldedComponentIds,a.styledComponentId):"",w.styledComponentId=p,w.target=h?a.target:a,Object.defineProperty(w,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(b){this._foldedDefaultProps=h?function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=0;d<b.length;d++)!function a(b,c,d){if(void 0===d&&(d=!1),!d&&!bU(b)&&!Array.isArray(b))return c;if(Array.isArray(c))for(var e=0;e<c.length;e++)b[e]=a(b[e],c[e]);else if(bU(c))for(var e in c)b[e]=a(b[e],c[e]);return b}(a,b[d],!0);return a}({},a.defaultProps,b):b}}),bV(w,function(){return".".concat(w.styledComponentId)}),i&&function a(b,c,d){if("string"!=typeof c){if(bP){var e=bO(c);e&&e!==bP&&a(b,e,d)}var f=bL(c);bM&&(f=f.concat(bM(c)));for(var g=bJ(b),h=bJ(c),i=0;i<f.length;++i){var j=f[i];if(!(j in bG||d&&d[j]||h&&j in h||g&&j in g)){var k=bN(c,j);try{bK(b,j,k)}catch(a){}}}}return b}(w,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),w}function cx(a,b){for(var c=[a[0]],d=0,e=b.length;d<e;d+=1)c.push(b[d],a[d+1]);return c}var cy=function(a){return Object.assign(a,{isCss:!0})};function cz(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return bQ(a)||bU(a)?cy(cq(cx(bp,aG([a],b,!0)))):0===b.length&&1===a.length&&"string"==typeof a[0]?cq(a):cy(cq(cx(a,b)))}var cA=function(a){return function a(b,c,d){if(void 0===d&&(d=bq),!c)throw bW(1,c);var e=function(a){for(var e=[],f=1;f<arguments.length;f++)e[f-1]=arguments[f];return b(c,d,cz.apply(void 0,aG([a],e,!1)))};return e.attrs=function(e){return a(b,c,aF(aF({},d),{attrs:Array.prototype.concat(d.attrs,e).filter(Boolean)}))},e.withConfig=function(e){return a(b,c,aF(aF({},d),e))},e}(cw,a)};br.forEach(function(a){cA[a]=cA(a)}),function(){function a(a,b){this.rules=a,this.componentId=b,this.isStatic=cr(a),cc.registerId(this.componentId+1)}a.prototype.createStyles=function(a,b,c,d){var e=d(bT(cq(this.rules,b,c,d)),""),f=this.componentId+a;c.insertRules(f,f,e)},a.prototype.removeStyles=function(a,b){b.clearRules(this.componentId+a)},a.prototype.renderStyles=function(a,b,c,d){a>2&&cc.registerId(this.componentId+a),this.removeStyles(a,c),this.createStyles(a,b,c,d)}}();var cB=/^\s*<\/[a-z]/i;!function(){function a(){var a=this;this._emitSheetCSS=function(){var b=a.instance.toString();if(!b)return"";var d=c.nc,e=bT([d&&'nonce="'.concat(d,'"'),"".concat(bi,'="true"'),"".concat(bk,'="').concat(bl,'"')].filter(Boolean)," ");return"<style ".concat(e,">").concat(b,"</style>")},this.getStyleTags=function(){if(a.sealed)throw bW(2);return a._emitSheetCSS()},this.getStyleElement=function(){if(a.sealed)throw bW(2);var b,d=a.instance.toString();if(!d)return[];var e=((b={})[bi]="",b[bk]=bl,b.dangerouslySetInnerHTML={__html:d},b),f=c.nc;return f&&(e.nonce=f),[aj().createElement("style",aF({},e,{key:"sc-0-0"}))]},this.seal=function(){a.sealed=!0},this.instance=new cc({isServer:!0}),this.sealed=!1}a.prototype.collectStyles=function(a){if(this.sealed)throw bW(2);return aj().createElement(cl,{sheet:this.instance},a)},a.prototype.interleaveWithNodeStream=function(a){if(bn)throw bW(3);if(this.sealed)throw bW(2);this.seal();var b=c(27910).Transform,d=this.instance,e=this._emitSheetCSS,f=new b({transform:function(a,b,c){var f=a.toString(),g=e();if(d.clearTag(),cB.test(f)){var h=f.indexOf(">")+1,i=f.slice(0,h),j=f.slice(h);this.push(i+g+j)}else this.push(g+f);c()}});return a.on("error",function(a){f.emit("error",a)}),a.pipe(f)}}();let cC=cA.div`
  position: relative;
  width: 100%;
  min-height: 20vh;
  display: flex;
  align-items: center;
  justify-content: center;

  @keyframes dropAndShift {
    0% {
      transform: translate(0px, 15px);
    }
    16.67% {
      transform: translate(80px, 13px);
    }
    33.34% {
      transform: translate(40px, 10px);
    }
    50.01% {
      transform: translate(40px, -30px);
    }
    66.68% {
      transform: translate(40px, 55px);
    }
    83.35% {
      transform: translate(40px, 10px);
    }
    100% {
      transform: translate(0px, 15px);
    }
  }
  @keyframes bubbleGlint {
    0% {
      top: 3px;
      left: 4px;
      opacity: 0;
    }
    8.335% {
      top: 6px;
      left: 6px;
      opacity: 0.5;
    }
    16.67% {
      top: 3px;
      left: 4px;
      opacity: 0;
    }
    33.34% {
      top: 3px;
      left: 4px;
      opacity: 0.5;
    }
    50.01% {
      top: 3px;
      left: 4px;
      opacity: 0;
    }
    58.345% {
      top: 6px;
      left: 6px;
      opacity: 0.5;
    }
    66.68% {
      top: 3px;
      left: 4px;
      opacity: 0;
    }
    83.35% {
      top: 6px;
      left: 6px;
      opacity: 0.5;
    }
    100% {
      top: 3px;
      left: 4px;
      opacity: 0;
    }
  }

  .Strich1 {
    position: absolute;
    width: 130px;
    height: 50px;
    background: #000;
    border-radius: 25px;
    transform: rotate(45deg);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    z-index: 0;
  }
  .Strich2 {
    position: absolute;
    width: 130px;
    height: 50px;
    background: #000;
    border-radius: 25px;
    transform: rotate(-90deg);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    z-index: 0;
  }

  .bubble {
    position: absolute;
    top: 0;
    left: 15px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #ffb3c1, #e64980, #ff8787);
    animation: dropAndShift 5s ease-in-out infinite;
    z-index: 1;
  }

  .bubble1 {
    position: absolute;
    top: 0;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 30% 30%, #edb3ff, #ac49e6, #fb87ff);
    border-radius: 50%;
    left: 8px;
    animation: dropAndShift 6s ease-in-out infinite;
    z-index: 2;
  }
  .bubble2 {
    position: absolute;
    top: 0;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 30% 30%, #b3d8ff, #4963e6, #87a7ff);
    border-radius: 50%;
    left: 12px;
    animation: dropAndShift 4s ease-in-out infinite;
    z-index: 3;
  }
  .bubble3 {
    position: absolute;
    top: 0;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 30% 30%, #b3ffbc, #35a32f, #75ba61);
    border-radius: 50%;
    left: 10px;
    animation: dropAndShift 7s ease-in-out infinite;
    z-index: 4;
  }

  .bubble4 {
    position: absolute;
    top: 0;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at 30% 30%, #fff3b3, #e6c049, #ffe787);
    border-radius: 50%;
    left: 18px;
    animation: dropAndShift 5.5s ease-in-out infinite;
    z-index: 5;
  }
`,cD=()=>(0,ah.jsxs)(ah.Fragment,{children:[(0,ah.jsx)(cC,{children:(0,ah.jsx)("div",{className:"Strich1",children:(0,ah.jsxs)("div",{className:"Strich2",children:[(0,ah.jsx)("div",{className:"bubble"}),(0,ah.jsx)("div",{className:"bubble1"}),(0,ah.jsx)("div",{className:"bubble2"}),(0,ah.jsx)("div",{className:"bubble3"}),(0,ah.jsx)("div",{className:"bubble4"})]})})}),(0,ah.jsx)("div",{className:"text-center mt-4 text-gray-500",children:"Loading..."})]}),cE=as("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),cF=as("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var cG=c(7423),cH=c(29021);let cI=require("fs/promises");var cJ=c(57075);let cK=require("node:stream/promises");c(7363),c(26802),c(92910);var cL=c(77740);c(35366);var cM=c(33873);class cN{}function cO(a,b){return a.replace(/\{([^}]+)\}/g,(a,c)=>{if(Object.prototype.hasOwnProperty.call(b,c)){let a=b[c];return null!=a?String(a):""}throw Error(`Key '${c}' not found in valueMap.`)})}function cP(a,b,c){for(let d=0;d<b.length-1;d++){let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))if(Array.isArray(c))a[f]=Array.from({length:c.length},()=>({}));else throw Error(`Value must be a list given an array path ${e}`);if(Array.isArray(a[f])){let e=a[f];if(Array.isArray(c))for(let a=0;a<e.length;a++)cP(e[a],b.slice(d+1),c[a]);else for(let a of e)cP(a,b.slice(d+1),c)}return}if(e.endsWith("[0]")){let f=e.slice(0,-3);f in a||(a[f]=[{}]),cP(a[f][0],b.slice(d+1),c);return}a[e]&&"object"==typeof a[e]||(a[e]={}),a=a[e]}let d=b[b.length-1],e=a[d];if(void 0!==e){if(!c||"object"==typeof c&&0===Object.keys(c).length||c===e)return;if("object"==typeof e&&"object"==typeof c&&null!==e&&null!==c)Object.assign(e,c);else throw Error(`Cannot set value for an existing key. Key: ${d}`)}else"_self"!==d||"object"!=typeof c||null===c||Array.isArray(c)?a[d]=c:Object.assign(a,c)}function cQ(a,b,c){try{if(1===b.length&&"_self"===b[0])return a;for(let d=0;d<b.length;d++){if("object"!=typeof a||null===a)return c;let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))return c;{let e=a[f];if(!Array.isArray(e))return c;return e.map(a=>cQ(a,b.slice(d+1),c))}}a=a[e]}return a}catch(a){if(a instanceof TypeError)return c;throw a}}function cR(a){if("string"!=typeof a)throw Error("fromImageBytes must be a string");return a}function cS(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["metadata"]);null!=d&&cP(b,["metadata"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);null!=f&&cP(b,["error"],f);let g=cQ(a,["response"]);return null!=g&&cP(b,["response"],function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["parent"]);null!=d&&cP(b,["parent"],d);let e=cQ(a,["documentName"]);return null!=e&&cP(b,["documentName"],e),b}(g)),b}!function(a){a.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",a.OUTCOME_OK="OUTCOME_OK",a.OUTCOME_FAILED="OUTCOME_FAILED",a.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(f||(f={})),function(a){a.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",a.PYTHON="PYTHON"}(g||(g={})),function(a){a.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",a.SILENT="SILENT",a.WHEN_IDLE="WHEN_IDLE",a.INTERRUPT="INTERRUPT"}(h||(h={})),function(a){a.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",a.STRING="STRING",a.NUMBER="NUMBER",a.INTEGER="INTEGER",a.BOOLEAN="BOOLEAN",a.ARRAY="ARRAY",a.OBJECT="OBJECT",a.NULL="NULL"}(i||(i={})),function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"}(j||(j={})),function(a){a.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",a.SIMPLE_SEARCH="SIMPLE_SEARCH",a.ELASTIC_SEARCH="ELASTIC_SEARCH"}(k||(k={})),function(a){a.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",a.NO_AUTH="NO_AUTH",a.API_KEY_AUTH="API_KEY_AUTH",a.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",a.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",a.OAUTH="OAUTH",a.OIDC_AUTH="OIDC_AUTH"}(l||(l={})),function(a){a.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",a.HTTP_IN_QUERY="HTTP_IN_QUERY",a.HTTP_IN_HEADER="HTTP_IN_HEADER",a.HTTP_IN_PATH="HTTP_IN_PATH",a.HTTP_IN_BODY="HTTP_IN_BODY",a.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(m||(m={})),function(a){a.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",a.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",a.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",a.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(n||(n={})),function(a){a.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",a.LOW="LOW",a.HIGH="HIGH"}(o||(o={})),function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",a.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",a.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",a.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",a.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(p||(p={})),function(a){a.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",a.SEVERITY="SEVERITY",a.PROBABILITY="PROBABILITY"}(q||(q={})),function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE",a.OFF="OFF"}(r||(r={})),function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.IMAGE_SAFETY="IMAGE_SAFETY",a.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",a.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",a.NO_IMAGE="NO_IMAGE"}(s||(s={})),function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"}(t||(t={})),function(a){a.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",a.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",a.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",a.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",a.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(u||(u={})),function(a){a.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",a.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",a.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",a.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",a.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(v||(v={})),function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.IMAGE_SAFETY="IMAGE_SAFETY",a.MODEL_ARMOR="MODEL_ARMOR",a.JAILBREAK="JAILBREAK"}(w||(w={})),function(a){a.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",a.ON_DEMAND="ON_DEMAND",a.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(x||(x={})),function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.AUDIO="AUDIO"}(y||(y={})),function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(z||(z={})),function(a){a.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",a.TUNING_MODE_FULL="TUNING_MODE_FULL",a.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(A||(A={})),function(a){a.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",a.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",a.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",a.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",a.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",a.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",a.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(B||(B={})),function(a){a.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",a.JOB_STATE_QUEUED="JOB_STATE_QUEUED",a.JOB_STATE_PENDING="JOB_STATE_PENDING",a.JOB_STATE_RUNNING="JOB_STATE_RUNNING",a.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",a.JOB_STATE_FAILED="JOB_STATE_FAILED",a.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",a.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",a.JOB_STATE_PAUSED="JOB_STATE_PAUSED",a.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",a.JOB_STATE_UPDATING="JOB_STATE_UPDATING",a.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(C||(C={})),function(a){a.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",a.TUNING_TASK_I2V="TUNING_TASK_I2V",a.TUNING_TASK_T2V="TUNING_TASK_T2V",a.TUNING_TASK_R2V="TUNING_TASK_R2V"}(D||(D={})),function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(E||(E={})),function(a){a.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",a.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",a.BALANCED="BALANCED",a.PRIORITIZE_COST="PRIORITIZE_COST"}(F||(F={})),function(a){a.UNSPECIFIED="UNSPECIFIED",a.BLOCKING="BLOCKING",a.NON_BLOCKING="NON_BLOCKING"}(G||(G={})),function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"}(H||(H={})),function(a){a.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",a.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}(I||(I={})),function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE",a.VALIDATED="VALIDATED"}(J||(J={})),function(a){a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"}(K||(K={})),function(a){a.DONT_ALLOW="DONT_ALLOW",a.ALLOW_ADULT="ALLOW_ADULT",a.ALLOW_ALL="ALLOW_ALL"}(L||(L={})),function(a){a.auto="auto",a.en="en",a.ja="ja",a.ko="ko",a.hi="hi",a.zh="zh",a.pt="pt",a.es="es"}(M||(M={})),function(a){a.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",a.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",a.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",a.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",a.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(N||(N={})),function(a){a.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",a.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",a.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",a.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(O||(O={})),function(a){a.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",a.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",a.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",a.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(P||(P={})),function(a){a.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",a.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",a.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",a.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",a.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",a.EDIT_MODE_STYLE="EDIT_MODE_STYLE",a.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",a.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(Q||(Q={})),function(a){a.FOREGROUND="FOREGROUND",a.BACKGROUND="BACKGROUND",a.PROMPT="PROMPT",a.SEMANTIC="SEMANTIC",a.INTERACTIVE="INTERACTIVE"}(R||(R={})),function(a){a.ASSET="ASSET",a.STYLE="STYLE"}(S||(S={})),function(a){a.INSERT="INSERT",a.REMOVE="REMOVE",a.REMOVE_STATIC="REMOVE_STATIC",a.OUTPAINT="OUTPAINT"}(T||(T={})),function(a){a.OPTIMIZED="OPTIMIZED",a.LOSSLESS="LOSSLESS"}(U||(U={})),function(a){a.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",a.PREFERENCE_TUNING="PREFERENCE_TUNING"}(V||(V={})),function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.STATE_PENDING="STATE_PENDING",a.STATE_ACTIVE="STATE_ACTIVE",a.STATE_FAILED="STATE_FAILED"}(W||(W={})),function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.PROCESSING="PROCESSING",a.ACTIVE="ACTIVE",a.FAILED="FAILED"}(X||(X={})),function(a){a.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",a.UPLOADED="UPLOADED",a.GENERATED="GENERATED"}(Y||(Y={})),function(a){a.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.RESPONSE_REJECTED="RESPONSE_REJECTED",a.NEED_MORE_INPUT="NEED_MORE_INPUT"}(Z||(Z={})),function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.VIDEO="VIDEO",a.AUDIO="AUDIO",a.DOCUMENT="DOCUMENT"}($||($={})),function(a){a.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",a.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",a.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(_||(_={})),function(a){a.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",a.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",a.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(aa||(aa={})),function(a){a.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",a.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",a.NO_INTERRUPTION="NO_INTERRUPTION"}(ab||(ab={})),function(a){a.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",a.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",a.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(ac||(ac={})),function(a){a.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",a.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",a.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",a.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",a.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",a.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",a.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",a.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",a.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",a.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",a.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",a.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",a.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(ad||(ad={})),function(a){a.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",a.QUALITY="QUALITY",a.DIVERSITY="DIVERSITY",a.VOCALIZATION="VOCALIZATION"}(ae||(ae={})),function(a){a.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",a.PLAY="PLAY",a.PAUSE="PAUSE",a.STOP="STOP",a.RESET_CONTEXT="RESET_CONTEXT"}(af||(af={}));class cT{constructor(a){let b={};for(let c of a.headers.entries())b[c[0]]=c[1];this.headers=b,this.responseInternal=a}json(){return this.responseInternal.json()}}class cU{get text(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let i="",j=!1,k=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"text"!==b&&"thought"!==b&&"thoughtSignature"!==b&&(null!==c||void 0!==c)&&k.push(b);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;j=!0,i+=a.text}}return k.length>0&&console.warn(`there are non-text parts ${k} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),j?i:void 0}get data(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let i="",j=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"inlineData"!==b&&(null!==c||void 0!==c)&&j.push(b);a.inlineData&&"string"==typeof a.inlineData.data&&(i+=atob(a.inlineData.data))}return j.length>0&&console.warn(`there are non-data parts ${j} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}get functionCalls(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let i=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.functionCall).map(a=>a.functionCall).filter(a=>void 0!==a);if((null==i?void 0:i.length)!==0)return i}get executableCode(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.executableCode).map(a=>a.executableCode).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.code}get codeExecutionResult(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.codeExecutionResult).map(a=>a.codeExecutionResult).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.output}}class cV{}class cW{}class cX{}class cY{}class cZ{}class c${}class c_{}class c0{}class c1{}class c2{}class c3{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new c3;return Object.assign(c,b?function(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["metadata"]);null!=d&&cP(b,["metadata"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);null!=f&&cP(b,["error"],f);let g=cQ(a,["response"]);return null!=g&&cP(b,["response"],function(a){let b={},c=cQ(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["_self"]);return null!=c&&cP(b,["video"],function(a){let b={},c=cQ(a,["gcsUri"]);null!=c&&cP(b,["uri"],c);let d=cQ(a,["bytesBase64Encoded"]);null!=d&&cP(b,["videoBytes"],cR(d));let e=cQ(a,["mimeType"]);return null!=e&&cP(b,["mimeType"],e),b}(c)),b})(a))),cP(b,["generatedVideos"],a)}let d=cQ(a,["raiMediaFilteredCount"]);null!=d&&cP(b,["raiMediaFilteredCount"],d);let e=cQ(a,["raiMediaFilteredReasons"]);return null!=e&&cP(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a):function(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["metadata"]);null!=d&&cP(b,["metadata"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);null!=f&&cP(b,["error"],f);let g=cQ(a,["response","generateVideoResponse"]);return null!=g&&cP(b,["response"],function(a){let b={},c=cQ(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["video"]);return null!=c&&cP(b,["video"],function(a){let b={},c=cQ(a,["uri"]);null!=c&&cP(b,["uri"],c);let d=cQ(a,["encodedVideo"]);null!=d&&cP(b,["videoBytes"],cR(d));let e=cQ(a,["encoding"]);return null!=e&&cP(b,["mimeType"],e),b}(c)),b})(a))),cP(b,["generatedVideos"],a)}let d=cQ(a,["raiMediaFilteredCount"]);null!=d&&cP(b,["raiMediaFilteredCount"],d);let e=cQ(a,["raiMediaFilteredReasons"]);return null!=e&&cP(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a)),c}}class c4{}class c5{}class c6{}class c7{}class c8{}class c9{}class da{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new da;return Object.assign(c,function(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["metadata"]);null!=d&&cP(b,["metadata"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);null!=f&&cP(b,["error"],f);let g=cQ(a,["response"]);return null!=g&&cP(b,["response"],function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["parent"]);null!=d&&cP(b,["parent"],d);let e=cQ(a,["documentName"]);return null!=e&&cP(b,["documentName"],e),b}(g)),b}(a)),c}}class db{}class dc{}class dd{}class de{}class df{get text(){var a,b,c;let d="",e=!1,f=[];for(let g of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(g))"text"!==a&&"thought"!==a&&null!==b&&f.push(a);if("string"==typeof g.text){if("boolean"==typeof g.thought&&g.thought)continue;e=!0,d+=g.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),e?d:void 0}get data(){var a,b,c;let d="",e=[];for(let f of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(f))"inlineData"!==a&&null!==b&&e.push(a);f.inlineData&&"string"==typeof f.inlineData.data&&(d+=atob(f.inlineData.data))}return e.length>0&&console.warn(`there are non-data parts ${e} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}}class dg{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class dh{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new dh;return Object.assign(c,cS(a)),c}}function di(a,b){if(!b||"string"!=typeof b)throw Error("model is required and must be a string");if(b.includes("..")||b.includes("?")||b.includes("&"))throw Error("invalid model parameter");if(a.isVertexAI())if(b.startsWith("publishers/")||b.startsWith("projects/")||b.startsWith("models/"))return b;else{if(!(b.indexOf("/")>=0))return`publishers/google/models/${b}`;let a=b.split("/",2);return`publishers/${a[0]}/models/${a[1]}`}return b.startsWith("models/")||b.startsWith("tunedModels/")?b:`models/${b}`}function dj(a,b){let c=di(a,b);return c?c.startsWith("publishers/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/${c}`:c.startsWith("models/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/publishers/google/${c}`:c:""}function dk(a){return Array.isArray(a)?a.map(a=>dl(a)):[dl(a)]}function dl(a){if("object"==typeof a&&null!==a)return a;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof a}`)}function dm(a){let b=dl(a);if(b.mimeType&&b.mimeType.startsWith("image/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function dn(a){let b=dl(a);if(b.mimeType&&b.mimeType.startsWith("audio/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function dp(a){if(null==a)throw Error("PartUnion is required");if("object"==typeof a)return a;if("string"==typeof a)return{text:a};throw Error(`Unsupported part type: ${typeof a}`)}function dq(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("PartListUnion is required");return Array.isArray(a)?a.map(a=>dp(a)):[dp(a)]}function dr(a){return null!=a&&"object"==typeof a&&"parts"in a&&Array.isArray(a.parts)}function ds(a){return null!=a&&"object"==typeof a&&"functionCall"in a}function dt(a){return null!=a&&"object"==typeof a&&"functionResponse"in a}function du(a){if(null==a)throw Error("ContentUnion is required");return dr(a)?a:{role:"user",parts:dq(a)}}function dv(a,b){if(!b)return[];if(a.isVertexAI()&&Array.isArray(b))return b.flatMap(a=>{let b=du(a);return b.parts&&b.parts.length>0&&void 0!==b.parts[0].text?[b.parts[0].text]:[]});if(a.isVertexAI()){let a=du(b);return a.parts&&a.parts.length>0&&void 0!==a.parts[0].text?[a.parts[0].text]:[]}return Array.isArray(b)?b.map(a=>du(a)):[du(b)]}function dw(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("contents are required");if(!Array.isArray(a)){if(ds(a)||dt(a))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[du(a)]}let b=[],c=[],d=dr(a[0]);for(let e of a){let a=dr(e);if(a!=d)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)b.push(e);else if(ds(e)||dt(e))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else c.push(e)}return d||b.push({role:"user",parts:dq(c)}),b}function dx(a){let b={},c=["items"],d=["anyOf"],e=["properties"];if(a.type&&a.anyOf)throw Error("type and anyOf cannot be both populated.");let f=a.anyOf;for(let[g,h]of(null!=f&&2==f.length&&("null"===f[0].type?(b.nullable=!0,a=f[1]):"null"===f[1].type&&(b.nullable=!0,a=f[0])),a.type instanceof Array&&function(a,b){a.includes("null")&&(b.nullable=!0);let c=a.filter(a=>"null"!==a);if(1===c.length)b.type=Object.values(i).includes(c[0].toUpperCase())?c[0].toUpperCase():i.TYPE_UNSPECIFIED;else for(let a of(b.anyOf=[],c))b.anyOf.push({type:Object.values(i).includes(a.toUpperCase())?a.toUpperCase():i.TYPE_UNSPECIFIED})}(a.type,b),Object.entries(a)))if(null!=h)if("type"==g){if("null"===h)throw Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;b.type=Object.values(i).includes(h.toUpperCase())?h.toUpperCase():i.TYPE_UNSPECIFIED}else if(c.includes(g))b[g]=dx(h);else if(d.includes(g)){let a=[];for(let c of h){if("null"==c.type){b.nullable=!0;continue}a.push(dx(c))}b[g]=a}else if(e.includes(g)){let a={};for(let[b,c]of Object.entries(h))a[b]=dx(c);b[g]=a}else{if("additionalProperties"===g)continue;b[g]=h}return b}function dy(a){if("object"==typeof a)return a;if("string"==typeof a)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:a}}};throw Error(`Unsupported speechConfig type: ${typeof a}`)}function dz(a){if("multiSpeakerVoiceConfig"in a)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return a}function dA(a){if(a.functionDeclarations)for(let b of a.functionDeclarations)b.parameters&&(Object.keys(b.parameters).includes("$schema")?b.parametersJsonSchema||(b.parametersJsonSchema=b.parameters,delete b.parameters):b.parameters=dx(b.parameters)),b.response&&(Object.keys(b.response).includes("$schema")?b.responseJsonSchema||(b.responseJsonSchema=b.response,delete b.response):b.response=dx(b.response));return a}function dB(a){if(null==a)throw Error("tools is required");if(!Array.isArray(a))throw Error("tools is required and must be an array of Tools");let b=[];for(let c of a)b.push(c);return b}function dC(a,b){if("string"!=typeof b)throw Error("name must be a string");return function(a,b,c,d=1){let e=!b.startsWith(`${c}/`)&&b.split("/").length===d;if(a.isVertexAI())if(b.startsWith("projects/"))return b;else if(b.startsWith("locations/"))return`projects/${a.getProject()}/${b}`;else if(b.startsWith(`${c}/`))return`projects/${a.getProject()}/locations/${a.getLocation()}/${b}`;else if(e)return`projects/${a.getProject()}/locations/${a.getLocation()}/${c}/${b}`;else return b;return e?`${c}/${b}`:b}(a,b,"cachedContents")}function dD(a){switch(a){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return a}}function dE(a){return null!=a&&"object"==typeof a&&"video"in a}function dF(a){return null!=a&&"object"==typeof a&&"uri"in a}function dG(a){var b;let c;if(null!=a&&"object"==typeof a&&"name"in a&&(c=a.name),!dF(a)||void 0!==(c=a.uri)){if(!dE(a)||void 0!==(c=null==(b=a.video)?void 0:b.uri)){if("string"==typeof a&&(c=a),void 0===c)throw Error("Could not extract file name from the provided input.");if(c.startsWith("https://")){let a=c.split("files/")[1].match(/[a-z0-9]+/);if(null===a)throw Error(`Could not extract file name from URI ${c}`);c=a[0]}else c.startsWith("files/")&&(c=c.split("files/")[1]);return c}}}function dH(a,b){return a.isVertexAI()?b?"publishers/google/models":"models":b?"models":"tunedModels"}function dI(a){for(let d of["models","tunedModels","publisherModels"]){var b,c;if(b=a,c=d,null!==b&&"object"==typeof b&&c in b)return a[d]}return[]}function dJ(a,b){let c;if("string"==typeof b)if(a.isVertexAI())if(b.startsWith("gs://"))c={format:"jsonl",gcsUri:[b]};else if(b.startsWith("bq://"))c={format:"bigquery",bigqueryUri:b};else throw Error(`Unsupported string source for Vertex AI: ${b}`);else if(b.startsWith("files/"))c={fileName:b};else throw Error(`Unsupported string source for Gemini API: ${b}`);else if(Array.isArray(b)){if(a.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");c={inlinedRequests:b}}else c=b;let d=[c.gcsUri,c.bigqueryUri].filter(Boolean).length,e=[c.inlinedRequests,c.fileName].filter(Boolean).length;if(a.isVertexAI()){if(e>0||1!==d)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(d>0||1!==e)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return c}function dK(a){if("object"!=typeof a||null===a)return{};let b=a.inlinedResponses;if("object"!=typeof b||null===b)return a;let c=b.inlinedResponses;if(!Array.isArray(c)||0===c.length)return a;let d=!1;for(let a of c){if("object"!=typeof a||null===a)continue;let b=a.response;if("object"==typeof b&&null!==b&&void 0!==b.embedding){d=!0;break}}return d&&(a.inlinedEmbedContentResponses=a.inlinedResponses,delete a.inlinedResponses),a}function dL(a,b){if(!a.isVertexAI()){if(/batches\/[^/]+$/.test(b))return b.split("/").pop();throw Error(`Invalid batch job name: ${b}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(b))return b.split("/").pop();if(/^\d+$/.test(b))return b;throw Error(`Invalid batch job name: ${b}.`)}function dM(a){if("BATCH_STATE_UNSPECIFIED"===a)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===a)return"JOB_STATE_PENDING";if("BATCH_STATE_RUNNING"===a)return"JOB_STATE_RUNNING";if("BATCH_STATE_SUCCEEDED"===a)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===a)return"JOB_STATE_FAILED";else if("BATCH_STATE_CANCELLED"===a)return"JOB_STATE_CANCELLED";else if("BATCH_STATE_EXPIRED"===a)return"JOB_STATE_EXPIRED";else return a}function dN(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["metadata","displayName"]);null!=d&&cP(b,["displayName"],d);let e=cQ(a,["metadata","state"]);null!=e&&cP(b,["state"],dM(e));let f=cQ(a,["metadata","createTime"]);null!=f&&cP(b,["createTime"],f);let g=cQ(a,["metadata","endTime"]);null!=g&&cP(b,["endTime"],g);let h=cQ(a,["metadata","updateTime"]);null!=h&&cP(b,["updateTime"],h);let i=cQ(a,["metadata","model"]);null!=i&&cP(b,["model"],i);let j=cQ(a,["metadata","output"]);return null!=j&&cP(b,["dest"],function(a){let b={},c=cQ(a,["responsesFile"]);null!=c&&cP(b,["fileName"],c);let d=cQ(a,["inlinedResponses","inlinedResponses"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["response"]);null!=c&&cP(b,["response"],function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["content"]);null!=c&&cP(b,["content"],c);let d=cQ(a,["citationMetadata"]);null!=d&&cP(b,["citationMetadata"],function(a){let b={},c=cQ(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["citations"],a)}return b}(d));let e=cQ(a,["tokenCount"]);null!=e&&cP(b,["tokenCount"],e);let f=cQ(a,["finishReason"]);null!=f&&cP(b,["finishReason"],f);let g=cQ(a,["avgLogprobs"]);null!=g&&cP(b,["avgLogprobs"],g);let h=cQ(a,["groundingMetadata"]);null!=h&&cP(b,["groundingMetadata"],h);let i=cQ(a,["index"]);null!=i&&cP(b,["index"],i);let j=cQ(a,["logprobsResult"]);null!=j&&cP(b,["logprobsResult"],j);let k=cQ(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["safetyRatings"],a)}let l=cQ(a,["urlContextMetadata"]);return null!=l&&cP(b,["urlContextMetadata"],l),b})(a))),cP(b,["candidates"],a)}let e=cQ(a,["modelVersion"]);null!=e&&cP(b,["modelVersion"],e);let f=cQ(a,["promptFeedback"]);null!=f&&cP(b,["promptFeedback"],f);let g=cQ(a,["responseId"]);null!=g&&cP(b,["responseId"],g);let h=cQ(a,["usageMetadata"]);return null!=h&&cP(b,["usageMetadata"],h),b}(c));let d=cQ(a,["error"]);return null!=d&&cP(b,["error"],d),b})(a))),cP(b,["inlinedResponses"],a)}let e=cQ(a,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["inlinedEmbedContentResponses"],a)}return b}(dK(j))),b}function dO(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["displayName"]);null!=d&&cP(b,["displayName"],d);let e=cQ(a,["state"]);null!=e&&cP(b,["state"],dM(e));let f=cQ(a,["error"]);null!=f&&cP(b,["error"],f);let g=cQ(a,["createTime"]);null!=g&&cP(b,["createTime"],g);let h=cQ(a,["startTime"]);null!=h&&cP(b,["startTime"],h);let i=cQ(a,["endTime"]);null!=i&&cP(b,["endTime"],i);let j=cQ(a,["updateTime"]);null!=j&&cP(b,["updateTime"],j);let k=cQ(a,["model"]);null!=k&&cP(b,["model"],k);let l=cQ(a,["inputConfig"]);null!=l&&cP(b,["src"],function(a){let b={},c=cQ(a,["instancesFormat"]);null!=c&&cP(b,["format"],c);let d=cQ(a,["gcsSource","uris"]);null!=d&&cP(b,["gcsUri"],d);let e=cQ(a,["bigquerySource","inputUri"]);return null!=e&&cP(b,["bigqueryUri"],e),b}(l));let m=cQ(a,["outputConfig"]);null!=m&&cP(b,["dest"],function(a){let b={},c=cQ(a,["predictionsFormat"]);null!=c&&cP(b,["format"],c);let d=cQ(a,["gcsDestination","outputUriPrefix"]);null!=d&&cP(b,["gcsUri"],d);let e=cQ(a,["bigqueryDestination","outputUri"]);return null!=e&&cP(b,["bigqueryUri"],e),b}(dK(m)));let n=cQ(a,["completionStats"]);return null!=n&&cP(b,["completionStats"],n),b}function dP(a){let b={},c=cQ(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["mediaResolution"]);null!=c&&cP(b,["mediaResolution"],c);let d=cQ(a,["codeExecutionResult"]);null!=d&&cP(b,["codeExecutionResult"],d);let e=cQ(a,["executableCode"]);null!=e&&cP(b,["executableCode"],e);let f=cQ(a,["fileData"]);null!=f&&cP(b,["fileData"],function(a){let b={};if(void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=cQ(a,["fileUri"]);null!=c&&cP(b,["fileUri"],c);let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(f));let g=cQ(a,["functionCall"]);null!=g&&cP(b,["functionCall"],function(a){let b={},c=cQ(a,["id"]);null!=c&&cP(b,["id"],c);let d=cQ(a,["args"]);null!=d&&cP(b,["args"],d);let e=cQ(a,["name"]);if(null!=e&&cP(b,["name"],e),void 0!==cQ(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==cQ(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=cQ(a,["functionResponse"]);null!=h&&cP(b,["functionResponse"],h);let i=cQ(a,["inlineData"]);null!=i&&cP(b,["inlineData"],function(a){let b={},c=cQ(a,["data"]);if(null!=c&&cP(b,["data"],c),void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(i));let j=cQ(a,["text"]);null!=j&&cP(b,["text"],j);let k=cQ(a,["thought"]);null!=k&&cP(b,["thought"],k);let l=cQ(a,["thoughtSignature"]);null!=l&&cP(b,["thoughtSignature"],l);let m=cQ(a,["videoMetadata"]);return null!=m&&cP(b,["videoMetadata"],m),b})(a))),cP(b,["parts"],a)}let d=cQ(a,["role"]);return null!=d&&cP(b,["role"],d),b}function dQ(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["src"]);null!=e&&cP(c,["batch","inputConfig"],function(a,b){let c={};if(void 0!==cQ(b,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==cQ(b,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==cQ(b,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let d=cQ(b,["fileName"]);null!=d&&cP(c,["fileName"],d);let e=cQ(b,["inlinedRequests"]);if(null!=e){let b=e;Array.isArray(b)&&(b=b.map(b=>(function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["request","model"],di(a,d));let e=cQ(b,["contents"]);if(null!=e){let a=dw(e);Array.isArray(a)&&(a=a.map(a=>dP(a))),cP(c,["request","contents"],a)}let f=cQ(b,["metadata"]);null!=f&&cP(c,["metadata"],f);let g=cQ(b,["config"]);return null!=g&&cP(c,["request","generationConfig"],function(a,b,c){let d={},e=cQ(b,["systemInstruction"]);void 0!==c&&null!=e&&cP(c,["systemInstruction"],dP(du(e)));let f=cQ(b,["temperature"]);null!=f&&cP(d,["temperature"],f);let g=cQ(b,["topP"]);null!=g&&cP(d,["topP"],g);let h=cQ(b,["topK"]);null!=h&&cP(d,["topK"],h);let i=cQ(b,["candidateCount"]);null!=i&&cP(d,["candidateCount"],i);let j=cQ(b,["maxOutputTokens"]);null!=j&&cP(d,["maxOutputTokens"],j);let k=cQ(b,["stopSequences"]);null!=k&&cP(d,["stopSequences"],k);let l=cQ(b,["responseLogprobs"]);null!=l&&cP(d,["responseLogprobs"],l);let m=cQ(b,["logprobs"]);null!=m&&cP(d,["logprobs"],m);let n=cQ(b,["presencePenalty"]);null!=n&&cP(d,["presencePenalty"],n);let o=cQ(b,["frequencyPenalty"]);null!=o&&cP(d,["frequencyPenalty"],o);let p=cQ(b,["seed"]);null!=p&&cP(d,["seed"],p);let q=cQ(b,["responseMimeType"]);null!=q&&cP(d,["responseMimeType"],q);let r=cQ(b,["responseSchema"]);null!=r&&cP(d,["responseSchema"],dx(r));let s=cQ(b,["responseJsonSchema"]);if(null!=s&&cP(d,["responseJsonSchema"],s),void 0!==cQ(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==cQ(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let t=cQ(b,["safetySettings"]);if(void 0!==c&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["category"]);if(null!=c&&cP(b,["category"],c),void 0!==cQ(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=cQ(a,["threshold"]);return null!=d&&cP(b,["threshold"],d),b})(a))),cP(c,["safetySettings"],a)}let u=cQ(b,["tools"]);if(void 0!==c&&null!=u){let a=dB(u);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["functionDeclarations"],a)}if(void 0!==cQ(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=cQ(a,["googleSearchRetrieval"]);null!=d&&cP(b,["googleSearchRetrieval"],d);let e=cQ(a,["computerUse"]);null!=e&&cP(b,["computerUse"],e);let f=cQ(a,["fileSearch"]);null!=f&&cP(b,["fileSearch"],f);let g=cQ(a,["codeExecution"]);if(null!=g&&cP(b,["codeExecution"],g),void 0!==cQ(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=cQ(a,["googleMaps"]);null!=h&&cP(b,["googleMaps"],function(a){let b={};if(void 0!==cQ(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=cQ(a,["enableWidget"]);return null!=c&&cP(b,["enableWidget"],c),b}(h));let i=cQ(a,["googleSearch"]);null!=i&&cP(b,["googleSearch"],function(a){let b={};if(void 0!==cQ(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==cQ(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=cQ(a,["timeRangeFilter"]);return null!=c&&cP(b,["timeRangeFilter"],c),b}(i));let j=cQ(a,["urlContext"]);return null!=j&&cP(b,["urlContext"],j),b})(dA(a)))),cP(c,["tools"],a)}let v=cQ(b,["toolConfig"]);if(void 0!==c&&null!=v&&cP(c,["toolConfig"],function(a){let b={},c=cQ(a,["functionCallingConfig"]);null!=c&&cP(b,["functionCallingConfig"],function(a){let b={},c=cQ(a,["mode"]);null!=c&&cP(b,["mode"],c);let d=cQ(a,["allowedFunctionNames"]);if(null!=d&&cP(b,["allowedFunctionNames"],d),void 0!==cQ(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(c));let d=cQ(a,["retrievalConfig"]);return null!=d&&cP(b,["retrievalConfig"],d),b}(v)),void 0!==cQ(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=cQ(b,["cachedContent"]);void 0!==c&&null!=w&&cP(c,["cachedContent"],dC(a,w));let x=cQ(b,["responseModalities"]);null!=x&&cP(d,["responseModalities"],x);let y=cQ(b,["mediaResolution"]);null!=y&&cP(d,["mediaResolution"],y);let z=cQ(b,["speechConfig"]);if(null!=z&&cP(d,["speechConfig"],dy(z)),void 0!==cQ(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let A=cQ(b,["thinkingConfig"]);null!=A&&cP(d,["thinkingConfig"],A);let B=cQ(b,["imageConfig"]);return null!=B&&cP(d,["imageConfig"],function(a){let b={},c=cQ(a,["aspectRatio"]);null!=c&&cP(b,["aspectRatio"],c);let d=cQ(a,["imageSize"]);if(null!=d&&cP(b,["imageSize"],d),void 0!==cQ(a,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==cQ(a,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return b}(B)),d}(a,g,cQ(c,["request"],{}))),c})(a,b))),cP(c,["requests","requests"],b)}return c}(a,dJ(a,e)));let f=cQ(b,["config"]);return null!=f&&function(a,b){let c=cQ(a,["displayName"]);if(void 0!==b&&null!=c&&cP(b,["batch","displayName"],c),void 0!==cQ(a,["dest"]))throw Error("dest parameter is not supported in Gemini API.")}(f,c),c}!function(a){a.PAGED_ITEM_BATCH_JOBS="batchJobs",a.PAGED_ITEM_MODELS="models",a.PAGED_ITEM_TUNING_JOBS="tuningJobs",a.PAGED_ITEM_FILES="files",a.PAGED_ITEM_CACHED_CONTENTS="cachedContents",a.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",a.PAGED_ITEM_DOCUMENTS="documents"}(ag||(ag={}));class dR{constructor(a,b,c,d){this.pageInternal=[],this.paramsInternal={},this.requestInternal=b,this.init(a,c,d)}init(a,b,c){var d,e;this.nameInternal=a,this.pageInternal=b[this.nameInternal]||[],this.sdkHttpResponseInternal=null==b?void 0:b.sdkHttpResponse,this.idxInternal=0;let f={config:{}};(f=c&&0!==Object.keys(c).length?"object"==typeof c?Object.assign({},c):c:{config:{}}).config&&(f.config.pageToken=b.nextPageToken),this.paramsInternal=f,this.pageInternalSize=null!=(e=null==(d=f.config)?void 0:d.pageSize)?e:this.pageInternal.length}initNextPage(a){this.init(this.nameInternal,a,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(a){return this.pageInternal[a]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let a=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:a,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let a=await this.requestInternal(this.params);return this.initNextPage(a),this.page}hasNextPage(){var a;return(null==(a=this.params.config)?void 0:a.pageToken)!==void 0}}class dS extends cN{constructor(a){super(),this.apiClient=a,this.create=async a=>(this.apiClient.isVertexAI()&&(a.config=this.formatDestination(a.src,a.config)),this.createInternal(a)),this.createEmbeddings=async a=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(a)},this.list=async(a={})=>new dR(ag.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(a),a)}createInlinedGenerateContentRequest(a){let b=dQ(this.apiClient,a),c=cO("{model}:batchGenerateContent",b._url),d=b.batch.inputConfig.requests,e=d.requests,f=[];for(let a of e){let b=Object.assign({},a);if(b.systemInstruction){let a=b.systemInstruction;delete b.systemInstruction;let c=b.request;c.systemInstruction=a,b.request=c}f.push(b)}return d.requests=f,delete b.config,delete b._url,delete b._query,{path:c,body:b}}getGcsUri(a){return"string"==typeof a?a.startsWith("gs://")?a:void 0:!Array.isArray(a)&&a.gcsUri&&a.gcsUri.length>0?a.gcsUri[0]:void 0}getBigqueryUri(a){return"string"==typeof a?a.startsWith("bq://")?a:void 0:Array.isArray(a)?void 0:a.bigqueryUri}formatDestination(a,b){let c=b?Object.assign({},b):{},d=Date.now().toString();if(c.displayName||(c.displayName=`genaiBatchJob_${d}`),void 0===c.dest){let b=this.getGcsUri(a),e=this.getBigqueryUri(a);if(b)b.endsWith(".jsonl")?c.dest=`${b.slice(0,-6)}/dest`:c.dest=`${b}_dest_${d}`;else if(e)c.dest=`${e}_dest_${d}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return c}async createInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["model"],di(a,d));let e=cQ(b,["src"]);null!=e&&cP(c,["inputConfig"],function(a){let b={},c=cQ(a,["format"]);null!=c&&cP(b,["instancesFormat"],c);let d=cQ(a,["gcsUri"]);null!=d&&cP(b,["gcsSource","uris"],d);let e=cQ(a,["bigqueryUri"]);if(null!=e&&cP(b,["bigquerySource","inputUri"],e),void 0!==cQ(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==cQ(a,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return b}(dJ(a,e)));let f=cQ(b,["config"]);return null!=f&&function(a,b){let c=cQ(a,["displayName"]);void 0!==b&&null!=c&&cP(b,["displayName"],c);let d=cQ(a,["dest"]);void 0!==b&&null!=d&&cP(b,["outputConfig"],function(a){let b={},c=cQ(a,["format"]);null!=c&&cP(b,["predictionsFormat"],c);let d=cQ(a,["gcsUri"]);null!=d&&cP(b,["gcsDestination","outputUriPrefix"],d);let e=cQ(a,["bigqueryUri"]);if(null!=e&&cP(b,["bigqueryDestination","outputUri"],e),void 0!==cQ(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==cQ(a,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==cQ(a,["inlinedEmbedContentResponses"]))throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return b}(function(a){if("string"!=typeof a)return a;if(a.startsWith("gs://"))return{format:"jsonl",gcsUri:a};if(a.startsWith("bq://"))return{format:"bigquery",bigqueryUri:a};throw Error(`Unsupported destination: ${a}`)}(d)))}(f,c),c}(this.apiClient,a);return f=cO("batchPredictionJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>dO(a))}{let b=dQ(this.apiClient,a);return f=cO("{model}:batchGenerateContent",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>dN(a))}}async createEmbeddingsInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["src"]);null!=e&&cP(c,["batch","inputConfig"],function(a,b){let c={},d=cQ(b,["fileName"]);null!=d&&cP(c,["file_name"],d);let e=cQ(b,["inlinedRequests"]);return null!=e&&cP(c,["requests"],function(a,b){let c={},d=cQ(b,["contents"]);if(null!=d){let b=dv(a,d);Array.isArray(b)&&(b=b.map(a=>a)),cP(c,["requests[]","request","content"],b)}let e=cQ(b,["config"]);return null!=e&&(cP(c,["_self"],function(a,b){let c=cQ(a,["taskType"]);void 0!==b&&null!=c&&cP(b,["requests[]","taskType"],c);let d=cQ(a,["title"]);void 0!==b&&null!=d&&cP(b,["requests[]","title"],d);let e=cQ(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&cP(b,["requests[]","outputDimensionality"],e),void 0!==cQ(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==cQ(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(e,c)),!function(a,b){for(let[c,d]of Object.entries(b)){let b=c.split("."),e=d.split("."),f=new Set,g=-1;for(let a=0;a<b.length;a++)if("*"===b[a]){g=a;break}if(-1!==g&&e.length>g)for(let a=g;a<e.length;a++){let b=e[a];"*"===b||b.endsWith("[]")||b.endsWith("[0]")||f.add(b)}!function a(b,c,d,e,f){if(e>=c.length||"object"!=typeof b||null===b)return;let g=c[e];if(g.endsWith("[]")){let h=g.slice(0,-2);if(h in b&&Array.isArray(b[h]))for(let g of b[h])a(g,c,d,e+1,f)}else if("*"===g){if("object"==typeof b&&null!==b&&!Array.isArray(b)){let a=Object.keys(b).filter(a=>!a.startsWith("_")&&!f.has(a)),c={};for(let d of a)c[d]=b[d];for(let[a,f]of Object.entries(c)){let c=[];for(let b of d.slice(e))"*"===b?c.push(a):c.push(b);cP(b,c,f)}for(let c of a)delete b[c]}}else g in b&&a(b[g],c,d,e+1,f)}(a,b,e,0,f)}}(c,{"requests[].*":"requests[].request.*"})),c}(a,e)),c}(a,e));let f=cQ(b,["config"]);return null!=f&&function(a,b){let c=cQ(a,["displayName"]);void 0!==b&&null!=c&&cP(b,["batch","displayName"],c)}(f,c),c}(this.apiClient,a);return d=cO("{model}:asyncBatchEmbedContent",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>dN(a))}}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dL(a,d)),c}(this.apiClient,a);return f=cO("batchPredictionJobs/{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>dO(a))}{let b=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dL(a,d)),c}(this.apiClient,a);return f=cO("batches/{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>dN(a))}}async cancel(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dL(a,d)),c}(this.apiClient,a);f=cO("batchPredictionJobs/{name}:cancel",d._url),g=d._query,delete d._url,delete d._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}else{let b=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dL(a,d)),c}(this.apiClient,a);f=cO("batches/{name}:cancel",b._url),g=b._query,delete b._url,delete b._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal})}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=cQ(a,["config"]);return null!=c&&function(a,b){let c=cQ(a,["pageSize"]);void 0!==b&&null!=c&&cP(b,["_query","pageSize"],c);let d=cQ(a,["pageToken"]);void 0!==b&&null!=d&&cP(b,["_query","pageToken"],d);let e=cQ(a,["filter"]);void 0!==b&&null!=e&&cP(b,["_query","filter"],e)}(c,b),b}(a);return f=cO("batchPredictionJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["batchPredictionJobs"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>dO(a))),cP(b,["batchJobs"],a)}return b}(a),c=new de;return Object.assign(c,b),c})}{let b=function(a){let b={},c=cQ(a,["config"]);return null!=c&&function(a,b){let c=cQ(a,["pageSize"]);void 0!==b&&null!=c&&cP(b,["_query","pageSize"],c);let d=cQ(a,["pageToken"]);if(void 0!==b&&null!=d&&cP(b,["_query","pageToken"],d),void 0!==cQ(a,["filter"]))throw Error("filter parameter is not supported in Gemini API.")}(c,b),b}(a);return f=cO("batches",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["operations"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>dN(a))),cP(b,["batchJobs"],a)}return b}(a),c=new de;return Object.assign(c,b),c})}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dL(a,d)),c}(this.apiClient,a);return f=cO("batchPredictionJobs/{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["name"]);null!=d&&cP(b,["name"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);return null!=f&&cP(b,["error"],f),b})(a))}{let b=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dL(a,d)),c}(this.apiClient,a);return f=cO("batches/{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["name"]);null!=d&&cP(b,["name"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);return null!=f&&cP(b,["error"],f),b})(a))}}}function dT(a){let b={},c=cQ(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["mediaResolution"]);null!=c&&cP(b,["mediaResolution"],c);let d=cQ(a,["codeExecutionResult"]);null!=d&&cP(b,["codeExecutionResult"],d);let e=cQ(a,["executableCode"]);null!=e&&cP(b,["executableCode"],e);let f=cQ(a,["fileData"]);null!=f&&cP(b,["fileData"],function(a){let b={};if(void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=cQ(a,["fileUri"]);null!=c&&cP(b,["fileUri"],c);let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(f));let g=cQ(a,["functionCall"]);null!=g&&cP(b,["functionCall"],function(a){let b={},c=cQ(a,["id"]);null!=c&&cP(b,["id"],c);let d=cQ(a,["args"]);null!=d&&cP(b,["args"],d);let e=cQ(a,["name"]);if(null!=e&&cP(b,["name"],e),void 0!==cQ(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==cQ(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=cQ(a,["functionResponse"]);null!=h&&cP(b,["functionResponse"],h);let i=cQ(a,["inlineData"]);null!=i&&cP(b,["inlineData"],function(a){let b={},c=cQ(a,["data"]);if(null!=c&&cP(b,["data"],c),void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(i));let j=cQ(a,["text"]);null!=j&&cP(b,["text"],j);let k=cQ(a,["thought"]);null!=k&&cP(b,["thought"],k);let l=cQ(a,["thoughtSignature"]);null!=l&&cP(b,["thoughtSignature"],l);let m=cQ(a,["videoMetadata"]);return null!=m&&cP(b,["videoMetadata"],m),b})(a))),cP(b,["parts"],a)}let d=cQ(a,["role"]);return null!=d&&cP(b,["role"],d),b}class dU extends cN{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new dR(ag.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(a),a)}async create(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["model"],dj(a,d));let e=cQ(b,["config"]);return null!=e&&function(a,b){let c=cQ(a,["ttl"]);void 0!==b&&null!=c&&cP(b,["ttl"],c);let d=cQ(a,["expireTime"]);void 0!==b&&null!=d&&cP(b,["expireTime"],d);let e=cQ(a,["displayName"]);void 0!==b&&null!=e&&cP(b,["displayName"],e);let f=cQ(a,["contents"]);if(void 0!==b&&null!=f){let a=dw(f);Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["contents"],a)}let g=cQ(a,["systemInstruction"]);void 0!==b&&null!=g&&cP(b,["systemInstruction"],du(g));let h=cQ(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==cQ(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=cQ(a,["description"]);null!=c&&cP(b,["description"],c);let d=cQ(a,["name"]);null!=d&&cP(b,["name"],d);let e=cQ(a,["parameters"]);null!=e&&cP(b,["parameters"],e);let f=cQ(a,["parametersJsonSchema"]);null!=f&&cP(b,["parametersJsonSchema"],f);let g=cQ(a,["response"]);null!=g&&cP(b,["response"],g);let h=cQ(a,["responseJsonSchema"]);return null!=h&&cP(b,["responseJsonSchema"],h),b})(a))),cP(b,["functionDeclarations"],a)}let d=cQ(a,["retrieval"]);null!=d&&cP(b,["retrieval"],d);let e=cQ(a,["googleSearchRetrieval"]);null!=e&&cP(b,["googleSearchRetrieval"],e);let f=cQ(a,["computerUse"]);if(null!=f&&cP(b,["computerUse"],f),void 0!==cQ(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=cQ(a,["codeExecution"]);null!=g&&cP(b,["codeExecution"],g);let h=cQ(a,["enterpriseWebSearch"]);null!=h&&cP(b,["enterpriseWebSearch"],h);let i=cQ(a,["googleMaps"]);null!=i&&cP(b,["googleMaps"],i);let j=cQ(a,["googleSearch"]);null!=j&&cP(b,["googleSearch"],j);let k=cQ(a,["urlContext"]);return null!=k&&cP(b,["urlContext"],k),b})(a))),cP(b,["tools"],a)}let i=cQ(a,["toolConfig"]);void 0!==b&&null!=i&&cP(b,["toolConfig"],i);let j=cQ(a,["kmsKeyName"]);void 0!==b&&null!=j&&cP(b,["encryption_spec","kmsKeyName"],j)}(e,c),c}(this.apiClient,a);return f=cO("cachedContents",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["model"],dj(a,d));let e=cQ(b,["config"]);return null!=e&&function(a,b){let c=cQ(a,["ttl"]);void 0!==b&&null!=c&&cP(b,["ttl"],c);let d=cQ(a,["expireTime"]);void 0!==b&&null!=d&&cP(b,["expireTime"],d);let e=cQ(a,["displayName"]);void 0!==b&&null!=e&&cP(b,["displayName"],e);let f=cQ(a,["contents"]);if(void 0!==b&&null!=f){let a=dw(f);Array.isArray(a)&&(a=a.map(a=>dT(a))),cP(b,["contents"],a)}let g=cQ(a,["systemInstruction"]);void 0!==b&&null!=g&&cP(b,["systemInstruction"],dT(du(g)));let h=cQ(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["functionDeclarations"],a)}if(void 0!==cQ(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=cQ(a,["googleSearchRetrieval"]);null!=d&&cP(b,["googleSearchRetrieval"],d);let e=cQ(a,["computerUse"]);null!=e&&cP(b,["computerUse"],e);let f=cQ(a,["fileSearch"]);null!=f&&cP(b,["fileSearch"],f);let g=cQ(a,["codeExecution"]);if(null!=g&&cP(b,["codeExecution"],g),void 0!==cQ(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=cQ(a,["googleMaps"]);null!=h&&cP(b,["googleMaps"],function(a){let b={};if(void 0!==cQ(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=cQ(a,["enableWidget"]);return null!=c&&cP(b,["enableWidget"],c),b}(h));let i=cQ(a,["googleSearch"]);null!=i&&cP(b,["googleSearch"],function(a){let b={};if(void 0!==cQ(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==cQ(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=cQ(a,["timeRangeFilter"]);return null!=c&&cP(b,["timeRangeFilter"],c),b}(i));let j=cQ(a,["urlContext"]);return null!=j&&cP(b,["urlContext"],j),b})(a))),cP(b,["tools"],a)}let i=cQ(a,["toolConfig"]);if(void 0!==b&&null!=i&&cP(b,["toolConfig"],function(a){let b={},c=cQ(a,["functionCallingConfig"]);null!=c&&cP(b,["functionCallingConfig"],function(a){let b={},c=cQ(a,["mode"]);null!=c&&cP(b,["mode"],c);let d=cQ(a,["allowedFunctionNames"]);if(null!=d&&cP(b,["allowedFunctionNames"],d),void 0!==cQ(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(c));let d=cQ(a,["retrievalConfig"]);return null!=d&&cP(b,["retrievalConfig"],d),b}(i)),void 0!==cQ(a,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.")}(e,c),c}(this.apiClient,a);return f=cO("cachedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dC(a,d)),c}(this.apiClient,a);return f=cO("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dC(a,d)),c}(this.apiClient,a);return f=cO("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dC(a,d)),c}(this.apiClient,a);return f=cO("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);return null!=c&&cP(b,["sdkHttpResponse"],c),b}(a),c=new c5;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=cQ(b,["name"]);return null!=d&&cP(c,["_url","name"],dC(a,d)),c}(this.apiClient,a);return f=cO("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);return null!=c&&cP(b,["sdkHttpResponse"],c),b}(a),c=new c5;return Object.assign(c,b),c})}}async update(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["name"]);null!=d&&cP(c,["_url","name"],dC(a,d));let e=cQ(b,["config"]);return null!=e&&function(a,b){let c=cQ(a,["ttl"]);void 0!==b&&null!=c&&cP(b,["ttl"],c);let d=cQ(a,["expireTime"]);void 0!==b&&null!=d&&cP(b,["expireTime"],d)}(e,c),c}(this.apiClient,a);return f=cO("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=cQ(b,["name"]);null!=d&&cP(c,["_url","name"],dC(a,d));let e=cQ(b,["config"]);return null!=e&&function(a,b){let c=cQ(a,["ttl"]);void 0!==b&&null!=c&&cP(b,["ttl"],c);let d=cQ(a,["expireTime"]);void 0!==b&&null!=d&&cP(b,["expireTime"],d)}(e,c),c}(this.apiClient,a);return f=cO("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=cQ(a,["config"]);return null!=c&&function(a,b){let c=cQ(a,["pageSize"]);void 0!==b&&null!=c&&cP(b,["_query","pageSize"],c);let d=cQ(a,["pageToken"]);void 0!==b&&null!=d&&cP(b,["_query","pageToken"],d)}(c,b),b}(a);return f=cO("cachedContents",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["cachedContents"],a)}return b}(a),c=new c6;return Object.assign(c,b),c})}{let b=function(a){let b={},c=cQ(a,["config"]);return null!=c&&function(a,b){let c=cQ(a,["pageSize"]);void 0!==b&&null!=c&&cP(b,["_query","pageSize"],c);let d=cQ(a,["pageToken"]);void 0!==b&&null!=d&&cP(b,["_query","pageToken"],d)}(c,b),b}(a);return f=cO("cachedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["cachedContents"],a)}return b}(a),c=new c6;return Object.assign(c,b),c})}}}function dV(a){return this instanceof dV?(this.v=a,this):new dV(a)}function dW(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof dV?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function dX(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function dY(a){if(void 0===a.parts||0===a.parts.length)return!1;for(let b of a.parts)if(void 0===b||0===Object.keys(b).length)return!1;return!0}function dZ(a){if(void 0===a||0===a.length)return[];let b=[],c=a.length,d=0;for(;d<c;)if("user"===a[d].role)b.push(a[d]),d++;else{let e=[],f=!0;for(;d<c&&"model"===a[d].role;)e.push(a[d]),f&&!dY(a[d])&&(f=!1),d++;f?b.push(...e):b.pop()}return b}"function"==typeof SuppressedError&&SuppressedError;class d${constructor(a,b){this.modelsModule=a,this.apiClient=b}create(a){return new d_(this.apiClient,this.modelsModule,a.model,a.config,structuredClone(a.history))}}class d_{constructor(a,b,c,d={},e=[]){this.apiClient=a,this.modelsModule=b,this.model=c,this.config=d,this.history=e,this.sendPromise=Promise.resolve(),function(a){if(0!==a.length){for(let b of a)if("user"!==b.role&&"model"!==b.role)throw Error(`Role must be user or model, but got ${b.role}.`)}}(e)}async sendMessage(a){var b;await this.sendPromise;let c=du(a.message),d=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});return this.sendPromise=(async()=>{var a,b,e;let f=await d,g=null==(b=null==(a=f.candidates)?void 0:a[0])?void 0:b.content,h=f.automaticFunctionCallingHistory,i=this.getHistory(!0).length,j=[];null!=h&&(j=null!=(e=h.slice(i))?e:[]),this.recordHistory(c,g?[g]:[],j)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),d}async sendMessageStream(a){var b;await this.sendPromise;let c=du(a.message),d=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});this.sendPromise=d.then(()=>void 0).catch(()=>void 0);let e=await d;return this.processStreamResponse(e,c)}getHistory(a=!1){return structuredClone(a?dZ(this.history):this.history)}processStreamResponse(a,b){var c,d;return dW(this,arguments,function*(){var e,f,g,h;let i=[];try{for(var j,k=!0,l=dX(a);!(e=(j=yield dV(l.next())).done);k=!0){if(h=j.value,k=!1,function(a){var b;if(void 0==a.candidates||0===a.candidates.length)return!1;let c=null==(b=a.candidates[0])?void 0:b.content;return void 0!==c&&dY(c)}(h)){let a=null==(d=null==(c=h.candidates)?void 0:c[0])?void 0:d.content;void 0!==a&&i.push(a)}yield yield dV(h)}}catch(a){f={error:a}}finally{try{!k&&!e&&(g=l.return)&&(yield dV(g.call(l)))}finally{if(f)throw f.error}}this.recordHistory(b,i)})}recordHistory(a,b,c){let d=[];b.length>0&&b.every(a=>void 0!==a.role)?d=b:d.push({role:"model",parts:[]}),c&&c.length>0?this.history.push(...dZ(c)):this.history.push(a),this.history.push(...d)}}class d0 extends Error{constructor(a){super(a.message),this.name="ApiError",this.status=a.status,Object.setPrototypeOf(this,d0.prototype)}}class d1 extends cN{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new dR(ag.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(a),a)}async upload(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(a.file,a.config).then(a=>a)}async download(a){await this.apiClient.downloadFile(a)}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["config"]);return null!=c&&function(a,b){let c=cQ(a,["pageSize"]);void 0!==b&&null!=c&&cP(b,["_query","pageSize"],c);let d=cQ(a,["pageToken"]);void 0!==b&&null!=d&&cP(b,["_query","pageToken"],d)}(c,b),b}(a);return d=cO("files",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["files"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["files"],a)}return b}(a),c=new db;return Object.assign(c,b),c})}}async createInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["file"]);return null!=c&&cP(b,["file"],c),b}(a);return d=cO("upload/v1beta/files",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);return null!=c&&cP(b,["sdkHttpResponse"],c),b}(a),c=new dc;return Object.assign(c,b),c})}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["name"]);return null!=c&&cP(b,["_url","file"],dG(c)),b}(a);return d=cO("files/{file}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["name"]);return null!=c&&cP(b,["_url","file"],dG(c)),b}(a);return d=cO("files/{file}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);return null!=c&&cP(b,["sdkHttpResponse"],c),b}(a),c=new dd;return Object.assign(c,b),c})}}}function d2(a){let b={},c=cQ(a,["data"]);if(null!=c&&cP(b,["data"],c),void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}function d3(a){let b={},c=cQ(a,["languageCode"]);null!=c&&cP(b,["languageCode"],c);let d=cQ(a,["voiceConfig"]);if(null!=d&&cP(b,["voiceConfig"],d),void 0!==cQ(a,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return b}function d4(a){let b={},c=cQ(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["mediaResolution"]);null!=c&&cP(b,["mediaResolution"],c);let d=cQ(a,["codeExecutionResult"]);null!=d&&cP(b,["codeExecutionResult"],d);let e=cQ(a,["executableCode"]);null!=e&&cP(b,["executableCode"],e);let f=cQ(a,["fileData"]);null!=f&&cP(b,["fileData"],function(a){let b={};if(void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=cQ(a,["fileUri"]);null!=c&&cP(b,["fileUri"],c);let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(f));let g=cQ(a,["functionCall"]);null!=g&&cP(b,["functionCall"],function(a){let b={},c=cQ(a,["id"]);null!=c&&cP(b,["id"],c);let d=cQ(a,["args"]);null!=d&&cP(b,["args"],d);let e=cQ(a,["name"]);if(null!=e&&cP(b,["name"],e),void 0!==cQ(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==cQ(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=cQ(a,["functionResponse"]);null!=h&&cP(b,["functionResponse"],h);let i=cQ(a,["inlineData"]);null!=i&&cP(b,["inlineData"],function(a){let b={},c=cQ(a,["data"]);if(null!=c&&cP(b,["data"],c),void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(i));let j=cQ(a,["text"]);null!=j&&cP(b,["text"],j);let k=cQ(a,["thought"]);null!=k&&cP(b,["thought"],k);let l=cQ(a,["thoughtSignature"]);null!=l&&cP(b,["thoughtSignature"],l);let m=cQ(a,["videoMetadata"]);return null!=m&&cP(b,["videoMetadata"],m),b})(a))),cP(b,["parts"],a)}let d=cQ(a,["role"]);return null!=d&&cP(b,["role"],d),b}function d5(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["contents"]);if(null!=e){let a=dw(e);Array.isArray(a)&&(a=a.map(a=>d4(a))),cP(c,["contents"],a)}let f=cQ(b,["config"]);return null!=f&&cP(c,["generationConfig"],function(a,b,c){let d={},e=cQ(b,["systemInstruction"]);void 0!==c&&null!=e&&cP(c,["systemInstruction"],d4(du(e)));let f=cQ(b,["temperature"]);null!=f&&cP(d,["temperature"],f);let g=cQ(b,["topP"]);null!=g&&cP(d,["topP"],g);let h=cQ(b,["topK"]);null!=h&&cP(d,["topK"],h);let i=cQ(b,["candidateCount"]);null!=i&&cP(d,["candidateCount"],i);let j=cQ(b,["maxOutputTokens"]);null!=j&&cP(d,["maxOutputTokens"],j);let k=cQ(b,["stopSequences"]);null!=k&&cP(d,["stopSequences"],k);let l=cQ(b,["responseLogprobs"]);null!=l&&cP(d,["responseLogprobs"],l);let m=cQ(b,["logprobs"]);null!=m&&cP(d,["logprobs"],m);let n=cQ(b,["presencePenalty"]);null!=n&&cP(d,["presencePenalty"],n);let o=cQ(b,["frequencyPenalty"]);null!=o&&cP(d,["frequencyPenalty"],o);let p=cQ(b,["seed"]);null!=p&&cP(d,["seed"],p);let q=cQ(b,["responseMimeType"]);null!=q&&cP(d,["responseMimeType"],q);let r=cQ(b,["responseSchema"]);null!=r&&cP(d,["responseSchema"],dx(r));let s=cQ(b,["responseJsonSchema"]);if(null!=s&&cP(d,["responseJsonSchema"],s),void 0!==cQ(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==cQ(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let t=cQ(b,["safetySettings"]);if(void 0!==c&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["category"]);if(null!=c&&cP(b,["category"],c),void 0!==cQ(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=cQ(a,["threshold"]);return null!=d&&cP(b,["threshold"],d),b})(a))),cP(c,["safetySettings"],a)}let u=cQ(b,["tools"]);if(void 0!==c&&null!=u){let a=dB(u);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["functionDeclarations"],a)}if(void 0!==cQ(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=cQ(a,["googleSearchRetrieval"]);null!=d&&cP(b,["googleSearchRetrieval"],d);let e=cQ(a,["computerUse"]);null!=e&&cP(b,["computerUse"],e);let f=cQ(a,["fileSearch"]);null!=f&&cP(b,["fileSearch"],f);let g=cQ(a,["codeExecution"]);if(null!=g&&cP(b,["codeExecution"],g),void 0!==cQ(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=cQ(a,["googleMaps"]);null!=h&&cP(b,["googleMaps"],function(a){let b={};if(void 0!==cQ(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=cQ(a,["enableWidget"]);return null!=c&&cP(b,["enableWidget"],c),b}(h));let i=cQ(a,["googleSearch"]);null!=i&&cP(b,["googleSearch"],function(a){let b={};if(void 0!==cQ(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==cQ(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=cQ(a,["timeRangeFilter"]);return null!=c&&cP(b,["timeRangeFilter"],c),b}(i));let j=cQ(a,["urlContext"]);return null!=j&&cP(b,["urlContext"],j),b})(dA(a)))),cP(c,["tools"],a)}let v=cQ(b,["toolConfig"]);if(void 0!==c&&null!=v&&cP(c,["toolConfig"],function(a){let b={},c=cQ(a,["functionCallingConfig"]);null!=c&&cP(b,["functionCallingConfig"],function(a){let b={},c=cQ(a,["mode"]);null!=c&&cP(b,["mode"],c);let d=cQ(a,["allowedFunctionNames"]);if(null!=d&&cP(b,["allowedFunctionNames"],d),void 0!==cQ(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(c));let d=cQ(a,["retrievalConfig"]);return null!=d&&cP(b,["retrievalConfig"],d),b}(v)),void 0!==cQ(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=cQ(b,["cachedContent"]);void 0!==c&&null!=w&&cP(c,["cachedContent"],dC(a,w));let x=cQ(b,["responseModalities"]);null!=x&&cP(d,["responseModalities"],x);let y=cQ(b,["mediaResolution"]);null!=y&&cP(d,["mediaResolution"],y);let z=cQ(b,["speechConfig"]);if(null!=z&&cP(d,["speechConfig"],dy(z)),void 0!==cQ(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let A=cQ(b,["thinkingConfig"]);null!=A&&cP(d,["thinkingConfig"],A);let B=cQ(b,["imageConfig"]);return null!=B&&cP(d,["imageConfig"],function(a){let b={},c=cQ(a,["aspectRatio"]);null!=c&&cP(b,["aspectRatio"],c);let d=cQ(a,["imageSize"]);if(null!=d&&cP(b,["imageSize"],d),void 0!==cQ(a,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==cQ(a,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return b}(B)),d}(a,f,c)),c}function d6(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["contents"]);if(null!=e){let a=dw(e);Array.isArray(a)&&(a=a.map(a=>a)),cP(c,["contents"],a)}let f=cQ(b,["config"]);return null!=f&&cP(c,["generationConfig"],function(a,b,c){let d={},e=cQ(b,["systemInstruction"]);void 0!==c&&null!=e&&cP(c,["systemInstruction"],du(e));let f=cQ(b,["temperature"]);null!=f&&cP(d,["temperature"],f);let g=cQ(b,["topP"]);null!=g&&cP(d,["topP"],g);let h=cQ(b,["topK"]);null!=h&&cP(d,["topK"],h);let i=cQ(b,["candidateCount"]);null!=i&&cP(d,["candidateCount"],i);let j=cQ(b,["maxOutputTokens"]);null!=j&&cP(d,["maxOutputTokens"],j);let k=cQ(b,["stopSequences"]);null!=k&&cP(d,["stopSequences"],k);let l=cQ(b,["responseLogprobs"]);null!=l&&cP(d,["responseLogprobs"],l);let m=cQ(b,["logprobs"]);null!=m&&cP(d,["logprobs"],m);let n=cQ(b,["presencePenalty"]);null!=n&&cP(d,["presencePenalty"],n);let o=cQ(b,["frequencyPenalty"]);null!=o&&cP(d,["frequencyPenalty"],o);let p=cQ(b,["seed"]);null!=p&&cP(d,["seed"],p);let q=cQ(b,["responseMimeType"]);null!=q&&cP(d,["responseMimeType"],q);let r=cQ(b,["responseSchema"]);null!=r&&cP(d,["responseSchema"],dx(r));let s=cQ(b,["responseJsonSchema"]);null!=s&&cP(d,["responseJsonSchema"],s);let t=cQ(b,["routingConfig"]);null!=t&&cP(d,["routingConfig"],t);let u=cQ(b,["modelSelectionConfig"]);null!=u&&cP(d,["modelConfig"],u);let v=cQ(b,["safetySettings"]);if(void 0!==c&&null!=v){let a=v;Array.isArray(a)&&(a=a.map(a=>a)),cP(c,["safetySettings"],a)}let w=cQ(b,["tools"]);if(void 0!==c&&null!=w){let a=dB(w);Array.isArray(a)&&(a=a.map(a=>ei(dA(a)))),cP(c,["tools"],a)}let x=cQ(b,["toolConfig"]);void 0!==c&&null!=x&&cP(c,["toolConfig"],x);let y=cQ(b,["labels"]);void 0!==c&&null!=y&&cP(c,["labels"],y);let z=cQ(b,["cachedContent"]);void 0!==c&&null!=z&&cP(c,["cachedContent"],dC(a,z));let A=cQ(b,["responseModalities"]);null!=A&&cP(d,["responseModalities"],A);let B=cQ(b,["mediaResolution"]);null!=B&&cP(d,["mediaResolution"],B);let C=cQ(b,["speechConfig"]);null!=C&&cP(d,["speechConfig"],eh(dy(C)));let D=cQ(b,["audioTimestamp"]);null!=D&&cP(d,["audioTimestamp"],D);let E=cQ(b,["thinkingConfig"]);null!=E&&cP(d,["thinkingConfig"],E);let F=cQ(b,["imageConfig"]);return null!=F&&cP(d,["imageConfig"],function(a){let b={},c=cQ(a,["aspectRatio"]);null!=c&&cP(b,["aspectRatio"],c);let d=cQ(a,["imageSize"]);null!=d&&cP(b,["imageSize"],d);let e=cQ(a,["outputMimeType"]);null!=e&&cP(b,["imageOutputOptions","mimeType"],e);let f=cQ(a,["outputCompressionQuality"]);return null!=f&&cP(b,["imageOutputOptions","compressionQuality"],f),b}(F)),d}(a,f,c)),c}function d7(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["content"]);null!=c&&cP(b,["content"],c);let d=cQ(a,["citationMetadata"]);null!=d&&cP(b,["citationMetadata"],function(a){let b={},c=cQ(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["citations"],a)}return b}(d));let e=cQ(a,["tokenCount"]);null!=e&&cP(b,["tokenCount"],e);let f=cQ(a,["finishReason"]);null!=f&&cP(b,["finishReason"],f);let g=cQ(a,["avgLogprobs"]);null!=g&&cP(b,["avgLogprobs"],g);let h=cQ(a,["groundingMetadata"]);null!=h&&cP(b,["groundingMetadata"],h);let i=cQ(a,["index"]);null!=i&&cP(b,["index"],i);let j=cQ(a,["logprobsResult"]);null!=j&&cP(b,["logprobsResult"],j);let k=cQ(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["safetyRatings"],a)}let l=cQ(a,["urlContextMetadata"]);return null!=l&&cP(b,["urlContextMetadata"],l),b})(a))),cP(b,["candidates"],a)}let e=cQ(a,["modelVersion"]);null!=e&&cP(b,["modelVersion"],e);let f=cQ(a,["promptFeedback"]);null!=f&&cP(b,["promptFeedback"],f);let g=cQ(a,["responseId"]);null!=g&&cP(b,["responseId"],g);let h=cQ(a,["usageMetadata"]);return null!=h&&cP(b,["usageMetadata"],h),b}function d8(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["candidates"],a)}let e=cQ(a,["createTime"]);null!=e&&cP(b,["createTime"],e);let f=cQ(a,["modelVersion"]);null!=f&&cP(b,["modelVersion"],f);let g=cQ(a,["promptFeedback"]);null!=g&&cP(b,["promptFeedback"],g);let h=cQ(a,["responseId"]);null!=h&&cP(b,["responseId"],h);let i=cQ(a,["usageMetadata"]);return null!=i&&cP(b,["usageMetadata"],i),b}function d9(a){let b={},c=cQ(a,["_self"]);null!=c&&cP(b,["image"],ea(c));let d=cQ(a,["raiFilteredReason"]);null!=d&&cP(b,["raiFilteredReason"],d);let e=cQ(a,["_self"]);null!=e&&cP(b,["safetyAttributes"],eg(e));let f=cQ(a,["prompt"]);return null!=f&&cP(b,["enhancedPrompt"],f),b}function ea(a){let b={},c=cQ(a,["gcsUri"]);null!=c&&cP(b,["gcsUri"],c);let d=cQ(a,["bytesBase64Encoded"]);null!=d&&cP(b,["imageBytes"],cR(d));let e=cQ(a,["mimeType"]);return null!=e&&cP(b,["mimeType"],e),b}function eb(a){let b={};if(void 0!==cQ(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let c=cQ(a,["imageBytes"]);null!=c&&cP(b,["bytesBase64Encoded"],cR(c));let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}function ec(a){let b={},c=cQ(a,["gcsUri"]);null!=c&&cP(b,["gcsUri"],c);let d=cQ(a,["imageBytes"]);null!=d&&cP(b,["bytesBase64Encoded"],cR(d));let e=cQ(a,["mimeType"]);return null!=e&&cP(b,["mimeType"],e),b}function ed(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["displayName"]);null!=d&&cP(b,["displayName"],d);let e=cQ(a,["description"]);null!=e&&cP(b,["description"],e);let f=cQ(a,["version"]);null!=f&&cP(b,["version"],f);let g=cQ(a,["_self"]);null!=g&&cP(b,["tunedModelInfo"],function(a){let b={},c=cQ(a,["baseModel"]);null!=c&&cP(b,["baseModel"],c);let d=cQ(a,["createTime"]);null!=d&&cP(b,["createTime"],d);let e=cQ(a,["updateTime"]);return null!=e&&cP(b,["updateTime"],e),b}(g));let h=cQ(a,["inputTokenLimit"]);null!=h&&cP(b,["inputTokenLimit"],h);let i=cQ(a,["outputTokenLimit"]);null!=i&&cP(b,["outputTokenLimit"],i);let j=cQ(a,["supportedGenerationMethods"]);null!=j&&cP(b,["supportedActions"],j);let k=cQ(a,["temperature"]);null!=k&&cP(b,["temperature"],k);let l=cQ(a,["maxTemperature"]);null!=l&&cP(b,["maxTemperature"],l);let m=cQ(a,["topP"]);null!=m&&cP(b,["topP"],m);let n=cQ(a,["topK"]);null!=n&&cP(b,["topK"],n);let o=cQ(a,["thinking"]);return null!=o&&cP(b,["thinking"],o),b}function ee(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["displayName"]);null!=d&&cP(b,["displayName"],d);let e=cQ(a,["description"]);null!=e&&cP(b,["description"],e);let f=cQ(a,["versionId"]);null!=f&&cP(b,["version"],f);let g=cQ(a,["deployedModels"]);if(null!=g){let a=g;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["endpoint"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["deployedModelId"]);return null!=d&&cP(b,["deployedModelId"],d),b})(a))),cP(b,["endpoints"],a)}let h=cQ(a,["labels"]);null!=h&&cP(b,["labels"],h);let i=cQ(a,["_self"]);null!=i&&cP(b,["tunedModelInfo"],function(a){let b={},c=cQ(a,["labels","google-vertex-llm-tuning-base-model-id"]);null!=c&&cP(b,["baseModel"],c);let d=cQ(a,["createTime"]);null!=d&&cP(b,["createTime"],d);let e=cQ(a,["updateTime"]);return null!=e&&cP(b,["updateTime"],e),b}(i));let j=cQ(a,["defaultCheckpointId"]);null!=j&&cP(b,["defaultCheckpointId"],j);let k=cQ(a,["checkpoints"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["checkpoints"],a)}return b}function ef(a){let b={},c=cQ(a,["safetyAttributes","categories"]);null!=c&&cP(b,["categories"],c);let d=cQ(a,["safetyAttributes","scores"]);null!=d&&cP(b,["scores"],d);let e=cQ(a,["contentType"]);return null!=e&&cP(b,["contentType"],e),b}function eg(a){let b={},c=cQ(a,["safetyAttributes","categories"]);null!=c&&cP(b,["categories"],c);let d=cQ(a,["safetyAttributes","scores"]);null!=d&&cP(b,["scores"],d);let e=cQ(a,["contentType"]);return null!=e&&cP(b,["contentType"],e),b}function eh(a){let b={},c=cQ(a,["languageCode"]);null!=c&&cP(b,["languageCode"],c);let d=cQ(a,["voiceConfig"]);if(null!=d&&cP(b,["voiceConfig"],d),void 0!==cQ(a,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return b}function ei(a){let b={},c=cQ(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==cQ(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=cQ(a,["description"]);null!=c&&cP(b,["description"],c);let d=cQ(a,["name"]);null!=d&&cP(b,["name"],d);let e=cQ(a,["parameters"]);null!=e&&cP(b,["parameters"],e);let f=cQ(a,["parametersJsonSchema"]);null!=f&&cP(b,["parametersJsonSchema"],f);let g=cQ(a,["response"]);null!=g&&cP(b,["response"],g);let h=cQ(a,["responseJsonSchema"]);return null!=h&&cP(b,["responseJsonSchema"],h),b})(a))),cP(b,["functionDeclarations"],a)}let d=cQ(a,["retrieval"]);null!=d&&cP(b,["retrieval"],d);let e=cQ(a,["googleSearchRetrieval"]);null!=e&&cP(b,["googleSearchRetrieval"],e);let f=cQ(a,["computerUse"]);if(null!=f&&cP(b,["computerUse"],f),void 0!==cQ(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=cQ(a,["codeExecution"]);null!=g&&cP(b,["codeExecution"],g);let h=cQ(a,["enterpriseWebSearch"]);null!=h&&cP(b,["enterpriseWebSearch"],h);let i=cQ(a,["googleMaps"]);null!=i&&cP(b,["googleMaps"],i);let j=cQ(a,["googleSearch"]);null!=j&&cP(b,["googleSearch"],j);let k=cQ(a,["urlContext"]);return null!=k&&cP(b,["urlContext"],k),b}function ej(a){let b={},c=cQ(a,["uri"]);null!=c&&cP(b,["uri"],c);let d=cQ(a,["videoBytes"]);null!=d&&cP(b,["encodedVideo"],cR(d));let e=cQ(a,["mimeType"]);return null!=e&&cP(b,["encoding"],e),b}function ek(a){let b={},c=cQ(a,["uri"]);null!=c&&cP(b,["gcsUri"],c);let d=cQ(a,["videoBytes"]);null!=d&&cP(b,["bytesBase64Encoded"],cR(d));let e=cQ(a,["mimeType"]);return null!=e&&cP(b,["mimeType"],e),b}let el="x-goog-api-client",em=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class en{constructor(a){var b,c;this.clientOptions=Object.assign(Object.assign({},a),{project:a.project,location:a.location,apiKey:a.apiKey,vertexai:a.vertexai});let d={};this.clientOptions.vertexai?(d.apiVersion=null!=(b=this.clientOptions.apiVersion)?b:"v1beta1",d.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(d.apiVersion=null!=(c=this.clientOptions.apiVersion)?c:"v1beta",d.baseUrl="https://generativelanguage.googleapis.com/"),d.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=d,a.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(d,a.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var a;return null!=(a=this.clientOptions.vertexai)&&a}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(a){if(!a||void 0===a.baseUrl||void 0===a.apiVersion)throw Error("HTTP options are not correctly set.");let b=[a.baseUrl.endsWith("/")?a.baseUrl.slice(0,-1):a.baseUrl];return a.apiVersion&&""!==a.apiVersion&&b.push(a.apiVersion),b.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let a=new URL(this.getBaseUrl());return a.protocol="http:"==a.protocol?"ws":"wss",a.toString()}setBaseUrl(a){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=a;else throw Error("HTTP options are not correctly set.")}constructUrl(a,b,c){let d=[this.getRequestUrlInternal(b)];return c&&d.push(this.getBaseResourcePath()),""!==a&&d.push(a),new URL(`${d.join("/")}`)}shouldPrependVertexProjectPath(a){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||a.path.startsWith("projects/")||"GET"===a.httpMethod&&a.path.startsWith("publishers/google/models"))}async request(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a),d=this.constructUrl(a.path,b,c);if(a.queryParams)for(let[b,c]of Object.entries(a.queryParams))d.searchParams.append(b,String(c));let e={};if("GET"===a.httpMethod){if(a.body&&"{}"!==a.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else e.body=a.body;return e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.unaryApiCall(d,e,a.httpMethod)}patchHttpOptions(a,b){let c=JSON.parse(JSON.stringify(a));for(let[a,d]of Object.entries(b))"object"==typeof d?c[a]=Object.assign(Object.assign({},c[a]),d):void 0!==d&&(c[a]=d);return c}async requestStream(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a),d=this.constructUrl(a.path,b,c);d.searchParams.has("alt")&&"sse"===d.searchParams.get("alt")||d.searchParams.set("alt","sse");let e={};return e.body=a.body,e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.streamApiCall(d,e,a.httpMethod)}async includeExtraHttpOptionsToRequestInit(a,b,c,d){if(b&&b.timeout||d){let c=new AbortController,e=c.signal;if(b.timeout&&(null==b?void 0:b.timeout)>0){let a=setTimeout(()=>c.abort(),b.timeout);a&&"function"==typeof a.unref&&a.unref()}d&&d.addEventListener("abort",()=>{c.abort()}),a.signal=e}return b&&null!==b.extraBody&&function(a,b){if(!b||0===Object.keys(b).length)return;if(a.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let c={};if("string"==typeof a.body&&a.body.length>0)try{let b=JSON.parse(a.body);if("object"!=typeof b||null===b||Array.isArray(b))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");c=b}catch(a){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}a.body=JSON.stringify(function a(b,c){let d=Object.assign({},b);for(let b in c)if(Object.prototype.hasOwnProperty.call(c,b)){let e=c[b],f=d[b];e&&"object"==typeof e&&!Array.isArray(e)&&f&&"object"==typeof f&&!Array.isArray(f)?d[b]=a(f,e):(f&&e&&typeof f!=typeof e&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${b}". Original type: ${typeof f}, New type: ${typeof e}. Overwriting.`),d[b]=e)}return d}(c,b))}(a,b.extraBody),a.headers=await this.getHeadersInternal(b,c),a}async unaryApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await eo(a),new cT(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}async streamApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await eo(a),this.processStreamResponse(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}processStreamResponse(a){var b;return dW(this,arguments,function*(){let c=null==(b=null==a?void 0:a.body)?void 0:b.getReader(),d=new TextDecoder("utf-8");if(!c)throw Error("Response body is empty");try{let b="";for(;;){let{done:e,value:f}=yield dV(c.read());if(e){if(b.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let g=d.decode(f,{stream:!0});try{let a=JSON.parse(g);if("error"in a){let b=JSON.parse(JSON.stringify(a.error)),c=b.status,d=b.code,e=`got status: ${c}. ${JSON.stringify(a)}`;if(d>=400&&d<600)throw new d0({message:e,status:d})}}catch(a){if("ApiError"===a.name)throw a}let h=(b+=g).match(em);for(;h;){let c=h[1];try{let d=new Response(c,{headers:null==a?void 0:a.headers,status:null==a?void 0:a.status,statusText:null==a?void 0:a.statusText});yield yield dV(new cT(d)),h=(b=b.slice(h[0].length)).match(em)}catch(a){throw Error(`exception parsing stream chunk ${c}. ${a}`)}}}}finally{c.releaseLock()}})}async apiCall(a,b){return fetch(a,b).catch(a=>{throw Error(`exception ${a} sending request`)})}getDefaultHeaders(){let a={},b="google-genai-sdk/1.30.0 "+this.clientOptions.userAgentExtra;return a["User-Agent"]=b,a[el]=b,a["Content-Type"]="application/json",a}async getHeadersInternal(a,b){let c=new Headers;if(a&&a.headers){for(let[b,d]of Object.entries(a.headers))c.append(b,d);a.timeout&&a.timeout>0&&c.append("X-Server-Timeout",String(Math.ceil(a.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(c,b),c}getFileName(a){var b;let c="";return"string"==typeof a&&(c=null!=(b=(c=a.replace(/[/\\]+$/,"")).split(/[/\\]/).pop())?b:""),c}async uploadFile(a,b){var c;let d={};null!=b&&(d.mimeType=b.mimeType,d.name=b.name,d.displayName=b.displayName),d.name&&!d.name.startsWith("files/")&&(d.name=`files/${d.name}`);let e=this.clientOptions.uploader,f=await e.stat(a);d.sizeBytes=String(f.size);let g=null!=(c=null==b?void 0:b.mimeType)?c:f.type;if(void 0===g||""===g)throw Error("Can not determine mimeType. Please provide mimeType in the config.");d.mimeType=g;let h={file:d},i=this.getFileName(a),j=cO("upload/v1beta/files",h._url),k=await this.fetchUploadUrl(j,d.sizeBytes,d.mimeType,i,h,null==b?void 0:b.httpOptions);return e.upload(a,k,this)}async uploadFileToFileSearchStore(a,b,c){var d;let e=this.clientOptions.uploader,f=await e.stat(b),g=String(f.size),h=null!=(d=null==c?void 0:c.mimeType)?d:f.type;if(void 0===h||""===h)throw Error("Can not determine mimeType. Please provide mimeType in the config.");let i=`upload/v1beta/${a}:uploadToFileSearchStore`,j=this.getFileName(b),k={};(null==c?void 0:c.customMetadata)&&(k.customMetadata=c.customMetadata),(null==c?void 0:c.chunkingConfig)&&(k.chunkingConfig=c.chunkingConfig);let l=await this.fetchUploadUrl(i,g,h,j,k,null==c?void 0:c.httpOptions);return e.uploadToFileSearchStore(b,l,this)}async downloadFile(a){let b=this.clientOptions.downloader;await b.download(a,this)}async fetchUploadUrl(a,b,c,d,e,f){var g;let h={};h=f||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${b}`,"X-Goog-Upload-Header-Content-Type":`${c}`},d?{"X-Goog-Upload-File-Name":d}:{})};let i=await this.request({path:a,body:JSON.stringify(e),httpMethod:"POST",httpOptions:h});if(!i||!(null==i?void 0:i.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let j=null==(g=null==i?void 0:i.headers)?void 0:g["x-goog-upload-url"];if(void 0===j)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return j}}async function eo(a){var b;if(void 0===a)throw Error("response is undefined");if(!a.ok){let c=a.status,d=JSON.stringify((null==(b=a.headers.get("content-type"))?void 0:b.includes("application/json"))?await a.json():{error:{message:await a.text(),code:a.status,status:a.statusText}});if(c>=400&&c<600)throw new d0({message:d,status:c});throw Error(d)}}function ep(a){for(let c of a){var b;if(null!==(b=c)&&"object"==typeof b&&b instanceof er||"object"==typeof c&&"inputSchema"in c)return!0}return!1}function eq(a){var b;let c=null!=(b=a[el])?b:"";a[el]=(c+" mcp_used/unknown").trimStart()}class er{constructor(a=[],b){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=a,this.config=b}static create(a,b){return new er(a,b)}async initialize(){var a,b,c,d;if(this.mcpTools.length>0)return;let e={},f=[];for(let j of this.mcpClients)try{for(var g,h=!0,i=(b=void 0,dX(function(a,b=100){return dW(this,arguments,function*(){let c,d=0;for(;d<b;){let b=yield dV(a.listTools({cursor:c}));for(let a of b.tools)yield yield dV(a),d++;if(!b.nextCursor)break;c=b.nextCursor}})}(j)));!(a=(g=await i.next()).done);h=!0){d=g.value,h=!1,f.push(d);let a=d.name;if(e[a])throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);e[a]=j}}catch(a){b={error:a}}finally{try{!h&&!a&&(c=i.return)&&await c.call(i)}finally{if(b)throw b.error}}this.mcpTools=f,this.functionNameToMcpClient=e}async tool(){return await this.initialize(),function(a,b={}){let c=[],d=new Set;for(let e of a){let a=e.name;if(d.has(a))throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);d.add(a);let f=function(a,b={}){let c={name:a.name,description:a.description,parametersJsonSchema:a.inputSchema};return a.outputSchema&&(c.responseJsonSchema=a.outputSchema),b.behavior&&(c.behavior=b.behavior),{functionDeclarations:[c]}}(e,b);f.functionDeclarations&&c.push(...f.functionDeclarations)}return{functionDeclarations:c}}(this.mcpTools,this.config)}async callTool(a){await this.initialize();let b=[];for(let c of a)if(c.name in this.functionNameToMcpClient){let a,d=this.functionNameToMcpClient[c.name];this.config.timeout&&(a={timeout:this.config.timeout});let e=await d.callTool({name:c.name,arguments:c.args},void 0,a);b.push({functionResponse:{name:c.name,response:e.isError?{error:e}:e}})}return b}}async function es(a,b,c){let d=new dg;Object.assign(d,c.data instanceof Blob?JSON.parse(await c.data.text()):JSON.parse(c.data)),b(d)}class et{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c}async connect(a){var b,c;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let d=this.apiClient.getWebsocketBaseUrl(),e=this.apiClient.getApiVersion(),f=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),h=`${d}/ws/google.ai.generativelanguage.${e}.GenerativeService.BidiGenerateMusic?key=${g}`,i=()=>{},j=new Promise(a=>{i=a}),k=a.callbacks,l=this.apiClient,m={onopen:function(){i({})},onmessage:a=>{es(l,k.onmessage,a)},onerror:null!=(b=null==k?void 0:k.onerror)?b:function(a){},onclose:null!=(c=null==k?void 0:k.onclose)?c:function(a){}},n=this.webSocketFactory.create(h,function(a){let b={};return a.forEach((a,c)=>{b[c]=a}),b}(f),m);n.connect(),await j;let o=di(this.apiClient,a.model);return n.send(JSON.stringify({setup:{model:o}})),new eu(n,this.apiClient)}}class eu{constructor(a,b){this.conn=a,this.apiClient=b}async setWeightedPrompts(a){if(!a.weightedPrompts||0===Object.keys(a.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let b=function(a){let b={},c=cQ(a,["weightedPrompts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["weightedPrompts"],a)}return b}(a);this.conn.send(JSON.stringify({clientContent:b}))}async setMusicGenerationConfig(a){a.musicGenerationConfig||(a.musicGenerationConfig={});let b=function(a){let b={},c=cQ(a,["musicGenerationConfig"]);return null!=c&&cP(b,["musicGenerationConfig"],c),b}(a);this.conn.send(JSON.stringify(b))}sendPlaybackControl(a){this.conn.send(JSON.stringify({playbackControl:a}))}play(){this.sendPlaybackControl(af.PLAY)}pause(){this.sendPlaybackControl(af.PAUSE)}stop(){this.sendPlaybackControl(af.STOP)}resetContext(){this.sendPlaybackControl(af.RESET_CONTEXT)}close(){this.conn.close()}}async function ev(a,b,c){let d=new df,e=JSON.parse(c.data instanceof Blob?await c.data.text():c.data instanceof ArrayBuffer?new TextDecoder().decode(c.data):c.data);a.isVertexAI()?Object.assign(d,function(a){let b={},c=cQ(a,["setupComplete"]);null!=c&&cP(b,["setupComplete"],c);let d=cQ(a,["serverContent"]);null!=d&&cP(b,["serverContent"],d);let e=cQ(a,["toolCall"]);null!=e&&cP(b,["toolCall"],e);let f=cQ(a,["toolCallCancellation"]);null!=f&&cP(b,["toolCallCancellation"],f);let g=cQ(a,["usageMetadata"]);null!=g&&cP(b,["usageMetadata"],function(a){let b={},c=cQ(a,["promptTokenCount"]);null!=c&&cP(b,["promptTokenCount"],c);let d=cQ(a,["cachedContentTokenCount"]);null!=d&&cP(b,["cachedContentTokenCount"],d);let e=cQ(a,["candidatesTokenCount"]);null!=e&&cP(b,["responseTokenCount"],e);let f=cQ(a,["toolUsePromptTokenCount"]);null!=f&&cP(b,["toolUsePromptTokenCount"],f);let g=cQ(a,["thoughtsTokenCount"]);null!=g&&cP(b,["thoughtsTokenCount"],g);let h=cQ(a,["totalTokenCount"]);null!=h&&cP(b,["totalTokenCount"],h);let i=cQ(a,["promptTokensDetails"]);if(null!=i){let a=i;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["promptTokensDetails"],a)}let j=cQ(a,["cacheTokensDetails"]);if(null!=j){let a=j;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["cacheTokensDetails"],a)}let k=cQ(a,["candidatesTokensDetails"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["responseTokensDetails"],a)}let l=cQ(a,["toolUsePromptTokensDetails"]);if(null!=l){let a=l;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["toolUsePromptTokensDetails"],a)}let m=cQ(a,["trafficType"]);return null!=m&&cP(b,["trafficType"],m),b}(g));let h=cQ(a,["goAway"]);null!=h&&cP(b,["goAway"],h);let i=cQ(a,["sessionResumptionUpdate"]);return null!=i&&cP(b,["sessionResumptionUpdate"],i),b}(e)):Object.assign(d,e),b(d)}class ew{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c,this.music=new et(this.apiClient,this.auth,this.webSocketFactory)}async connect(a){var b,c,d,e,f,g;let h;if(a.config&&a.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let i=this.apiClient.getWebsocketBaseUrl(),j=this.apiClient.getApiVersion(),k=this.apiClient.getHeaders();a.config&&a.config.tools&&ep(a.config.tools)&&eq(k);let l=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(k);if(this.apiClient.isVertexAI())h=`${i}/ws/google.cloud.aiplatform.${j}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(l,h);else{let a=this.apiClient.getApiKey(),b="BidiGenerateContent",c="key";(null==a?void 0:a.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==j&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",c="access_token"),h=`${i}/ws/google.ai.generativelanguage.${j}.GenerativeService.${b}?${c}=${a}`}let m=()=>{},n=new Promise(a=>{m=a}),o=a.callbacks,p=this.apiClient,q={onopen:function(){var a;null==(a=null==o?void 0:o.onopen)||a.call(o),m({})},onmessage:a=>{ev(p,o.onmessage,a)},onerror:null!=(b=null==o?void 0:o.onerror)?b:function(a){},onclose:null!=(c=null==o?void 0:o.onclose)?c:function(a){}},r=this.webSocketFactory.create(h,function(a){let b={};return a.forEach((a,c)=>{b[c]=a}),b}(l),q);r.connect(),await n;let s=di(this.apiClient,a.model);if(this.apiClient.isVertexAI()&&s.startsWith("publishers/")){let a=this.apiClient.getProject(),b=this.apiClient.getLocation();s=`projects/${a}/locations/${b}/`+s}let t={};this.apiClient.isVertexAI()&&(null==(d=a.config)?void 0:d.responseModalities)===void 0&&(void 0===a.config?a.config={responseModalities:[y.AUDIO]}:a.config.responseModalities=[y.AUDIO]),(null==(e=a.config)?void 0:e.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let u=null!=(g=null==(f=a.config)?void 0:f.tools)?g:[],v=[];for(let a of u)this.isCallableTool(a)?v.push(await a.tool()):v.push(a);v.length>0&&(a.config.tools=v);let w={model:s,config:a.config,callbacks:a.callbacks};return t=this.apiClient.isVertexAI()?function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["setup","model"],di(a,d));let e=cQ(b,["config"]);return null!=e&&cP(c,["config"],function(a,b){let c=cQ(a,["generationConfig"]);void 0!==b&&null!=c&&cP(b,["setup","generationConfig"],function(a){let b={},c=cQ(a,["modelSelectionConfig"]);null!=c&&cP(b,["modelConfig"],c);let d=cQ(a,["responseJsonSchema"]);null!=d&&cP(b,["responseJsonSchema"],d);let e=cQ(a,["audioTimestamp"]);null!=e&&cP(b,["audioTimestamp"],e);let f=cQ(a,["candidateCount"]);null!=f&&cP(b,["candidateCount"],f);let g=cQ(a,["enableAffectiveDialog"]);null!=g&&cP(b,["enableAffectiveDialog"],g);let h=cQ(a,["frequencyPenalty"]);null!=h&&cP(b,["frequencyPenalty"],h);let i=cQ(a,["logprobs"]);null!=i&&cP(b,["logprobs"],i);let j=cQ(a,["maxOutputTokens"]);null!=j&&cP(b,["maxOutputTokens"],j);let k=cQ(a,["mediaResolution"]);null!=k&&cP(b,["mediaResolution"],k);let l=cQ(a,["presencePenalty"]);null!=l&&cP(b,["presencePenalty"],l);let m=cQ(a,["responseLogprobs"]);null!=m&&cP(b,["responseLogprobs"],m);let n=cQ(a,["responseMimeType"]);null!=n&&cP(b,["responseMimeType"],n);let o=cQ(a,["responseModalities"]);null!=o&&cP(b,["responseModalities"],o);let p=cQ(a,["responseSchema"]);null!=p&&cP(b,["responseSchema"],p);let q=cQ(a,["routingConfig"]);null!=q&&cP(b,["routingConfig"],q);let r=cQ(a,["seed"]);null!=r&&cP(b,["seed"],r);let s=cQ(a,["speechConfig"]);null!=s&&cP(b,["speechConfig"],d3(s));let t=cQ(a,["stopSequences"]);null!=t&&cP(b,["stopSequences"],t);let u=cQ(a,["temperature"]);null!=u&&cP(b,["temperature"],u);let v=cQ(a,["thinkingConfig"]);null!=v&&cP(b,["thinkingConfig"],v);let w=cQ(a,["topK"]);null!=w&&cP(b,["topK"],w);let x=cQ(a,["topP"]);if(null!=x&&cP(b,["topP"],x),void 0!==cQ(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(c));let d=cQ(a,["responseModalities"]);void 0!==b&&null!=d&&cP(b,["setup","generationConfig","responseModalities"],d);let e=cQ(a,["temperature"]);void 0!==b&&null!=e&&cP(b,["setup","generationConfig","temperature"],e);let f=cQ(a,["topP"]);void 0!==b&&null!=f&&cP(b,["setup","generationConfig","topP"],f);let g=cQ(a,["topK"]);void 0!==b&&null!=g&&cP(b,["setup","generationConfig","topK"],g);let h=cQ(a,["maxOutputTokens"]);void 0!==b&&null!=h&&cP(b,["setup","generationConfig","maxOutputTokens"],h);let i=cQ(a,["mediaResolution"]);void 0!==b&&null!=i&&cP(b,["setup","generationConfig","mediaResolution"],i);let j=cQ(a,["seed"]);void 0!==b&&null!=j&&cP(b,["setup","generationConfig","seed"],j);let k=cQ(a,["speechConfig"]);void 0!==b&&null!=k&&cP(b,["setup","generationConfig","speechConfig"],d3(dz(k)));let l=cQ(a,["thinkingConfig"]);void 0!==b&&null!=l&&cP(b,["setup","generationConfig","thinkingConfig"],l);let m=cQ(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&cP(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=cQ(a,["systemInstruction"]);void 0!==b&&null!=n&&cP(b,["setup","systemInstruction"],du(n));let o=cQ(a,["tools"]);if(void 0!==b&&null!=o){let a=dB(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==cQ(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=cQ(a,["description"]);null!=c&&cP(b,["description"],c);let d=cQ(a,["name"]);null!=d&&cP(b,["name"],d);let e=cQ(a,["parameters"]);null!=e&&cP(b,["parameters"],e);let f=cQ(a,["parametersJsonSchema"]);null!=f&&cP(b,["parametersJsonSchema"],f);let g=cQ(a,["response"]);null!=g&&cP(b,["response"],g);let h=cQ(a,["responseJsonSchema"]);return null!=h&&cP(b,["responseJsonSchema"],h),b})(a))),cP(b,["functionDeclarations"],a)}let d=cQ(a,["retrieval"]);null!=d&&cP(b,["retrieval"],d);let e=cQ(a,["googleSearchRetrieval"]);null!=e&&cP(b,["googleSearchRetrieval"],e);let f=cQ(a,["computerUse"]);if(null!=f&&cP(b,["computerUse"],f),void 0!==cQ(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=cQ(a,["codeExecution"]);null!=g&&cP(b,["codeExecution"],g);let h=cQ(a,["enterpriseWebSearch"]);null!=h&&cP(b,["enterpriseWebSearch"],h);let i=cQ(a,["googleMaps"]);null!=i&&cP(b,["googleMaps"],i);let j=cQ(a,["googleSearch"]);null!=j&&cP(b,["googleSearch"],j);let k=cQ(a,["urlContext"]);return null!=k&&cP(b,["urlContext"],k),b})(dA(a)))),cP(b,["setup","tools"],a)}let p=cQ(a,["sessionResumption"]);void 0!==b&&null!=p&&cP(b,["setup","sessionResumption"],p);let q=cQ(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&cP(b,["setup","inputAudioTranscription"],q);let r=cQ(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&cP(b,["setup","outputAudioTranscription"],r);let s=cQ(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&cP(b,["setup","realtimeInputConfig"],s);let t=cQ(a,["contextWindowCompression"]);void 0!==b&&null!=t&&cP(b,["setup","contextWindowCompression"],t);let u=cQ(a,["proactivity"]);return void 0!==b&&null!=u&&cP(b,["setup","proactivity"],u),{}}(e,c)),c}(this.apiClient,w):function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["setup","model"],di(a,d));let e=cQ(b,["config"]);return null!=e&&cP(c,["config"],function(a,b){let c=cQ(a,["generationConfig"]);void 0!==b&&null!=c&&cP(b,["setup","generationConfig"],c);let d=cQ(a,["responseModalities"]);void 0!==b&&null!=d&&cP(b,["setup","generationConfig","responseModalities"],d);let e=cQ(a,["temperature"]);void 0!==b&&null!=e&&cP(b,["setup","generationConfig","temperature"],e);let f=cQ(a,["topP"]);void 0!==b&&null!=f&&cP(b,["setup","generationConfig","topP"],f);let g=cQ(a,["topK"]);void 0!==b&&null!=g&&cP(b,["setup","generationConfig","topK"],g);let h=cQ(a,["maxOutputTokens"]);void 0!==b&&null!=h&&cP(b,["setup","generationConfig","maxOutputTokens"],h);let i=cQ(a,["mediaResolution"]);void 0!==b&&null!=i&&cP(b,["setup","generationConfig","mediaResolution"],i);let j=cQ(a,["seed"]);void 0!==b&&null!=j&&cP(b,["setup","generationConfig","seed"],j);let k=cQ(a,["speechConfig"]);void 0!==b&&null!=k&&cP(b,["setup","generationConfig","speechConfig"],dz(k));let l=cQ(a,["thinkingConfig"]);void 0!==b&&null!=l&&cP(b,["setup","generationConfig","thinkingConfig"],l);let m=cQ(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&cP(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=cQ(a,["systemInstruction"]);void 0!==b&&null!=n&&cP(b,["setup","systemInstruction"],function(a){let b={},c=cQ(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["mediaResolution"]);null!=c&&cP(b,["mediaResolution"],c);let d=cQ(a,["codeExecutionResult"]);null!=d&&cP(b,["codeExecutionResult"],d);let e=cQ(a,["executableCode"]);null!=e&&cP(b,["executableCode"],e);let f=cQ(a,["fileData"]);null!=f&&cP(b,["fileData"],function(a){let b={};if(void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=cQ(a,["fileUri"]);null!=c&&cP(b,["fileUri"],c);let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(f));let g=cQ(a,["functionCall"]);null!=g&&cP(b,["functionCall"],function(a){let b={},c=cQ(a,["id"]);null!=c&&cP(b,["id"],c);let d=cQ(a,["args"]);null!=d&&cP(b,["args"],d);let e=cQ(a,["name"]);if(null!=e&&cP(b,["name"],e),void 0!==cQ(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==cQ(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=cQ(a,["functionResponse"]);null!=h&&cP(b,["functionResponse"],h);let i=cQ(a,["inlineData"]);null!=i&&cP(b,["inlineData"],d2(i));let j=cQ(a,["text"]);null!=j&&cP(b,["text"],j);let k=cQ(a,["thought"]);null!=k&&cP(b,["thought"],k);let l=cQ(a,["thoughtSignature"]);null!=l&&cP(b,["thoughtSignature"],l);let m=cQ(a,["videoMetadata"]);return null!=m&&cP(b,["videoMetadata"],m),b})(a))),cP(b,["parts"],a)}let d=cQ(a,["role"]);return null!=d&&cP(b,["role"],d),b}(du(n)));let o=cQ(a,["tools"]);if(void 0!==b&&null!=o){let a=dB(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["functionDeclarations"],a)}if(void 0!==cQ(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=cQ(a,["googleSearchRetrieval"]);null!=d&&cP(b,["googleSearchRetrieval"],d);let e=cQ(a,["computerUse"]);null!=e&&cP(b,["computerUse"],e);let f=cQ(a,["fileSearch"]);null!=f&&cP(b,["fileSearch"],f);let g=cQ(a,["codeExecution"]);if(null!=g&&cP(b,["codeExecution"],g),void 0!==cQ(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=cQ(a,["googleMaps"]);null!=h&&cP(b,["googleMaps"],function(a){let b={};if(void 0!==cQ(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=cQ(a,["enableWidget"]);return null!=c&&cP(b,["enableWidget"],c),b}(h));let i=cQ(a,["googleSearch"]);null!=i&&cP(b,["googleSearch"],function(a){let b={};if(void 0!==cQ(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==cQ(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=cQ(a,["timeRangeFilter"]);return null!=c&&cP(b,["timeRangeFilter"],c),b}(i));let j=cQ(a,["urlContext"]);return null!=j&&cP(b,["urlContext"],j),b})(dA(a)))),cP(b,["setup","tools"],a)}let p=cQ(a,["sessionResumption"]);void 0!==b&&null!=p&&cP(b,["setup","sessionResumption"],function(a){let b={},c=cQ(a,["handle"]);if(null!=c&&cP(b,["handle"],c),void 0!==cQ(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=cQ(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&cP(b,["setup","inputAudioTranscription"],q);let r=cQ(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&cP(b,["setup","outputAudioTranscription"],r);let s=cQ(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&cP(b,["setup","realtimeInputConfig"],s);let t=cQ(a,["contextWindowCompression"]);void 0!==b&&null!=t&&cP(b,["setup","contextWindowCompression"],t);let u=cQ(a,["proactivity"]);return void 0!==b&&null!=u&&cP(b,["setup","proactivity"],u),{}}(e,c)),c}(this.apiClient,w),delete t.config,r.send(JSON.stringify(t)),new ey(r,this.apiClient)}isCallableTool(a){return"callTool"in a&&"function"==typeof a.callTool}}let ex={turnComplete:!0};class ey{constructor(a,b){this.conn=a,this.apiClient=b}tLiveClientContent(a,b){if(null!==b.turns&&void 0!==b.turns){let c=[];try{c=dw(b.turns),a.isVertexAI()||(c=c.map(a=>d4(a)))}catch(a){throw Error(`Failed to parse client content "turns", type: '${typeof b.turns}'`)}return{clientContent:{turns:c,turnComplete:b.turnComplete}}}return{clientContent:{turnComplete:b.turnComplete}}}tLiveClienttToolResponse(a,b){let c=[];if(null==b.functionResponses||0===(c=Array.isArray(b.functionResponses)?b.functionResponses:[b.functionResponses]).length)throw Error("functionResponses is required.");for(let b of c){if("object"!=typeof b||null===b||!("name"in b)||!("response"in b))throw Error(`Could not parse function response, type '${typeof b}'.`);if(!a.isVertexAI()&&!("id"in b))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:c}}}sendClientContent(a){a=Object.assign(Object.assign({},ex),a);let b=this.tLiveClientContent(this.apiClient,a);this.conn.send(JSON.stringify(b))}sendRealtimeInput(a){let b={};b=this.apiClient.isVertexAI()?{realtimeInput:function(a){let b={},c=cQ(a,["media"]);if(null!=c){let a=dk(c);Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["mediaChunks"],a)}let d=cQ(a,["audio"]);null!=d&&cP(b,["audio"],dn(d));let e=cQ(a,["audioStreamEnd"]);null!=e&&cP(b,["audioStreamEnd"],e);let f=cQ(a,["video"]);null!=f&&cP(b,["video"],dm(f));let g=cQ(a,["text"]);null!=g&&cP(b,["text"],g);let h=cQ(a,["activityStart"]);null!=h&&cP(b,["activityStart"],h);let i=cQ(a,["activityEnd"]);return null!=i&&cP(b,["activityEnd"],i),b}(a)}:{realtimeInput:function(a){let b={},c=cQ(a,["media"]);if(null!=c){let a=dk(c);Array.isArray(a)&&(a=a.map(a=>d2(a))),cP(b,["mediaChunks"],a)}let d=cQ(a,["audio"]);null!=d&&cP(b,["audio"],d2(dn(d)));let e=cQ(a,["audioStreamEnd"]);null!=e&&cP(b,["audioStreamEnd"],e);let f=cQ(a,["video"]);null!=f&&cP(b,["video"],d2(dm(f)));let g=cQ(a,["text"]);null!=g&&cP(b,["text"],g);let h=cQ(a,["activityStart"]);null!=h&&cP(b,["activityStart"],h);let i=cQ(a,["activityEnd"]);return null!=i&&cP(b,["activityEnd"],i),b}(a)},this.conn.send(JSON.stringify(b))}sendToolResponse(a){if(null==a.functionResponses)throw Error("Tool response parameters are required.");let b=this.tLiveClienttToolResponse(this.apiClient,a);this.conn.send(JSON.stringify(b))}close(){this.conn.close()}}function ez(a){var b,c,d;if(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.disable)return!0;let e=!1;for(let b of null!=(c=null==a?void 0:a.tools)?c:[])if(eA(b)){e=!0;break}if(!e)return!0;let f=null==(d=null==a?void 0:a.automaticFunctionCalling)?void 0:d.maximumRemoteCalls;return(!(!f||!(f<0)&&Number.isInteger(f))||0==f)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0)}function eA(a){return"callTool"in a&&"function"==typeof a.callTool}function eB(a){var b;let c=[];return(null==(b=null==a?void 0:a.config)?void 0:b.tools)&&a.config.tools.forEach((a,b)=>{!eA(a)&&a.functionDeclarations&&a.functionDeclarations.length>0&&c.push(b)}),c}function eC(a){var b;return!(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.ignoreCallHistory)}class eD extends cN{constructor(a){super(),this.apiClient=a,this.generateContent=async a=>{var b,c,d,e,f;let g,h,i=await this.processParamsMaybeAddMcpUsage(a);if(this.maybeMoveToResponseJsonSchem(a),!function(a){var b,c,d;return null!=(d=null==(c=null==(b=a.config)?void 0:b.tools)?void 0:c.some(a=>eA(a)))&&d}(a)||ez(a.config))return await this.generateContentInternal(i);let j=eB(a);if(j.length>0){let a=j.map(a=>`tools[${a}]`).join(", ");throw Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${a}.`)}let k=dw(i.contents),l=null!=(d=null==(c=null==(b=i.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,m=0;for(;m<l&&(g=await this.generateContentInternal(i)).functionCalls&&0!==g.functionCalls.length;){let b=g.candidates[0].content,c=[];for(let b of null!=(f=null==(e=a.config)?void 0:e.tools)?f:[])if(eA(b)){let a=await b.callTool(g.functionCalls);c.push(...a)}m++,h={role:"user",parts:c},i.contents=dw(i.contents),i.contents.push(b),i.contents.push(h),eC(i.config)&&(k.push(b),k.push(h))}return eC(i.config)&&(g.automaticFunctionCallingHistory=k),g},this.generateContentStream=async a=>{var b,c,d,e,f;if(this.maybeMoveToResponseJsonSchem(a),ez(a.config)){let b=await this.processParamsMaybeAddMcpUsage(a);return await this.generateContentStreamInternal(b)}let g=eB(a);if(g.length>0){let a=g.map(a=>`tools[${a}]`).join(", ");throw Error(`Incompatible tools found at ${a}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let h=null==(d=null==(c=null==(b=null==a?void 0:a.config)?void 0:b.toolConfig)?void 0:c.functionCallingConfig)?void 0:d.streamFunctionCallArguments,i=null==(f=null==(e=null==a?void 0:a.config)?void 0:e.automaticFunctionCalling)?void 0:f.disable;if(h&&!i)throw Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(a)},this.generateImages=async a=>await this.generateImagesInternal(a).then(a=>{var b;let c,d=[];if(null==a?void 0:a.generatedImages)for(let e of a.generatedImages)e&&(null==e?void 0:e.safetyAttributes)&&(null==(b=null==e?void 0:e.safetyAttributes)?void 0:b.contentType)==="Positive Prompt"?c=null==e?void 0:e.safetyAttributes:d.push(e);return c?{generatedImages:d,positivePromptSafetyAttributes:c,sdkHttpResponse:a.sdkHttpResponse}:{generatedImages:d,sdkHttpResponse:a.sdkHttpResponse}}),this.list=async a=>{var b;let c={config:Object.assign(Object.assign({},{queryBase:!0}),null==a?void 0:a.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase)if(null==(b=c.config)?void 0:b.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else c.config.filter="labels.tune-type:*";return new dR(ag.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(c),c)},this.editImage=async a=>{let b={model:a.model,prompt:a.prompt,referenceImages:[],config:a.config};return a.referenceImages&&a.referenceImages&&(b.referenceImages=a.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(b)},this.upscaleImage=async a=>{let b={numberOfImages:1,mode:"upscale"};a.config&&(b=Object.assign(Object.assign({},b),a.config));let c={model:a.model,image:a.image,upscaleFactor:a.upscaleFactor,config:b};return await this.upscaleImageInternal(c)},this.generateVideos=async a=>{var b,c,d,e,f,g;if((a.prompt||a.image||a.video)&&a.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return!this.apiClient.isVertexAI()&&((null==(b=a.video)?void 0:b.uri)&&(null==(c=a.video)?void 0:c.videoBytes)?a.video={uri:a.video.uri,mimeType:a.video.mimeType}:(null==(e=null==(d=a.source)?void 0:d.video)?void 0:e.uri)&&(null==(g=null==(f=a.source)?void 0:f.video)?void 0:g.videoBytes)&&(a.source.video={uri:a.source.video.uri,mimeType:a.source.video.mimeType})),await this.generateVideosInternal(a)}}maybeMoveToResponseJsonSchem(a){a.config&&a.config.responseSchema&&!a.config.responseJsonSchema&&Object.keys(a.config.responseSchema).includes("$schema")&&(a.config.responseJsonSchema=a.config.responseSchema,delete a.config.responseSchema)}async processParamsMaybeAddMcpUsage(a){var b,c,d;let e=null==(b=a.config)?void 0:b.tools;if(!e)return a;let f=await Promise.all(e.map(async a=>eA(a)?await a.tool():a)),g={model:a.model,contents:a.contents,config:Object.assign(Object.assign({},a.config),{tools:f})};if(g.config.tools=f,a.config&&a.config.tools&&ep(a.config.tools)){let b=Object.assign({},null!=(d=null==(c=a.config.httpOptions)?void 0:c.headers)?d:{});0===Object.keys(b).length&&(b=this.apiClient.getDefaultHeaders()),eq(b),g.config.httpOptions=Object.assign(Object.assign({},a.config.httpOptions),{headers:b})}return g}async initAfcToolsMap(a){var b,c,d;let e=new Map;for(let f of null!=(c=null==(b=a.config)?void 0:b.tools)?c:[])if(eA(f))for(let a of null!=(d=(await f.tool()).functionDeclarations)?d:[]){if(!a.name)throw Error("Function declaration name is required.");if(e.has(a.name))throw Error(`Duplicate tool declaration name: ${a.name}`);e.set(a.name,f)}return e}async processAfcStream(a){var b,c,d;let e=null!=(d=null==(c=null==(b=a.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,f=!1,g=0;return function(a,b,c){var d,h;return dW(this,arguments,function*(){for(var i,j,k,l;g<e;){f&&(g++,f=!1);let p=yield dV(a.processParamsMaybeAddMcpUsage(c)),q=yield dV(a.generateContentStreamInternal(p)),r=[],s=[];try{for(var m,n=!0,o=(j=void 0,dX(q));!(i=(m=yield dV(o.next())).done);n=!0)if(l=m.value,n=!1,yield yield dV(l),l.candidates&&(null==(d=l.candidates[0])?void 0:d.content)){for(let a of(s.push(l.candidates[0].content),null!=(h=l.candidates[0].content.parts)?h:[]))if(g<e&&a.functionCall){if(!a.functionCall.name)throw Error("Function call name was not returned by the model.");if(b.has(a.functionCall.name)){let c=yield dV(b.get(a.functionCall.name).callTool([a.functionCall]));r.push(...c)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${a.functionCall.name}`)}}}catch(a){j={error:a}}finally{try{!n&&!i&&(k=o.return)&&(yield dV(k.call(o)))}finally{if(j)throw j.error}}if(r.length>0){f=!0;let a=new cU;a.candidates=[{content:{role:"user",parts:r}}],yield yield dV(a);let b=[];b.push(...s),b.push({role:"user",parts:r});let d=dw(c.contents).concat(b);c.contents=d}else break}})}(this,await this.initAfcToolsMap(a),a)}async generateContentInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=d6(this.apiClient,a);return f=cO("{model}:generateContent",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=d8(a),c=new cU;return Object.assign(c,b),c})}{let b=d5(this.apiClient,a);return f=cO("{model}:generateContent",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=d7(a),c=new cU;return Object.assign(c,b),c})}}async generateContentStreamInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=d6(this.apiClient,a);return f=cO("{model}:streamGenerateContent?alt=sse",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(function(a){return dW(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=dX(a);!(b=(f=yield dV(h.next())).done);g=!0){e=f.value,g=!1;let a=d8((yield dV(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new cU;Object.assign(b,a),yield yield dV(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield dV(d.call(h)))}finally{if(c)throw c.error}}})})}{let b=d5(this.apiClient,a);return f=cO("{model}:streamGenerateContent?alt=sse",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(function(a){return dW(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=dX(a);!(b=(f=yield dV(h.next())).done);g=!0){e=f.value,g=!1;let a=d7((yield dV(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new cU;Object.assign(b,a),yield yield dV(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield dV(d.call(h)))}finally{if(c)throw c.error}}})})}}async embedContent(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["contents"]);if(null!=e){let b=dv(a,e);Array.isArray(b)&&(b=b.map(a=>a)),cP(c,["instances[]","content"],b)}let f=cQ(b,["config"]);return null!=f&&function(a,b){let c=cQ(a,["taskType"]);void 0!==b&&null!=c&&cP(b,["instances[]","task_type"],c);let d=cQ(a,["title"]);void 0!==b&&null!=d&&cP(b,["instances[]","title"],d);let e=cQ(a,["outputDimensionality"]);void 0!==b&&null!=e&&cP(b,["parameters","outputDimensionality"],e);let f=cQ(a,["mimeType"]);void 0!==b&&null!=f&&cP(b,["instances[]","mimeType"],f);let g=cQ(a,["autoTruncate"]);void 0!==b&&null!=g&&cP(b,["parameters","autoTruncate"],g)}(f,c),c}(this.apiClient,a);return f=cO("{model}:predict",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["predictions[]","embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["values"]);null!=c&&cP(b,["values"],c);let d=cQ(a,["statistics"]);return null!=d&&cP(b,["statistics"],function(a){let b={},c=cQ(a,["truncated"]);null!=c&&cP(b,["truncated"],c);let d=cQ(a,["token_count"]);return null!=d&&cP(b,["tokenCount"],d),b}(d)),b})(a))),cP(b,["embeddings"],a)}let e=cQ(a,["metadata"]);return null!=e&&cP(b,["metadata"],e),b}(a),c=new cV;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["contents"]);if(null!=e){let b=dv(a,e);Array.isArray(b)&&(b=b.map(a=>a)),cP(c,["requests[]","content"],b)}let f=cQ(b,["config"]);null!=f&&function(a,b){let c=cQ(a,["taskType"]);void 0!==b&&null!=c&&cP(b,["requests[]","taskType"],c);let d=cQ(a,["title"]);void 0!==b&&null!=d&&cP(b,["requests[]","title"],d);let e=cQ(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&cP(b,["requests[]","outputDimensionality"],e),void 0!==cQ(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==cQ(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.")}(f,c);let g=cQ(b,["model"]);return void 0!==g&&cP(c,["requests[]","model"],di(a,g)),c}(this.apiClient,a);return f=cO("{model}:batchEmbedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["embeddings"],a)}let e=cQ(a,["metadata"]);return null!=e&&cP(b,["metadata"],e),b}(a),c=new cV;return Object.assign(c,b),c})}}async generateImagesInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["prompt"]);null!=e&&cP(c,["instances[0]","prompt"],e);let f=cQ(b,["config"]);return null!=f&&function(a,b){let c=cQ(a,["outputGcsUri"]);void 0!==b&&null!=c&&cP(b,["parameters","storageUri"],c);let d=cQ(a,["negativePrompt"]);void 0!==b&&null!=d&&cP(b,["parameters","negativePrompt"],d);let e=cQ(a,["numberOfImages"]);void 0!==b&&null!=e&&cP(b,["parameters","sampleCount"],e);let f=cQ(a,["aspectRatio"]);void 0!==b&&null!=f&&cP(b,["parameters","aspectRatio"],f);let g=cQ(a,["guidanceScale"]);void 0!==b&&null!=g&&cP(b,["parameters","guidanceScale"],g);let h=cQ(a,["seed"]);void 0!==b&&null!=h&&cP(b,["parameters","seed"],h);let i=cQ(a,["safetyFilterLevel"]);void 0!==b&&null!=i&&cP(b,["parameters","safetySetting"],i);let j=cQ(a,["personGeneration"]);void 0!==b&&null!=j&&cP(b,["parameters","personGeneration"],j);let k=cQ(a,["includeSafetyAttributes"]);void 0!==b&&null!=k&&cP(b,["parameters","includeSafetyAttributes"],k);let l=cQ(a,["includeRaiReason"]);void 0!==b&&null!=l&&cP(b,["parameters","includeRaiReason"],l);let m=cQ(a,["language"]);void 0!==b&&null!=m&&cP(b,["parameters","language"],m);let n=cQ(a,["outputMimeType"]);void 0!==b&&null!=n&&cP(b,["parameters","outputOptions","mimeType"],n);let o=cQ(a,["outputCompressionQuality"]);void 0!==b&&null!=o&&cP(b,["parameters","outputOptions","compressionQuality"],o);let p=cQ(a,["addWatermark"]);void 0!==b&&null!=p&&cP(b,["parameters","addWatermark"],p);let q=cQ(a,["labels"]);void 0!==b&&null!=q&&cP(b,["labels"],q);let r=cQ(a,["imageSize"]);void 0!==b&&null!=r&&cP(b,["parameters","sampleImageSize"],r);let s=cQ(a,["enhancePrompt"]);void 0!==b&&null!=s&&cP(b,["parameters","enhancePrompt"],s)}(f,c),c}(this.apiClient,a);return f=cO("{model}:predict",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>d9(a))),cP(b,["generatedImages"],a)}let e=cQ(a,["positivePromptSafetyAttributes"]);return null!=e&&cP(b,["positivePromptSafetyAttributes"],eg(e)),b}(a),c=new cW;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["prompt"]);null!=e&&cP(c,["instances[0]","prompt"],e);let f=cQ(b,["config"]);return null!=f&&function(a,b){if(void 0!==cQ(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==cQ(a,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let c=cQ(a,["numberOfImages"]);void 0!==b&&null!=c&&cP(b,["parameters","sampleCount"],c);let d=cQ(a,["aspectRatio"]);void 0!==b&&null!=d&&cP(b,["parameters","aspectRatio"],d);let e=cQ(a,["guidanceScale"]);if(void 0!==b&&null!=e&&cP(b,["parameters","guidanceScale"],e),void 0!==cQ(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let f=cQ(a,["safetyFilterLevel"]);void 0!==b&&null!=f&&cP(b,["parameters","safetySetting"],f);let g=cQ(a,["personGeneration"]);void 0!==b&&null!=g&&cP(b,["parameters","personGeneration"],g);let h=cQ(a,["includeSafetyAttributes"]);void 0!==b&&null!=h&&cP(b,["parameters","includeSafetyAttributes"],h);let i=cQ(a,["includeRaiReason"]);void 0!==b&&null!=i&&cP(b,["parameters","includeRaiReason"],i);let j=cQ(a,["language"]);void 0!==b&&null!=j&&cP(b,["parameters","language"],j);let k=cQ(a,["outputMimeType"]);void 0!==b&&null!=k&&cP(b,["parameters","outputOptions","mimeType"],k);let l=cQ(a,["outputCompressionQuality"]);if(void 0!==b&&null!=l&&cP(b,["parameters","outputOptions","compressionQuality"],l),void 0!==cQ(a,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==cQ(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let m=cQ(a,["imageSize"]);if(void 0!==b&&null!=m&&cP(b,["parameters","sampleImageSize"],m),void 0!==cQ(a,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.")}(f,c),c}(this.apiClient,a);return f=cO("{model}:predict",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["_self"]);null!=c&&cP(b,["image"],function(a){let b={},c=cQ(a,["bytesBase64Encoded"]);null!=c&&cP(b,["imageBytes"],cR(c));let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(c));let d=cQ(a,["raiFilteredReason"]);null!=d&&cP(b,["raiFilteredReason"],d);let e=cQ(a,["_self"]);return null!=e&&cP(b,["safetyAttributes"],ef(e)),b})(a))),cP(b,["generatedImages"],a)}let e=cQ(a,["positivePromptSafetyAttributes"]);return null!=e&&cP(b,["positivePromptSafetyAttributes"],ef(e)),b}(a),c=new cW;return Object.assign(c,b),c})}}async editImageInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["prompt"]);null!=e&&cP(c,["instances[0]","prompt"],e);let f=cQ(b,["referenceImages"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["referenceImage"]);null!=c&&cP(b,["referenceImage"],ec(c));let d=cQ(a,["referenceId"]);null!=d&&cP(b,["referenceId"],d);let e=cQ(a,["referenceType"]);null!=e&&cP(b,["referenceType"],e);let f=cQ(a,["maskImageConfig"]);null!=f&&cP(b,["maskImageConfig"],function(a){let b={},c=cQ(a,["maskMode"]);null!=c&&cP(b,["maskMode"],c);let d=cQ(a,["segmentationClasses"]);null!=d&&cP(b,["maskClasses"],d);let e=cQ(a,["maskDilation"]);return null!=e&&cP(b,["dilation"],e),b}(f));let g=cQ(a,["controlImageConfig"]);null!=g&&cP(b,["controlImageConfig"],function(a){let b={},c=cQ(a,["controlType"]);null!=c&&cP(b,["controlType"],c);let d=cQ(a,["enableControlImageComputation"]);return null!=d&&cP(b,["computeControl"],d),b}(g));let h=cQ(a,["styleImageConfig"]);null!=h&&cP(b,["styleImageConfig"],h);let i=cQ(a,["subjectImageConfig"]);return null!=i&&cP(b,["subjectImageConfig"],i),b})(a))),cP(c,["instances[0]","referenceImages"],a)}let g=cQ(b,["config"]);return null!=g&&function(a,b){let c=cQ(a,["outputGcsUri"]);void 0!==b&&null!=c&&cP(b,["parameters","storageUri"],c);let d=cQ(a,["negativePrompt"]);void 0!==b&&null!=d&&cP(b,["parameters","negativePrompt"],d);let e=cQ(a,["numberOfImages"]);void 0!==b&&null!=e&&cP(b,["parameters","sampleCount"],e);let f=cQ(a,["aspectRatio"]);void 0!==b&&null!=f&&cP(b,["parameters","aspectRatio"],f);let g=cQ(a,["guidanceScale"]);void 0!==b&&null!=g&&cP(b,["parameters","guidanceScale"],g);let h=cQ(a,["seed"]);void 0!==b&&null!=h&&cP(b,["parameters","seed"],h);let i=cQ(a,["safetyFilterLevel"]);void 0!==b&&null!=i&&cP(b,["parameters","safetySetting"],i);let j=cQ(a,["personGeneration"]);void 0!==b&&null!=j&&cP(b,["parameters","personGeneration"],j);let k=cQ(a,["includeSafetyAttributes"]);void 0!==b&&null!=k&&cP(b,["parameters","includeSafetyAttributes"],k);let l=cQ(a,["includeRaiReason"]);void 0!==b&&null!=l&&cP(b,["parameters","includeRaiReason"],l);let m=cQ(a,["language"]);void 0!==b&&null!=m&&cP(b,["parameters","language"],m);let n=cQ(a,["outputMimeType"]);void 0!==b&&null!=n&&cP(b,["parameters","outputOptions","mimeType"],n);let o=cQ(a,["outputCompressionQuality"]);void 0!==b&&null!=o&&cP(b,["parameters","outputOptions","compressionQuality"],o);let p=cQ(a,["addWatermark"]);void 0!==b&&null!=p&&cP(b,["parameters","addWatermark"],p);let q=cQ(a,["labels"]);void 0!==b&&null!=q&&cP(b,["labels"],q);let r=cQ(a,["editMode"]);void 0!==b&&null!=r&&cP(b,["parameters","editMode"],r);let s=cQ(a,["baseSteps"]);void 0!==b&&null!=s&&cP(b,["parameters","editConfig","baseSteps"],s)}(g,c),c}(this.apiClient,a);return d=cO("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>d9(a))),cP(b,["generatedImages"],a)}return b}(a),c=new cX;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["image"]);null!=e&&cP(c,["instances[0]","image"],ec(e));let f=cQ(b,["upscaleFactor"]);null!=f&&cP(c,["parameters","upscaleConfig","upscaleFactor"],f);let g=cQ(b,["config"]);return null!=g&&function(a,b){let c=cQ(a,["outputGcsUri"]);void 0!==b&&null!=c&&cP(b,["parameters","storageUri"],c);let d=cQ(a,["safetyFilterLevel"]);void 0!==b&&null!=d&&cP(b,["parameters","safetySetting"],d);let e=cQ(a,["personGeneration"]);void 0!==b&&null!=e&&cP(b,["parameters","personGeneration"],e);let f=cQ(a,["includeRaiReason"]);void 0!==b&&null!=f&&cP(b,["parameters","includeRaiReason"],f);let g=cQ(a,["outputMimeType"]);void 0!==b&&null!=g&&cP(b,["parameters","outputOptions","mimeType"],g);let h=cQ(a,["outputCompressionQuality"]);void 0!==b&&null!=h&&cP(b,["parameters","outputOptions","compressionQuality"],h);let i=cQ(a,["enhanceInputImage"]);void 0!==b&&null!=i&&cP(b,["parameters","upscaleConfig","enhanceInputImage"],i);let j=cQ(a,["imagePreservationFactor"]);void 0!==b&&null!=j&&cP(b,["parameters","upscaleConfig","imagePreservationFactor"],j);let k=cQ(a,["labels"]);void 0!==b&&null!=k&&cP(b,["labels"],k);let l=cQ(a,["numberOfImages"]);void 0!==b&&null!=l&&cP(b,["parameters","sampleCount"],l);let m=cQ(a,["mode"]);void 0!==b&&null!=m&&cP(b,["parameters","mode"],m)}(g,c),c}(this.apiClient,a);return d=cO("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>d9(a))),cP(b,["generatedImages"],a)}return b}(a),c=new cY;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async recontextImage(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["source"]);null!=e&&function(a,b){let c=cQ(a,["prompt"]);void 0!==b&&null!=c&&cP(b,["instances[0]","prompt"],c);let d=cQ(a,["personImage"]);void 0!==b&&null!=d&&cP(b,["instances[0]","personImage","image"],ec(d));let e=cQ(a,["productImages"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["productImage"]);return null!=c&&cP(b,["image"],ec(c)),b})(a))),cP(b,["instances[0]","productImages"],a)}}(e,c);let f=cQ(b,["config"]);return null!=f&&function(a,b){let c=cQ(a,["numberOfImages"]);void 0!==b&&null!=c&&cP(b,["parameters","sampleCount"],c);let d=cQ(a,["baseSteps"]);void 0!==b&&null!=d&&cP(b,["parameters","baseSteps"],d);let e=cQ(a,["outputGcsUri"]);void 0!==b&&null!=e&&cP(b,["parameters","storageUri"],e);let f=cQ(a,["seed"]);void 0!==b&&null!=f&&cP(b,["parameters","seed"],f);let g=cQ(a,["safetyFilterLevel"]);void 0!==b&&null!=g&&cP(b,["parameters","safetySetting"],g);let h=cQ(a,["personGeneration"]);void 0!==b&&null!=h&&cP(b,["parameters","personGeneration"],h);let i=cQ(a,["addWatermark"]);void 0!==b&&null!=i&&cP(b,["parameters","addWatermark"],i);let j=cQ(a,["outputMimeType"]);void 0!==b&&null!=j&&cP(b,["parameters","outputOptions","mimeType"],j);let k=cQ(a,["outputCompressionQuality"]);void 0!==b&&null!=k&&cP(b,["parameters","outputOptions","compressionQuality"],k);let l=cQ(a,["enhancePrompt"]);void 0!==b&&null!=l&&cP(b,["parameters","enhancePrompt"],l);let m=cQ(a,["labels"]);void 0!==b&&null!=m&&cP(b,["labels"],m)}(f,c),c}(this.apiClient,a);return d=cO("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>d9(a))),cP(b,["generatedImages"],a)}return b}(a),c=new cZ;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async segmentImage(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["source"]);null!=e&&function(a,b){let c=cQ(a,["prompt"]);void 0!==b&&null!=c&&cP(b,["instances[0]","prompt"],c);let d=cQ(a,["image"]);void 0!==b&&null!=d&&cP(b,["instances[0]","image"],ec(d));let e=cQ(a,["scribbleImage"]);void 0!==b&&null!=e&&cP(b,["instances[0]","scribble"],function(a){let b={},c=cQ(a,["image"]);return null!=c&&cP(b,["image"],ec(c)),b}(e))}(e,c);let f=cQ(b,["config"]);return null!=f&&function(a,b){let c=cQ(a,["mode"]);void 0!==b&&null!=c&&cP(b,["parameters","mode"],c);let d=cQ(a,["maxPredictions"]);void 0!==b&&null!=d&&cP(b,["parameters","maxPredictions"],d);let e=cQ(a,["confidenceThreshold"]);void 0!==b&&null!=e&&cP(b,["parameters","confidenceThreshold"],e);let f=cQ(a,["maskDilation"]);void 0!==b&&null!=f&&cP(b,["parameters","maskDilation"],f);let g=cQ(a,["binaryColorThreshold"]);void 0!==b&&null!=g&&cP(b,["parameters","binaryColorThreshold"],g);let h=cQ(a,["labels"]);void 0!==b&&null!=h&&cP(b,["labels"],h)}(f,c),c}(this.apiClient,a);return d=cO("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["_self"]);null!=c&&cP(b,["mask"],ea(c));let d=cQ(a,["labels"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["labels"],a)}return b})(a))),cP(b,["generatedMasks"],a)}return b}(a),c=new c$;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);return null!=d&&cP(c,["_url","name"],di(a,d)),c}(this.apiClient,a);return f=cO("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>ee(a))}{let b=function(a,b){let c={},d=cQ(b,["model"]);return null!=d&&cP(c,["_url","name"],di(a,d)),c}(this.apiClient,a);return f=cO("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>ed(a))}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["config"]);return null!=d&&function(a,b,c){let d=cQ(b,["pageSize"]);void 0!==c&&null!=d&&cP(c,["_query","pageSize"],d);let e=cQ(b,["pageToken"]);void 0!==c&&null!=e&&cP(c,["_query","pageToken"],e);let f=cQ(b,["filter"]);void 0!==c&&null!=f&&cP(c,["_query","filter"],f);let g=cQ(b,["queryBase"]);void 0!==c&&null!=g&&cP(c,["_url","models_url"],dH(a,g))}(a,d,c),c}(this.apiClient,a);return f=cO("{models_url}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["_self"]);if(null!=e){let a=dI(e);Array.isArray(a)&&(a=a.map(a=>ee(a))),cP(b,["models"],a)}return b}(a),c=new c_;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=cQ(b,["config"]);return null!=d&&function(a,b,c){let d=cQ(b,["pageSize"]);void 0!==c&&null!=d&&cP(c,["_query","pageSize"],d);let e=cQ(b,["pageToken"]);void 0!==c&&null!=e&&cP(c,["_query","pageToken"],e);let f=cQ(b,["filter"]);void 0!==c&&null!=f&&cP(c,["_query","filter"],f);let g=cQ(b,["queryBase"]);void 0!==c&&null!=g&&cP(c,["_url","models_url"],dH(a,g))}(a,d,c),c}(this.apiClient,a);return f=cO("{models_url}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["_self"]);if(null!=e){let a=dI(e);Array.isArray(a)&&(a=a.map(a=>ed(a))),cP(b,["models"],a)}return b}(a),c=new c_;return Object.assign(c,b),c})}}async update(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["config"]);return null!=e&&function(a,b){let c=cQ(a,["displayName"]);void 0!==b&&null!=c&&cP(b,["displayName"],c);let d=cQ(a,["description"]);void 0!==b&&null!=d&&cP(b,["description"],d);let e=cQ(a,["defaultCheckpointId"]);void 0!==b&&null!=e&&cP(b,["defaultCheckpointId"],e)}(e,c),c}(this.apiClient,a);return f=cO("{model}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>ee(a))}{let b=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","name"],di(a,d));let e=cQ(b,["config"]);return null!=e&&function(a,b){let c=cQ(a,["displayName"]);void 0!==b&&null!=c&&cP(b,["displayName"],c);let d=cQ(a,["description"]);void 0!==b&&null!=d&&cP(b,["description"],d);let e=cQ(a,["defaultCheckpointId"]);void 0!==b&&null!=e&&cP(b,["defaultCheckpointId"],e)}(e,c),c}(this.apiClient,a);return f=cO("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>ed(a))}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);return null!=d&&cP(c,["_url","name"],di(a,d)),c}(this.apiClient,a);return f=cO("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);return null!=c&&cP(b,["sdkHttpResponse"],c),b}(a),c=new c0;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=cQ(b,["model"]);return null!=d&&cP(c,["_url","name"],di(a,d)),c}(this.apiClient,a);return f=cO("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);return null!=c&&cP(b,["sdkHttpResponse"],c),b}(a),c=new c0;return Object.assign(c,b),c})}}async countTokens(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["contents"]);if(null!=e){let a=dw(e);Array.isArray(a)&&(a=a.map(a=>a)),cP(c,["contents"],a)}let f=cQ(b,["config"]);return null!=f&&function(a,b){let c=cQ(a,["systemInstruction"]);void 0!==b&&null!=c&&cP(b,["systemInstruction"],du(c));let d=cQ(a,["tools"]);if(void 0!==b&&null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>ei(a))),cP(b,["tools"],a)}let e=cQ(a,["generationConfig"]);void 0!==b&&null!=e&&cP(b,["generationConfig"],function(a){let b={},c=cQ(a,["modelSelectionConfig"]);null!=c&&cP(b,["modelConfig"],c);let d=cQ(a,["responseJsonSchema"]);null!=d&&cP(b,["responseJsonSchema"],d);let e=cQ(a,["audioTimestamp"]);null!=e&&cP(b,["audioTimestamp"],e);let f=cQ(a,["candidateCount"]);null!=f&&cP(b,["candidateCount"],f);let g=cQ(a,["enableAffectiveDialog"]);null!=g&&cP(b,["enableAffectiveDialog"],g);let h=cQ(a,["frequencyPenalty"]);null!=h&&cP(b,["frequencyPenalty"],h);let i=cQ(a,["logprobs"]);null!=i&&cP(b,["logprobs"],i);let j=cQ(a,["maxOutputTokens"]);null!=j&&cP(b,["maxOutputTokens"],j);let k=cQ(a,["mediaResolution"]);null!=k&&cP(b,["mediaResolution"],k);let l=cQ(a,["presencePenalty"]);null!=l&&cP(b,["presencePenalty"],l);let m=cQ(a,["responseLogprobs"]);null!=m&&cP(b,["responseLogprobs"],m);let n=cQ(a,["responseMimeType"]);null!=n&&cP(b,["responseMimeType"],n);let o=cQ(a,["responseModalities"]);null!=o&&cP(b,["responseModalities"],o);let p=cQ(a,["responseSchema"]);null!=p&&cP(b,["responseSchema"],p);let q=cQ(a,["routingConfig"]);null!=q&&cP(b,["routingConfig"],q);let r=cQ(a,["seed"]);null!=r&&cP(b,["seed"],r);let s=cQ(a,["speechConfig"]);null!=s&&cP(b,["speechConfig"],eh(s));let t=cQ(a,["stopSequences"]);null!=t&&cP(b,["stopSequences"],t);let u=cQ(a,["temperature"]);null!=u&&cP(b,["temperature"],u);let v=cQ(a,["thinkingConfig"]);null!=v&&cP(b,["thinkingConfig"],v);let w=cQ(a,["topK"]);null!=w&&cP(b,["topK"],w);let x=cQ(a,["topP"]);if(null!=x&&cP(b,["topP"],x),void 0!==cQ(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(e))}(f,c),c}(this.apiClient,a);return f=cO("{model}:countTokens",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["totalTokens"]);return null!=d&&cP(b,["totalTokens"],d),b}(a),c=new c1;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["contents"]);if(null!=e){let a=dw(e);Array.isArray(a)&&(a=a.map(a=>d4(a))),cP(c,["contents"],a)}let f=cQ(b,["config"]);return null!=f&&function(a){if(void 0!==cQ(a,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==cQ(a,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==cQ(a,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.")}(f),c}(this.apiClient,a);return f=cO("{model}:countTokens",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["totalTokens"]);null!=d&&cP(b,["totalTokens"],d);let e=cQ(a,["cachedContentTokenCount"]);return null!=e&&cP(b,["cachedContentTokenCount"],e),b}(a),c=new c1;return Object.assign(c,b),c})}}async computeTokens(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["contents"]);if(null!=e){let a=dw(e);Array.isArray(a)&&(a=a.map(a=>a)),cP(c,["contents"],a)}return c}(this.apiClient,a);return d=cO("{model}:computeTokens",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["tokensInfo"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["tokensInfo"],a)}return b}(a),c=new c2;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["prompt"]);null!=e&&cP(c,["instances[0]","prompt"],e);let f=cQ(b,["image"]);null!=f&&cP(c,["instances[0]","image"],ec(f));let g=cQ(b,["video"]);null!=g&&cP(c,["instances[0]","video"],ek(g));let h=cQ(b,["source"]);null!=h&&function(a,b){let c=cQ(a,["prompt"]);void 0!==b&&null!=c&&cP(b,["instances[0]","prompt"],c);let d=cQ(a,["image"]);void 0!==b&&null!=d&&cP(b,["instances[0]","image"],ec(d));let e=cQ(a,["video"]);void 0!==b&&null!=e&&cP(b,["instances[0]","video"],ek(e))}(h,c);let i=cQ(b,["config"]);return null!=i&&function(a,b){let c=cQ(a,["numberOfVideos"]);void 0!==b&&null!=c&&cP(b,["parameters","sampleCount"],c);let d=cQ(a,["outputGcsUri"]);void 0!==b&&null!=d&&cP(b,["parameters","storageUri"],d);let e=cQ(a,["fps"]);void 0!==b&&null!=e&&cP(b,["parameters","fps"],e);let f=cQ(a,["durationSeconds"]);void 0!==b&&null!=f&&cP(b,["parameters","durationSeconds"],f);let g=cQ(a,["seed"]);void 0!==b&&null!=g&&cP(b,["parameters","seed"],g);let h=cQ(a,["aspectRatio"]);void 0!==b&&null!=h&&cP(b,["parameters","aspectRatio"],h);let i=cQ(a,["resolution"]);void 0!==b&&null!=i&&cP(b,["parameters","resolution"],i);let j=cQ(a,["personGeneration"]);void 0!==b&&null!=j&&cP(b,["parameters","personGeneration"],j);let k=cQ(a,["pubsubTopic"]);void 0!==b&&null!=k&&cP(b,["parameters","pubsubTopic"],k);let l=cQ(a,["negativePrompt"]);void 0!==b&&null!=l&&cP(b,["parameters","negativePrompt"],l);let m=cQ(a,["enhancePrompt"]);void 0!==b&&null!=m&&cP(b,["parameters","enhancePrompt"],m);let n=cQ(a,["generateAudio"]);void 0!==b&&null!=n&&cP(b,["parameters","generateAudio"],n);let o=cQ(a,["lastFrame"]);void 0!==b&&null!=o&&cP(b,["instances[0]","lastFrame"],ec(o));let p=cQ(a,["referenceImages"]);if(void 0!==b&&null!=p){let a=p;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["image"]);null!=c&&cP(b,["image"],ec(c));let d=cQ(a,["referenceType"]);return null!=d&&cP(b,["referenceType"],d),b})(a))),cP(b,["instances[0]","referenceImages"],a)}let q=cQ(a,["mask"]);void 0!==b&&null!=q&&cP(b,["instances[0]","mask"],function(a){let b={},c=cQ(a,["image"]);null!=c&&cP(b,["_self"],ec(c));let d=cQ(a,["maskMode"]);return null!=d&&cP(b,["maskMode"],d),b}(q));let r=cQ(a,["compressionQuality"]);void 0!==b&&null!=r&&cP(b,["parameters","compressionQuality"],r)}(i,c),c}(this.apiClient,a);return f=cO("{model}:predictLongRunning",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["metadata"]);null!=d&&cP(b,["metadata"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);null!=f&&cP(b,["error"],f);let g=cQ(a,["response"]);return null!=g&&cP(b,["response"],function(a){let b={},c=cQ(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["_self"]);return null!=c&&cP(b,["video"],function(a){let b={},c=cQ(a,["gcsUri"]);null!=c&&cP(b,["uri"],c);let d=cQ(a,["bytesBase64Encoded"]);null!=d&&cP(b,["videoBytes"],cR(d));let e=cQ(a,["mimeType"]);return null!=e&&cP(b,["mimeType"],e),b}(c)),b})(a))),cP(b,["generatedVideos"],a)}let d=cQ(a,["raiMediaFilteredCount"]);null!=d&&cP(b,["raiMediaFilteredCount"],d);let e=cQ(a,["raiMediaFilteredReasons"]);return null!=e&&cP(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a),c=new c3;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["_url","model"],di(a,d));let e=cQ(b,["prompt"]);null!=e&&cP(c,["instances[0]","prompt"],e);let f=cQ(b,["image"]);null!=f&&cP(c,["instances[0]","image"],eb(f));let g=cQ(b,["video"]);null!=g&&cP(c,["instances[0]","video"],ej(g));let h=cQ(b,["source"]);null!=h&&function(a,b){let c=cQ(a,["prompt"]);void 0!==b&&null!=c&&cP(b,["instances[0]","prompt"],c);let d=cQ(a,["image"]);void 0!==b&&null!=d&&cP(b,["instances[0]","image"],eb(d));let e=cQ(a,["video"]);void 0!==b&&null!=e&&cP(b,["instances[0]","video"],ej(e))}(h,c);let i=cQ(b,["config"]);return null!=i&&function(a,b){let c=cQ(a,["numberOfVideos"]);if(void 0!==b&&null!=c&&cP(b,["parameters","sampleCount"],c),void 0!==cQ(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==cQ(a,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let d=cQ(a,["durationSeconds"]);if(void 0!==b&&null!=d&&cP(b,["parameters","durationSeconds"],d),void 0!==cQ(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let e=cQ(a,["aspectRatio"]);void 0!==b&&null!=e&&cP(b,["parameters","aspectRatio"],e);let f=cQ(a,["resolution"]);void 0!==b&&null!=f&&cP(b,["parameters","resolution"],f);let g=cQ(a,["personGeneration"]);if(void 0!==b&&null!=g&&cP(b,["parameters","personGeneration"],g),void 0!==cQ(a,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let h=cQ(a,["negativePrompt"]);void 0!==b&&null!=h&&cP(b,["parameters","negativePrompt"],h);let i=cQ(a,["enhancePrompt"]);if(void 0!==b&&null!=i&&cP(b,["parameters","enhancePrompt"],i),void 0!==cQ(a,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");let j=cQ(a,["lastFrame"]);void 0!==b&&null!=j&&cP(b,["instances[0]","lastFrame"],eb(j));let k=cQ(a,["referenceImages"]);if(void 0!==b&&null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["image"]);null!=c&&cP(b,["image"],eb(c));let d=cQ(a,["referenceType"]);return null!=d&&cP(b,["referenceType"],d),b})(a))),cP(b,["instances[0]","referenceImages"],a)}if(void 0!==cQ(a,["mask"]))throw Error("mask parameter is not supported in Gemini API.");if(void 0!==cQ(a,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.")}(i,c),c}(this.apiClient,a);return f=cO("{model}:predictLongRunning",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["metadata"]);null!=d&&cP(b,["metadata"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);null!=f&&cP(b,["error"],f);let g=cQ(a,["response","generateVideoResponse"]);return null!=g&&cP(b,["response"],function(a){let b={},c=cQ(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["video"]);return null!=c&&cP(b,["video"],function(a){let b={},c=cQ(a,["uri"]);null!=c&&cP(b,["uri"],c);let d=cQ(a,["encodedVideo"]);null!=d&&cP(b,["videoBytes"],cR(d));let e=cQ(a,["encoding"]);return null!=e&&cP(b,["mimeType"],e),b}(c)),b})(a))),cP(b,["generatedVideos"],a)}let d=cQ(a,["raiMediaFilteredCount"]);null!=d&&cP(b,["raiMediaFilteredCount"],d);let e=cQ(a,["raiMediaFilteredReasons"]);return null!=e&&cP(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a),c=new c3;return Object.assign(c,b),c})}}}class eE extends cN{constructor(a){super(),this.apiClient=a}async getVideosOperation(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,_isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,_isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=cQ(a,["operationName"]);return null!=c&&cP(b,["_url","operationName"],c),b}(a);return f=cO("{operationName}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}{let b=function(a){let b={},c=cQ(a,["operationName"]);return null!=c&&cP(b,["_url","operationName"],c),b}(a);return f=cO("{operationName}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json())}}async fetchPredictVideosOperationInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a){let b={},c=cQ(a,["operationName"]);null!=c&&cP(b,["operationName"],c);let d=cQ(a,["resourceName"]);return null!=d&&cP(b,["_url","resourceName"],d),b}(a);return d=cO("{resourceName}:fetchPredictOperation",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}throw Error("This method is only supported by the Vertex AI.")}}class eF extends cN{constructor(a){super(),this.apiClient=a}async create(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=cQ(b,["config"]);return null!=d&&cP(c,["config"],function(a,b,c){let d=cQ(b,["expireTime"]);void 0!==c&&null!=d&&cP(c,["expireTime"],d);let e=cQ(b,["newSessionExpireTime"]);void 0!==c&&null!=e&&cP(c,["newSessionExpireTime"],e);let f=cQ(b,["uses"]);void 0!==c&&null!=f&&cP(c,["uses"],f);let g=cQ(b,["liveConnectConstraints"]);void 0!==c&&null!=g&&cP(c,["bidiGenerateContentSetup"],function(a,b){let c={},d=cQ(b,["model"]);null!=d&&cP(c,["setup","model"],di(a,d));let e=cQ(b,["config"]);return null!=e&&cP(c,["config"],function(a,b){let c=cQ(a,["generationConfig"]);void 0!==b&&null!=c&&cP(b,["setup","generationConfig"],c);let d=cQ(a,["responseModalities"]);void 0!==b&&null!=d&&cP(b,["setup","generationConfig","responseModalities"],d);let e=cQ(a,["temperature"]);void 0!==b&&null!=e&&cP(b,["setup","generationConfig","temperature"],e);let f=cQ(a,["topP"]);void 0!==b&&null!=f&&cP(b,["setup","generationConfig","topP"],f);let g=cQ(a,["topK"]);void 0!==b&&null!=g&&cP(b,["setup","generationConfig","topK"],g);let h=cQ(a,["maxOutputTokens"]);void 0!==b&&null!=h&&cP(b,["setup","generationConfig","maxOutputTokens"],h);let i=cQ(a,["mediaResolution"]);void 0!==b&&null!=i&&cP(b,["setup","generationConfig","mediaResolution"],i);let j=cQ(a,["seed"]);void 0!==b&&null!=j&&cP(b,["setup","generationConfig","seed"],j);let k=cQ(a,["speechConfig"]);void 0!==b&&null!=k&&cP(b,["setup","generationConfig","speechConfig"],dz(k));let l=cQ(a,["thinkingConfig"]);void 0!==b&&null!=l&&cP(b,["setup","generationConfig","thinkingConfig"],l);let m=cQ(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&cP(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=cQ(a,["systemInstruction"]);void 0!==b&&null!=n&&cP(b,["setup","systemInstruction"],function(a){let b={},c=cQ(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["mediaResolution"]);null!=c&&cP(b,["mediaResolution"],c);let d=cQ(a,["codeExecutionResult"]);null!=d&&cP(b,["codeExecutionResult"],d);let e=cQ(a,["executableCode"]);null!=e&&cP(b,["executableCode"],e);let f=cQ(a,["fileData"]);null!=f&&cP(b,["fileData"],function(a){let b={};if(void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=cQ(a,["fileUri"]);null!=c&&cP(b,["fileUri"],c);let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(f));let g=cQ(a,["functionCall"]);null!=g&&cP(b,["functionCall"],function(a){let b={},c=cQ(a,["id"]);null!=c&&cP(b,["id"],c);let d=cQ(a,["args"]);null!=d&&cP(b,["args"],d);let e=cQ(a,["name"]);if(null!=e&&cP(b,["name"],e),void 0!==cQ(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==cQ(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=cQ(a,["functionResponse"]);null!=h&&cP(b,["functionResponse"],h);let i=cQ(a,["inlineData"]);null!=i&&cP(b,["inlineData"],function(a){let b={},c=cQ(a,["data"]);if(null!=c&&cP(b,["data"],c),void 0!==cQ(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=cQ(a,["mimeType"]);return null!=d&&cP(b,["mimeType"],d),b}(i));let j=cQ(a,["text"]);null!=j&&cP(b,["text"],j);let k=cQ(a,["thought"]);null!=k&&cP(b,["thought"],k);let l=cQ(a,["thoughtSignature"]);null!=l&&cP(b,["thoughtSignature"],l);let m=cQ(a,["videoMetadata"]);return null!=m&&cP(b,["videoMetadata"],m),b})(a))),cP(b,["parts"],a)}let d=cQ(a,["role"]);return null!=d&&cP(b,["role"],d),b}(du(n)));let o=cQ(a,["tools"]);if(void 0!==b&&null!=o){let a=dB(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=cQ(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["functionDeclarations"],a)}if(void 0!==cQ(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=cQ(a,["googleSearchRetrieval"]);null!=d&&cP(b,["googleSearchRetrieval"],d);let e=cQ(a,["computerUse"]);null!=e&&cP(b,["computerUse"],e);let f=cQ(a,["fileSearch"]);null!=f&&cP(b,["fileSearch"],f);let g=cQ(a,["codeExecution"]);if(null!=g&&cP(b,["codeExecution"],g),void 0!==cQ(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=cQ(a,["googleMaps"]);null!=h&&cP(b,["googleMaps"],function(a){let b={};if(void 0!==cQ(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=cQ(a,["enableWidget"]);return null!=c&&cP(b,["enableWidget"],c),b}(h));let i=cQ(a,["googleSearch"]);null!=i&&cP(b,["googleSearch"],function(a){let b={};if(void 0!==cQ(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==cQ(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=cQ(a,["timeRangeFilter"]);return null!=c&&cP(b,["timeRangeFilter"],c),b}(i));let j=cQ(a,["urlContext"]);return null!=j&&cP(b,["urlContext"],j),b})(dA(a)))),cP(b,["setup","tools"],a)}let p=cQ(a,["sessionResumption"]);void 0!==b&&null!=p&&cP(b,["setup","sessionResumption"],function(a){let b={},c=cQ(a,["handle"]);if(null!=c&&cP(b,["handle"],c),void 0!==cQ(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=cQ(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&cP(b,["setup","inputAudioTranscription"],q);let r=cQ(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&cP(b,["setup","outputAudioTranscription"],r);let s=cQ(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&cP(b,["setup","realtimeInputConfig"],s);let t=cQ(a,["contextWindowCompression"]);void 0!==b&&null!=t&&cP(b,["setup","contextWindowCompression"],t);let u=cQ(a,["proactivity"]);return void 0!==b&&null!=u&&cP(b,["setup","proactivity"],u),{}}(e,c)),c}(a,g));let h=cQ(b,["lockAdditionalFields"]);return void 0!==c&&null!=h&&cP(c,["fieldMask"],h),{}}(a,d,c)),c}(this.apiClient,a);d=cO("auth_tokens",f._url),e=f._query,delete f.config,delete f._url,delete f._query;let g=function(a,b){let c=null,d=a.bidiGenerateContentSetup;if("object"==typeof d&&null!==d&&"setup"in d){let b=d.setup;"object"==typeof b&&null!==b?(a.bidiGenerateContentSetup=b,c=b):delete a.bidiGenerateContentSetup}else void 0!==d&&delete a.bidiGenerateContentSetup;let e=a.fieldMask;if(c){let d=function(a){let b=[];for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)){let d=a[c];if("object"==typeof d&&null!=d&&Object.keys(d).length>0){let a=Object.keys(d).map(a=>`${c}.${a}`);b.push(...a)}else b.push(c)}return b.join(",")}(c);if(Array.isArray(null==b?void 0:b.lockAdditionalFields)&&(null==b?void 0:b.lockAdditionalFields.length)===0)d?a.fieldMask=d:delete a.fieldMask;else if((null==b?void 0:b.lockAdditionalFields)&&b.lockAdditionalFields.length>0&&null!==e&&Array.isArray(e)&&e.length>0){let b=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],c=[];e.length>0&&(c=e.map(a=>b.includes(a)?`generationConfig.${a}`:a));let f=[];d&&f.push(d),c.length>0&&f.push(...c),f.length>0?a.fieldMask=f.join(","):delete a.fieldMask}else delete a.fieldMask}else null!==e&&Array.isArray(e)&&e.length>0?a.fieldMask=e.join(","):delete a.fieldMask;return a}(f,a.config);return this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(g),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}}class eG extends cN{constructor(a){super(),this.apiClient=a,this.list=async a=>new dR(ag.PAGED_ITEM_DOCUMENTS,b=>this.listInternal({parent:a.parent,config:b.config}),await this.listInternal(a),a)}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["name"]);return null!=c&&cP(b,["_url","name"],c),b}(a);return d=cO("{name}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["_url","name"],c);let d=cQ(a,["config"]);return null!=d&&function(a,b){let c=cQ(a,["force"]);void 0!==b&&null!=c&&cP(b,["_query","force"],c)}(d,b),b}(a);d=cO("{name}",f._url),e=f._query,delete f._url,delete f._query,await this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["parent"]);null!=c&&cP(b,["_url","parent"],c);let d=cQ(a,["config"]);return null!=d&&function(a,b){let c=cQ(a,["pageSize"]);void 0!==b&&null!=c&&cP(b,["_query","pageSize"],c);let d=cQ(a,["pageToken"]);void 0!==b&&null!=d&&cP(b,["_query","pageToken"],d)}(d,b),b}(a);return d=cO("{parent}/documents",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["documents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["documents"],a)}return b}(a),c=new c7;return Object.assign(c,b),c})}}}class eH extends cN{constructor(a,b=new eG(a)){super(),this.apiClient=a,this.documents=b,this.list=async(a={})=>new dR(ag.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(a),a)}async uploadToFileSearchStore(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(a.fileSearchStoreName,a.file,a.config)}async create(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["config"]);return null!=c&&function(a,b){let c=cQ(a,["displayName"]);void 0!==b&&null!=c&&cP(b,["displayName"],c)}(c,b),b}(a);return d=cO("fileSearchStores",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["name"]);return null!=c&&cP(b,["_url","name"],c),b}(a);return d=cO("{name}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["_url","name"],c);let d=cQ(a,["config"]);return null!=d&&function(a,b){let c=cQ(a,["force"]);void 0!==b&&null!=c&&cP(b,["_query","force"],c)}(d,b),b}(a);d=cO("{name}",f._url),e=f._query,delete f._url,delete f._query,await this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["config"]);return null!=c&&function(a,b){let c=cQ(a,["pageSize"]);void 0!==b&&null!=c&&cP(b,["_query","pageSize"],c);let d=cQ(a,["pageToken"]);void 0!==b&&null!=d&&cP(b,["_query","pageToken"],d)}(c,b),b}(a);return d=cO("fileSearchStores",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["nextPageToken"]);null!=d&&cP(b,["nextPageToken"],d);let e=cQ(a,["fileSearchStores"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["fileSearchStores"],a)}return b}(a),c=new c8;return Object.assign(c,b),c})}}async uploadToFileSearchStoreInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["fileSearchStoreName"]);null!=c&&cP(b,["_url","file_search_store_name"],c);let d=cQ(a,["config"]);return null!=d&&function(a,b){let c=cQ(a,["mimeType"]);void 0!==b&&null!=c&&cP(b,["mimeType"],c);let d=cQ(a,["displayName"]);void 0!==b&&null!=d&&cP(b,["displayName"],d);let e=cQ(a,["customMetadata"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["customMetadata"],a)}let f=cQ(a,["chunkingConfig"]);void 0!==b&&null!=f&&cP(b,["chunkingConfig"],f)}(d,b),b}(a);return d=cO("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["sdkHttpResponse"]);return null!=c&&cP(b,["sdkHttpResponse"],c),b}(a),c=new c9;return Object.assign(c,b),c})}}async importFile(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=cQ(a,["fileSearchStoreName"]);null!=c&&cP(b,["_url","file_search_store_name"],c);let d=cQ(a,["fileName"]);null!=d&&cP(b,["fileName"],d);let e=cQ(a,["config"]);return null!=e&&function(a,b){let c=cQ(a,["customMetadata"]);if(void 0!==b&&null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP(b,["customMetadata"],a)}let d=cQ(a,["chunkingConfig"]);void 0!==b&&null!=d&&cP(b,["chunkingConfig"],d)}(e,b),b}(a);return d=cO("{file_search_store_name}:importFile",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=cQ(a,["name"]);null!=c&&cP(b,["name"],c);let d=cQ(a,["metadata"]);null!=d&&cP(b,["metadata"],d);let e=cQ(a,["done"]);null!=e&&cP(b,["done"],e);let f=cQ(a,["error"]);null!=f&&cP(b,["error"],f);let g=cQ(a,["response"]);return null!=g&&cP(b,["response"],function(a){let b={},c=cQ(a,["sdkHttpResponse"]);null!=c&&cP(b,["sdkHttpResponse"],c);let d=cQ(a,["parent"]);null!=d&&cP(b,["parent"],d);let e=cQ(a,["documentName"]);return null!=e&&cP(b,["documentName"],e),b}(g)),b}(a),c=new da;return Object.assign(c,b),c})}}}let eI="x-goog-api-key",eJ="https://www.googleapis.com/auth/cloud-platform";class eK{constructor(a){if(void 0!==a.apiKey){this.apiKey=a.apiKey;return}let b=function(a){let b;if(!a)return{scopes:[eJ]};if((b=a).scopes){if("string"==typeof b.scopes&&b.scopes!==eJ||Array.isArray(b.scopes)&&0>b.scopes.indexOf(eJ))throw Error(`Invalid auth scopes. Scopes must include: ${eJ}`)}else b.scopes=[eJ];return b}(a.googleAuthOptions);this.googleAuth=new cG.kF(b)}async addAuthHeaders(a,b){if(void 0!==this.apiKey){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(a);return}return this.addGoogleAuthHeaders(a,b)}addKeyHeader(a){if(null===a.get(eI)){if(void 0===this.apiKey)throw Error("Trying to set API key header but apiKey is not set");a.append(eI,this.apiKey)}}async addGoogleAuthHeaders(a,b){if(void 0===this.googleAuth)throw Error("Trying to set google-auth headers but googleAuth is unset");for(let[c,d]of(await this.googleAuth.getRequestHeaders(b)))null===a.get(c)&&a.append(c,d)}}class eL{async download(a,b){if(a.downloadPath){let c=await eM(a,b);if(c instanceof cT){let b=(0,cH.createWriteStream)(a.downloadPath);cJ.Readable.fromWeb(c.responseInternal.body).pipe(b),await (0,cK.finished)(b)}else try{await (0,cI.writeFile)(a.downloadPath,c,{encoding:"base64"})}catch(b){throw Error(`Failed to write file to ${a.downloadPath}: ${b}`)}}}}async function eM(a,b){var c,d,e;let f=dG(a.file);if(void 0!==f)return await b.request({path:`files/${f}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:null==(c=a.config)?void 0:c.httpOptions,abortSignal:null==(d=a.config)?void 0:d.abortSignal});if(dE(a.file)){let b=null==(e=a.file.video)?void 0:e.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download generated video, Uri or videoBytes not found.")}if(dF(a.file)){let b=a.file.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download video, Uri or videoBytes not found.")}throw Error("Unsupported file type")}class eN{create(a,b,c){return new eO(a,b,c)}}class eO{constructor(a,b,c){this.url=a,this.headers=b,this.callbacks=c}connect(){this.ws=new cL(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(a){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(a)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}function eP(a,b){let c={},d=cQ(a,["sdkHttpResponse"]);null!=d&&cP(c,["sdkHttpResponse"],d);let e=cQ(a,["name"]);null!=e&&cP(c,["name"],e);let f=cQ(a,["state"]);null!=f&&cP(c,["state"],dD(f));let g=cQ(a,["createTime"]);null!=g&&cP(c,["createTime"],g);let h=cQ(a,["tuningTask","startTime"]);null!=h&&cP(c,["startTime"],h);let i=cQ(a,["tuningTask","completeTime"]);null!=i&&cP(c,["endTime"],i);let j=cQ(a,["updateTime"]);null!=j&&cP(c,["updateTime"],j);let k=cQ(a,["description"]);null!=k&&cP(c,["description"],k);let l=cQ(a,["baseModel"]);null!=l&&cP(c,["baseModel"],l);let m=cQ(a,["_self"]);return null!=m&&cP(c,["tunedModel"],function(a,b){let c={},d=cQ(a,["name"]);null!=d&&cP(c,["model"],d);let e=cQ(a,["name"]);return null!=e&&cP(c,["endpoint"],e),c}(m)),c}function eQ(a,b){let c={},d=cQ(a,["sdkHttpResponse"]);null!=d&&cP(c,["sdkHttpResponse"],d);let e=cQ(a,["name"]);null!=e&&cP(c,["name"],e);let f=cQ(a,["state"]);null!=f&&cP(c,["state"],dD(f));let g=cQ(a,["createTime"]);null!=g&&cP(c,["createTime"],g);let h=cQ(a,["startTime"]);null!=h&&cP(c,["startTime"],h);let i=cQ(a,["endTime"]);null!=i&&cP(c,["endTime"],i);let j=cQ(a,["updateTime"]);null!=j&&cP(c,["updateTime"],j);let k=cQ(a,["error"]);null!=k&&cP(c,["error"],k);let l=cQ(a,["description"]);null!=l&&cP(c,["description"],l);let m=cQ(a,["baseModel"]);null!=m&&cP(c,["baseModel"],m);let n=cQ(a,["tunedModel"]);null!=n&&cP(c,["tunedModel"],n);let o=cQ(a,["preTunedModel"]);null!=o&&cP(c,["preTunedModel"],o);let p=cQ(a,["supervisedTuningSpec"]);null!=p&&cP(c,["supervisedTuningSpec"],p);let q=cQ(a,["preferenceOptimizationSpec"]);null!=q&&cP(c,["preferenceOptimizationSpec"],q);let r=cQ(a,["tuningDataStats"]);null!=r&&cP(c,["tuningDataStats"],r);let s=cQ(a,["encryptionSpec"]);null!=s&&cP(c,["encryptionSpec"],s);let t=cQ(a,["partnerModelTuningSpec"]);null!=t&&cP(c,["partnerModelTuningSpec"],t);let u=cQ(a,["customBaseModel"]);null!=u&&cP(c,["customBaseModel"],u);let v=cQ(a,["experiment"]);null!=v&&cP(c,["experiment"],v);let w=cQ(a,["labels"]);null!=w&&cP(c,["labels"],w);let x=cQ(a,["outputUri"]);null!=x&&cP(c,["outputUri"],x);let y=cQ(a,["pipelineJob"]);null!=y&&cP(c,["pipelineJob"],y);let z=cQ(a,["serviceAccount"]);null!=z&&cP(c,["serviceAccount"],z);let A=cQ(a,["tunedModelDisplayName"]);null!=A&&cP(c,["tunedModelDisplayName"],A);let B=cQ(a,["veoTuningSpec"]);return null!=B&&cP(c,["veoTuningSpec"],B),c}function eR(a,b){let c={},d=cQ(a,["gcsUri"]);null!=d&&cP(c,["validationDatasetUri"],d);let e=cQ(a,["vertexDatasetResource"]);return null!=e&&cP(c,["validationDatasetUri"],e),c}class eS extends cN{constructor(a){super(),this.apiClient=a,this.get=async a=>await this.getInternal(a),this.list=async(a={})=>new dR(ag.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(a),a),this.tune=async a=>{var b;if(this.apiClient.isVertexAI())if(a.baseModel.startsWith("projects/")){let c={tunedModelName:a.baseModel};(null==(b=a.config)?void 0:b.preTunedModelCheckpointId)&&(c.checkpointId=a.config.preTunedModelCheckpointId);let d=Object.assign(Object.assign({},a),{preTunedModel:c});return d.baseModel=void 0,await this.tuneInternal(d)}else{let b=Object.assign({},a);return await this.tuneInternal(b)}{let b=Object.assign({},a),c=await this.tuneMldevInternal(b),d="";return void 0!==c.metadata&&void 0!==c.metadata.tunedModel?d=c.metadata.tunedModel:void 0!==c.name&&c.name.includes("/operations/")&&(d=c.name.split("/operations/")[0]),{name:d,state:C.JOB_STATE_QUEUED}}}}async getInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(a,["name"]);return null!=d&&cP(c,["_url","name"],d),c}(a);return f=cO("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>eQ(a))}{let b=function(a,b){let c={},d=cQ(a,["name"]);return null!=d&&cP(c,["_url","name"],d),c}(a);return f=cO("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>eP(a))}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(a,["config"]);return null!=d&&function(a,b,c){let d=cQ(a,["pageSize"]);void 0!==b&&null!=d&&cP(b,["_query","pageSize"],d);let e=cQ(a,["pageToken"]);void 0!==b&&null!=e&&cP(b,["_query","pageToken"],e);let f=cQ(a,["filter"]);void 0!==b&&null!=f&&cP(b,["_query","filter"],f)}(d,c),c}(a);return f=cO("tuningJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=cQ(a,["sdkHttpResponse"]);null!=d&&cP(c,["sdkHttpResponse"],d);let e=cQ(a,["nextPageToken"]);null!=e&&cP(c,["nextPageToken"],e);let f=cQ(a,["tuningJobs"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>eQ(a))),cP(c,["tuningJobs"],a)}return c}(a),c=new c4;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=cQ(a,["config"]);return null!=d&&function(a,b,c){let d=cQ(a,["pageSize"]);void 0!==b&&null!=d&&cP(b,["_query","pageSize"],d);let e=cQ(a,["pageToken"]);void 0!==b&&null!=e&&cP(b,["_query","pageToken"],e);let f=cQ(a,["filter"]);void 0!==b&&null!=f&&cP(b,["_query","filter"],f)}(d,c),c}(a);return f=cO("tunedModels",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=cQ(a,["sdkHttpResponse"]);null!=d&&cP(c,["sdkHttpResponse"],d);let e=cQ(a,["nextPageToken"]);null!=e&&cP(c,["nextPageToken"],e);let f=cQ(a,["tunedModels"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>eP(a))),cP(c,["tuningJobs"],a)}return c}(a),c=new c4;return Object.assign(c,b),c})}}async cancel(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=cQ(a,["name"]);return null!=d&&cP(c,["_url","name"],d),c}(a);f=cO("{name}:cancel",d._url),g=d._query,delete d._url,delete d._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}else{let b=function(a,b){let c={},d=cQ(a,["name"]);return null!=d&&cP(c,["_url","name"],d),c}(a);f=cO("{name}:cancel",b._url),g=b._query,delete b._url,delete b._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal})}}async tuneInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=cQ(a,["baseModel"]);null!=d&&cP(c,["baseModel"],d);let e=cQ(a,["preTunedModel"]);null!=e&&cP(c,["preTunedModel"],e);let f=cQ(a,["trainingDataset"]);null!=f&&function(a,b,c){let d=cQ(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=cQ(a,["gcsUri"]);void 0!==b&&null!=c&&cP(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===d){let c=cQ(a,["gcsUri"]);void 0!==b&&null!=c&&cP(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let e=cQ(c,["config","method"]);if(void 0===e&&(e="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===e){let c=cQ(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&cP(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===e){let c=cQ(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&cP(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(void 0!==cQ(a,["examples"]))throw Error("examples parameter is not supported in Vertex AI.")}(f,c,b);let g=cQ(a,["config"]);return null!=g&&function(a,b,c){let d=cQ(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=cQ(a,["validationDataset"]);void 0!==b&&null!=c&&cP(b,["supervisedTuningSpec"],eR(c))}else if("PREFERENCE_TUNING"===d){let c=cQ(a,["validationDataset"]);void 0!==b&&null!=c&&cP(b,["preferenceOptimizationSpec"],eR(c))}let e=cQ(a,["tunedModelDisplayName"]);void 0!==b&&null!=e&&cP(b,["tunedModelDisplayName"],e);let f=cQ(a,["description"]);void 0!==b&&null!=f&&cP(b,["description"],f);let g=cQ(c,["config","method"]);if(void 0===g&&(g="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===g){let c=cQ(a,["epochCount"]);void 0!==b&&null!=c&&cP(b,["supervisedTuningSpec","hyperParameters","epochCount"],c)}else if("PREFERENCE_TUNING"===g){let c=cQ(a,["epochCount"]);void 0!==b&&null!=c&&cP(b,["preferenceOptimizationSpec","hyperParameters","epochCount"],c)}let h=cQ(c,["config","method"]);if(void 0===h&&(h="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===h){let c=cQ(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&cP(b,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c)}else if("PREFERENCE_TUNING"===h){let c=cQ(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&cP(b,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],c)}let i=cQ(c,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let c=cQ(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&cP(b,["supervisedTuningSpec","exportLastCheckpointOnly"],c)}else if("PREFERENCE_TUNING"===i){let c=cQ(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&cP(b,["preferenceOptimizationSpec","exportLastCheckpointOnly"],c)}let j=cQ(c,["config","method"]);if(void 0===j&&(j="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===j){let c=cQ(a,["adapterSize"]);void 0!==b&&null!=c&&cP(b,["supervisedTuningSpec","hyperParameters","adapterSize"],c)}else if("PREFERENCE_TUNING"===j){let c=cQ(a,["adapterSize"]);void 0!==b&&null!=c&&cP(b,["preferenceOptimizationSpec","hyperParameters","adapterSize"],c)}if(void 0!==cQ(a,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==cQ(a,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");let k=cQ(a,["labels"]);void 0!==b&&null!=k&&cP(b,["labels"],k);let l=cQ(a,["beta"]);void 0!==b&&null!=l&&cP(b,["preferenceOptimizationSpec","hyperParameters","beta"],l)}(g,c,b),c}(a,a);return d=cO("tuningJobs",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>eQ(a))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=cQ(a,["baseModel"]);null!=d&&cP(c,["baseModel"],d);let e=cQ(a,["preTunedModel"]);null!=e&&cP(c,["preTunedModel"],e);let f=cQ(a,["trainingDataset"]);null!=f&&function(a,b){if(void 0!==cQ(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==cQ(a,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let c=cQ(a,["examples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),cP({},["examples","examples"],a)}}(f);let g=cQ(a,["config"]);return null!=g&&function(a,b,c){if(void 0!==cQ(a,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let d=cQ(a,["tunedModelDisplayName"]);if(void 0!==b&&null!=d&&cP(b,["displayName"],d),void 0!==cQ(a,["description"]))throw Error("description parameter is not supported in Gemini API.");let e=cQ(a,["epochCount"]);void 0!==b&&null!=e&&cP(b,["tuningTask","hyperparameters","epochCount"],e);let f=cQ(a,["learningRateMultiplier"]);if(null!=f&&cP({},["tuningTask","hyperparameters","learningRateMultiplier"],f),void 0!==cQ(a,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==cQ(a,["preTunedModelCheckpointId"]))throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==cQ(a,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let g=cQ(a,["batchSize"]);void 0!==b&&null!=g&&cP(b,["tuningTask","hyperparameters","batchSize"],g);let h=cQ(a,["learningRate"]);if(void 0!==b&&null!=h&&cP(b,["tuningTask","hyperparameters","learningRate"],h),void 0!==cQ(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");if(void 0!==cQ(a,["beta"]))throw Error("beta parameter is not supported in Gemini API.")}(g,c),c}(a);return d=cO("tunedModels",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a,b){let c={},d=cQ(a,["sdkHttpResponse"]);null!=d&&cP(c,["sdkHttpResponse"],d);let e=cQ(a,["name"]);null!=e&&cP(c,["name"],e);let f=cQ(a,["metadata"]);null!=f&&cP(c,["metadata"],f);let g=cQ(a,["done"]);null!=g&&cP(c,["done"],g);let h=cQ(a,["error"]);return null!=h&&cP(c,["error"],h),c})(a))}}}let eT="x-goog-upload-status";async function eU(a,b,c){var d;let e=await eW(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[eT])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return f.file}async function eV(a,b,c){var d;let e=await eW(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[eT])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let g=cS(f),h=new dh;return Object.assign(h,g),h}async function eW(a,b,c){var d,e;let f=0,g=0,h=new cT(new Response),i="upload";for(f=a.size;g<f;){let j=Math.min(8388608,f-g),k=a.slice(g,g+j);g+j>=f&&(i+=", finalize");let l=0,m=1e3;for(;l<3&&(null==(d=null==(h=await c.request({path:"",body:k,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":i,"X-Goog-Upload-Offset":String(g),"Content-Length":String(j)}}}))?void 0:h.headers)||!d[eT]);)l++,await eY(m),m*=2;if(g+=j,(null==(e=null==h?void 0:h.headers)?void 0:e[eT])!=="active")break;if(f<=g)throw Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function eX(a){return{size:a.size,type:a.type}}function eY(a){return new Promise(b=>setTimeout(b,a))}class eZ{async stat(a){let b={size:0,type:void 0};return"string"==typeof a?(b.size=(await cI.stat(a)).size,b.type=this.inferMimeType(a),b):await eX(a)}async upload(a,b,c){return"string"==typeof a?await this.uploadFileFromPath(a,b,c):eU(a,b,c)}async uploadToFileSearchStore(a,b,c){return"string"==typeof a?await this.uploadFileToFileSearchStoreFromPath(a,b,c):eV(a,b,c)}inferMimeType(a){return({aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"})[a.slice(a.lastIndexOf(".")+1).toLowerCase()]}async uploadFileFromPath(a,b,c){var d;let e=await this.uploadFileFromPathInternal(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[eT])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return f.file}async uploadFileToFileSearchStoreFromPath(a,b,c){var d;let e=await this.uploadFileFromPathInternal(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[eT])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let g=cS(f),h=new dh;return Object.assign(h,g),h}async uploadFileFromPathInternal(a,b,c){var d,e;let f,g=0,h=0,i=new cT(new Response),j="upload",k=cM.basename(a);try{if(!(f=await cI.open(a,"r")))throw Error("Failed to open file");for(g=(await f.stat()).size;h<g;){let a=Math.min(8388608,g-h);h+a>=g&&(j+=", finalize");let l=new Uint8Array(a),{bytesRead:m}=await f.read(l,0,a,h);if(m!==a)throw Error(`Failed to read ${a} bytes from file at offset ${h}. bytes actually read: ${m}`);let n=new Blob([l]),o=0,p=1e3;for(;o<3&&(null==(d=null==(i=await c.request({path:"",body:n,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m),"X-Goog-Upload-File-Name":k}}}))?void 0:i.headers)||!d[eT]);)o++,await eY(p),p*=2;if(h+=m,(null==(e=null==i?void 0:i.headers)?void 0:e[eT])!=="active")break;if(g<=h)throw Error("All content has been uploaded, but the upload status is not finalized.")}return i}finally{f&&await f.close()}}}class e${constructor(a){var b,c,f,g,h,i;if((a.project||a.location)&&a.apiKey)throw Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=null!=(c=null!=(b=a.vertexai)?b:function(a){var b;return void 0!==(b=e_(a))&&"true"===b.toLowerCase()}("GOOGLE_GENAI_USE_VERTEXAI"))&&c;let j=function(){let a=e_("GOOGLE_API_KEY"),b=e_("GEMINI_API_KEY");return a&&b&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),a||b||void 0}(),k=e_("GOOGLE_CLOUD_PROJECT"),l=e_("GOOGLE_CLOUD_LOCATION");this.apiKey=null!=(f=a.apiKey)?f:j,this.project=null!=(g=a.project)?g:k,this.location=null!=(h=a.location)?h:l,a.vertexai&&((null==(i=a.googleAuthOptions)?void 0:i.credentials)&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(k||l)&&a.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(a.project||a.location)&&j?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(k||l)&&j&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),this.location||this.apiKey||(this.location="global"));let m=function(a,b,c,f){return(null==a?void 0:a.baseUrl)?a.baseUrl:b?null!=e?e:c:null!=d?d:f}(a.httpOptions,a.vertexai,e_("GOOGLE_VERTEX_BASE_URL"),e_("GOOGLE_GEMINI_BASE_URL"));m&&(a.httpOptions?a.httpOptions.baseUrl=m:a.httpOptions={baseUrl:m}),this.apiVersion=a.apiVersion;let n=new eK({apiKey:this.apiKey,googleAuthOptions:a.googleAuthOptions});this.apiClient=new en({auth:n,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:a.httpOptions,userAgentExtra:"gl-node/"+process.version,uploader:new eZ,downloader:new eL}),this.models=new eD(this.apiClient),this.live=new ew(this.apiClient,n,new eN),this.batches=new dS(this.apiClient),this.chats=new d$(this.models,this.apiClient),this.caches=new dU(this.apiClient),this.files=new d1(this.apiClient),this.operations=new eE(this.apiClient),this.authTokens=new eF(this.apiClient),this.tunings=new eS(this.apiClient),this.fileSearchStores=new eH(this.apiClient)}}function e_(a){var b,c,d;return null!=(d=null==(c=null==(b=null==process?void 0:process.env)?void 0:b[a])?void 0:c.trim())?d:void 0}let e0=process.env.API_KEY||"",e1=null;e0&&(e1=new e$({apiKey:e0}));let e2=async a=>{if(!e1)return"My Awesome Story";try{let b=`
      I have a video edited from these clips: ${a.join(", ")}.
      Give me a single, short, punchy, fun, "Main Character Energy" title for this video.
      Do not add quotes. Max 5 words.
    `,c=await e1.models.generateContent({model:"gemini-2.5-flash",contents:b});return c.text?.trim()||"Main Character Energy"}catch(a){return console.error("Gemini generation error:",a),"Main Character Energy"}},e3=()=>(0,ah.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/90 backdrop-blur-sm rounded-2xl z-10",children:(0,ah.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,ah.jsxs)("div",{className:"relative w-20 h-20",children:[(0,ah.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-vireo-teal/30"}),(0,ah.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-vireo-teal border-r-vireo-pink animate-spin"}),(0,ah.jsx)("div",{className:"absolute inset-3 rounded-full bg-gradient-to-br from-vireo-teal to-vireo-pink animate-pulse"}),(0,ah.jsx)("div",{className:"absolute inset-6 rounded-full bg-white"})]}),(0,ah.jsxs)("div",{className:"text-center",children:[(0,ah.jsx)("p",{className:"text-white font-bold text-lg mb-1",children:"Loading your video..."}),(0,ah.jsx)("p",{className:"text-gray-400 text-sm",children:"This won't take long "})]})]})}),e4=({clips:a,videoUrl:b,onReset:c,onViewGallery:d})=>{let[e,f]=(0,ai.useState)("Your Vireo Story"),[g,h]=(0,ai.useState)(null),[i,j]=(0,ai.useState)(!0),k=b||(a.length>0?a[0].previewUrl:"");(0,ai.useEffect)(()=>{(async()=>{let b=a.map(a=>a.name);f(await e2(b))})()},[a]),(0,ai.useEffect)(()=>{b&&j(!0)},[b]),(0,ai.useEffect)(()=>{b&&!g&&fetch(b).then(a=>a.blob()).then(a=>h(a)).catch(a=>console.error("Failed to cache video:",a))},[b,g]);let l=async()=>{if(!navigator.canShare)return void alert("Sharing not supported on this device");try{let a;if(g)a=g;else{let c=await fetch(b);a=await c.blob()}let c=new File([a],"vireo_video.mp4",{type:"video/mp4"});navigator.canShare({files:[c]})?await navigator.share({files:[c],title:"My Vireo Story",text:"Check out this video I made with Vireo! #MainCharacterEnergy"}):alert("File sharing not supported")}catch(a){console.log("Share failed:",a)}};return(0,ah.jsxs)("div",{className:"w-full max-w-4xl mx-auto animate-fade-in pb-12",children:[(0,ah.jsxs)("div",{className:"text-center mb-8",children:[(0,ah.jsx)("h2",{className:"text-3xl md:text-4xl font-extrabold text-vireo-dark mb-2 dark:text-white",children:"Main character unlocked. "}),(0,ah.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Your story is ready to fly."})]}),(0,ah.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl overflow-hidden border-4 border-vireo-teal dark:border-vireo-teal/50 p-2 md:p-4 mb-8 max-w-md mx-auto",children:(0,ah.jsxs)("div",{className:"relative aspect-[9/16] bg-black rounded-2xl overflow-hidden group",children:[i&&(0,ah.jsx)(e3,{}),(0,ah.jsx)("video",{src:k,className:"w-full h-full object-contain",controls:!0,autoPlay:!0,loop:!0,playsInline:!0,onCanPlayThrough:()=>j(!1),onLoadedData:()=>j(!1)})]})}),(0,ah.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-center items-center",children:[(0,ah.jsxs)(ax,{onClick:l,variant:"secondary",size:"lg",className:"w-full md:w-auto",children:[(0,ah.jsx)(cE,{className:"w-5 h-5"}),"Post on Instagram"]}),(0,ah.jsxs)(ax,{onClick:()=>{let a=document.createElement("a");a.href=k,a.download=`Vireo_Edit_${Date.now()}.mp4`,document.body.appendChild(a),a.click(),document.body.removeChild(a)},variant:"primary",size:"lg",className:"w-full md:w-auto",children:[(0,ah.jsx)(cF,{className:"w-5 h-5"}),"Download Video"]})]}),(0,ah.jsxs)("div",{className:"mt-8 text-center",children:[(0,ah.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-vireo-teal underline text-sm",children:"Make another one"}),(0,ah.jsx)("div",{className:"mt-3",children:(0,ah.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-vireo-teal underline text-sm",children:"View gallery"})})]})]})},e5="vireo_video_renders",e6={saveVideoRender(a){let b=this.getVideoRenders(a.userId);b.push(a),this._saveToStorage(b)},getVideoRenders(a){return this._loadFromStorage().filter(b=>b.userId===a)},updateVideoStatus(a,b){let c=this._loadFromStorage(),d=c.find(b=>b.id===a);d&&(d.status=b,this._saveToStorage(c))},getVideoRender(a){return this._loadFromStorage().find(b=>b.id===a)},deleteVideoRender(a){let b=this._loadFromStorage().filter(b=>b.id!==a);this._saveToStorage(b)},_loadFromStorage(){try{let a=localStorage.getItem(e5);return a?JSON.parse(a):[]}catch(a){return console.error("Failed to load video renders from storage:",a),[]}},_saveToStorage(a){try{localStorage.setItem(e5,JSON.stringify(a))}catch(a){console.error("Failed to save video renders to storage:",a)}}},e7=as("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),e8=as("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),e9=as("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),fa=as("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),fb=as("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),fc=({onCreateNew:a,onViewVideo:b})=>{let{user:c}=(0,ak.Jd)(),[d,e]=(0,ai.useState)([]),[f,g]=(0,ai.useState)(new Set);(0,ai.useEffect)(()=>{c&&h()},[c]);let h=()=>{if(!c)return;let a=e6.getVideoRenders(c.id);a.sort((a,b)=>b.createdAt-a.createdAt),e(a),a.forEach(a=>{"generating"===a.status&&i(a.id,a.filename,a.videoUrl)})},i=(a,b,c)=>{if(f.has(a))return;g(b=>new Set(b).add(a));let d=setInterval(async()=>{(await aC.checkVideoStatus(b,c)).ready&&(e6.updateVideoStatus(a,"completed"),h(),clearInterval(d),g(b=>{let c=new Set(b);return c.delete(a),c}))},5e3);setTimeout(()=>{clearInterval(d),g(b=>{let c=new Set(b);return c.delete(a),c})},6e5)};return(0,ah.jsxs)("div",{className:"w-full max-w-6xl mx-auto px-4 py-8 animate-fade-in",children:[(0,ah.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,ah.jsxs)("div",{children:[(0,ah.jsx)("h1",{className:"text-3xl md:text-4xl font-black text-vireo-dark dark:text-white mb-2",children:"Your Videos"}),(0,ah.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage and view all your Vireo creations"})]}),(0,ah.jsxs)(ax,{onClick:a,variant:"primary",size:"lg",className:"flex items-center gap-2",children:[(0,ah.jsx)(aA,{className:"w-5 h-5"}),"Create New"]})]}),0===d.length?(0,ah.jsxs)("div",{className:"text-center py-16",children:[(0,ah.jsx)(fa,{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),(0,ah.jsx)("h3",{className:"text-xl font-bold text-gray-400 dark:text-gray-500 mb-2",children:"No videos yet"}),(0,ah.jsx)("p",{className:"text-gray-400 dark:text-gray-500 mb-6",children:"Start creating your first Vireo story!"}),(0,ah.jsx)(ax,{onClick:a,variant:"primary",children:"Create Your First Video"})]}):(0,ah.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(a=>(0,ah.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl overflow-hidden border-2 border-gray-100 dark:border-gray-700 hover:border-vireo-teal dark:hover:border-vireo-teal transition-all duration-300 shadow-sm hover:shadow-xl",children:[(0,ah.jsxs)("div",{className:"aspect-video bg-gradient-to-br from-vireo-teal/20 to-vireo-purple/20 dark:from-vireo-teal/10 dark:to-vireo-purple/10 flex items-center justify-center relative group",children:[(0,ah.jsx)(fa,{className:"w-12 h-12 text-vireo-teal opacity-50"}),"completed"===a.status&&(0,ah.jsx)("button",{onClick:()=>b(a),className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all flex items-center justify-center",children:(0,ah.jsx)(fb,{className:"w-16 h-16 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),(0,ah.jsxs)("div",{className:"p-4",children:[(0,ah.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,ah.jsxs)("div",{className:"flex-1",children:[(0,ah.jsx)("h3",{className:"font-bold text-vireo-dark dark:text-white mb-1 truncate",children:a.clipNames.join(", ")||"Untitled Video"}),(0,ah.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(a.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})}),(0,ah.jsxs)("div",{className:"flex items-center justify-between",children:[(a=>{switch(a){case"generating":return(0,ah.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 rounded-full text-sm font-medium",children:[(0,ah.jsx)(e7,{className:"w-4 h-4 animate-spin"}),"Generating"]});case"completed":return(0,ah.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded-full text-sm font-medium",children:[(0,ah.jsx)(e8,{className:"w-4 h-4"}),"Completed"]});case"failed":return(0,ah.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 rounded-full text-sm font-medium",children:[(0,ah.jsx)(e9,{className:"w-4 h-4"}),"Failed"]})}})(a.status),"completed"===a.status&&(0,ah.jsx)("button",{onClick:()=>b(a),className:"text-vireo-teal hover:text-vireo-purple font-bold text-sm transition-colors",children:"View "})]})]})]},a.id))})]})},fd=({isCooking:a=!1,className:b=""})=>(0,ah.jsx)("div",{className:`relative ${b}`,children:(0,ah.jsx)("img",{src:"/vireo-animated-logo.svg",alt:"Vireo Bird",className:`w-full h-full object-contain ${a?"animate-pulse":""}`})}),fe=as("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ff=as("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),fg=as("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),fh="http://44.200.94.8:8000",fi={async createOrder(a){let b=await fetch(`${fh}/create-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,amount:9900,currency:"INR"})});if(!b.ok)throw Error((await b.json().catch(()=>({detail:b.statusText}))).detail||"Failed to create payment order");return b.json()},async verifyPayment(a,b,c,d){let e=await fetch(`${fh}/verify-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:a,razorpay_payment_id:b,razorpay_signature:c,userId:d})});if(!e.ok)throw Error((await e.json().catch(()=>({detail:e.statusText}))).detail||"Payment verification failed");return e.json()},openCheckout(a,b,c,d){if(!window.Razorpay)return void d(Error("Razorpay SDK not loaded. Please refresh the page."));let e={key:"rzp_test_Rn7o9oAiC8Caq8",amount:a.amount,currency:a.currency,name:"Vireo",description:"Unlimited Video Generation - Lifetime Access",order_id:a.id,handler:function(a){c({razorpay_payment_id:a.razorpay_payment_id,razorpay_order_id:a.razorpay_order_id,razorpay_signature:a.razorpay_signature})},prefill:{name:b.name,email:b.email||""},theme:{color:"#14B8A6"},modal:{ondismiss:function(){d(Error("Payment cancelled by user"))}}},f=new window.Razorpay(e);f.on("payment.failed",function(a){d(Error(a.error?.description||"Payment failed"))}),f.open()},loadScript:()=>new Promise(a=>{if(window.Razorpay)return void a(!0);let b=document.createElement("script");b.src="https://checkout.razorpay.com/v1/checkout.js",b.onload=()=>a(!0),b.onerror=()=>a(!1),document.body.appendChild(b)})},fj="vireo_user_quotas",fk={getUserQuota(a){let b=this._loadFromStorage(),c=b.find(b=>b.userId===a);if(c)return c;let d={userId:a,generationCount:0,isPremium:!1};return b.push(d),this._saveToStorage(b),d},canGenerate(a){let b=this.getUserQuota(a);return b.isPremium||b.generationCount<2},getRemainingGenerations(a){let b=this.getUserQuota(a);return b.isPremium?1/0:Math.max(0,2-b.generationCount)},incrementGenerationCount(a){let b=this._loadFromStorage(),c=b.find(b=>b.userId===a);if(c)return c.generationCount+=1,this._saveToStorage(b),c;let d={userId:a,generationCount:1,isPremium:!1};return b.push(d),this._saveToStorage(b),d},upgradeToPremium(a){let b=this._loadFromStorage(),c=b.find(b=>b.userId===a);return c?(c.isPremium=!0,c.premiumSince=Date.now()):(c={userId:a,generationCount:0,isPremium:!0,premiumSince:Date.now()},b.push(c)),this._saveToStorage(b),c},syncFromBackend(a,b){let c=this._loadFromStorage(),d=c.find(b=>b.userId===a);return d?(d.generationCount=Math.max(d.generationCount,b.generationCount),b.isPremium&&!d.isPremium&&(d.isPremium=!0,d.premiumSince=Date.now())):(d={userId:a,generationCount:b.generationCount,isPremium:b.isPremium,premiumSince:b.isPremium?Date.now():void 0},c.push(d)),this._saveToStorage(c),d},_loadFromStorage(){try{let a=localStorage.getItem(fj);return a?JSON.parse(a):[]}catch(a){return console.error("Failed to load quotas from storage:",a),[]}},_saveToStorage(a){try{localStorage.setItem(fj,JSON.stringify(a))}catch(a){console.error("Failed to save quotas to storage:",a)}}},fl=({isOpen:a,onClose:b,onPaymentSuccess:c,userId:d,userName:e,userEmail:f,remainingGenerations:g})=>{let[h,i]=(0,ai.useState)(!1),[j,k]=(0,ai.useState)(null);if(!a)return null;let l=async()=>{i(!0),k(null);try{if(!await fi.loadScript())throw Error("Failed to load payment gateway");let a=await fi.createOrder(d);fi.openCheckout(a,{name:e,email:f},async a=>{try{(await fi.verifyPayment(a.razorpay_order_id,a.razorpay_payment_id,a.razorpay_signature,d)).success?(fk.upgradeToPremium(d),c()):k("Payment verification failed. Please contact support.")}catch(a){k("Payment verification failed. Please contact support.")}i(!1)},a=>{"Payment cancelled by user"!==a.message&&k(a.message||"Payment failed. Please try again."),i(!1)})}catch(a){k(a.message||"Failed to initiate payment"),i(!1)}};return(0,ah.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,ah.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:b}),(0,ah.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl animate-fade-in",children:[(0,ah.jsx)("button",{onClick:b,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,ah.jsx)(az,{className:"w-5 h-5 text-gray-500"})}),(0,ah.jsxs)("div",{className:"text-center",children:[(0,ah.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-vireo-teal to-vireo-purple rounded-full flex items-center justify-center mx-auto mb-6",children:(0,ah.jsx)(fe,{className:"w-10 h-10 text-white"})}),(0,ah.jsx)("h2",{className:"text-2xl font-black text-vireo-dark dark:text-white mb-2",children:g<=0?"You've used all free videos! \uD83C\uDFAC":"Upgrade to Unlimited"}),(0,ah.jsx)("p",{className:"text-gray-500 mb-6",children:g<=0?"You've enjoyed your 2 free videos.":`You have ${g} free videos left.`}),(0,ah.jsxs)("div",{className:"bg-vireo-teal/10 rounded-2xl p-6 mb-6",children:[(0,ah.jsxs)("div",{className:"text-4xl font-black text-vireo-teal mb-1",children:["",99]}),(0,ah.jsx)("div",{className:"text-sm text-gray-500",children:"One-time payment  Lifetime access"})]}),(0,ah.jsx)("ul",{className:"text-left space-y-3 mb-8",children:["Unlimited video generations","Priority processing","Support indie development "].map((a,b)=>(0,ah.jsxs)("li",{className:"flex items-center gap-3 text-gray-700 dark:text-gray-300",children:[(0,ah.jsx)("div",{className:"w-5 h-5 bg-vireo-teal/20 rounded-full flex items-center justify-center flex-shrink-0",children:(0,ah.jsx)(ff,{className:"w-3 h-3 text-vireo-teal"})}),a]},b))}),j&&(0,ah.jsx)("div",{className:"text-red-500 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:j}),(0,ah.jsx)(ax,{size:"lg",variant:"primary",className:"w-full text-lg",onClick:l,disabled:h,children:h?(0,ah.jsxs)(ah.Fragment,{children:[(0,ah.jsx)(fg,{className:"w-5 h-5 animate-spin mr-2"}),"Processing..."]}):"Upgrade Now "}),g>0&&(0,ah.jsx)("button",{onClick:b,className:"mt-4 text-sm text-gray-400 hover:text-gray-600 transition-colors",children:"Maybe later"})]})]})]})},fm=as("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),fn=({remainingGenerations:a,isPremium:b,onClick:c})=>{if(b)return(0,ah.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2 px-2 py-1 sm:px-3 sm:py-1.5 bg-gradient-to-r from-vireo-teal to-vireo-purple text-white rounded-full text-xs sm:text-sm font-bold",children:[(0,ah.jsx)(fe,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,ah.jsx)("span",{className:"hidden xs:inline",children:"Premium"}),(0,ah.jsx)("span",{className:"inline xs:hidden",children:"Pro"})]});let d=a<=0;return(0,ah.jsxs)("button",{onClick:c,className:`
                flex items-center gap-1.5 sm:gap-2 px-2 py-1 sm:px-3 sm:py-1.5 rounded-full text-xs sm:text-sm font-bold transition-all
                ${d?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/50":a<=2?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-900/50":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}
            `,title:d?"Upgrade to continue":`${a} of 2 free videos left`,children:[(0,ah.jsx)(fm,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),d?"Upgrade":`${a}/2`]})},fo=()=>{let{isSignedIn:a,isLoaded:b,user:c}=(0,ak.Jd)(),[d,e]=(0,ai.useState)(aw.LANDING),[f,g]=(0,ai.useState)([]),[h,i]=(0,ai.useState)(null),[j,k]=(0,ai.useState)(!1),[l,m]=(0,ai.useState)(!1),[n,o]=(0,ai.useState)(null),[p,q]=(0,ai.useState)(null),[r,s]=(0,ai.useState)(null),[t,u]=(0,ai.useState)(!1);(0,ai.useEffect)(()=>{b&&a&&c&&(s(fk.getUserQuota(c.id)),aC.getUserQuota(c.id).then(a=>{s(fk.syncFromBackend(c.id,a))}).catch(a=>{console.error("Failed to sync quota from backend:",a)}))},[b,a,c]),(0,ai.useEffect)(()=>{l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l]);let v=async(d,f,g,h)=>{if(b){if(!a||!c)return void alert("Please sign in to upload videos.");k(!0),e(aw.PROCESSING),(async()=>{try{let a,b;if("string"==typeof d)a=d,b=f;else{let c=await d;a=c.session_id,b=c.files}let j=await aC.generateVideo(a,b,h),l={id:j.filename,filename:j.filename,status:"generating",createdAt:Date.now(),clipNames:g,userId:c.id,videoUrl:j.video_url};e6.saveVideoRender(l),o(l),q(j.filename);let m=0,n=async()=>{m+=1;try{if((await aC.checkVideoStatus(j.filename,j.video_url)).ready){let a={...l,status:"completed",videoUrl:j.video_url||l.videoUrl},b=fk.incrementGenerationCount(c.id);s(b),aC.syncQuota(c.id,b.generationCount),e6.saveVideoRender(a),o(a),i(a.videoUrl||aC.getVideoUrl(a.filename)),k(!1),e(aw.RESULT);return}}catch(a){console.error("Error checking video status",a)}m<40?setTimeout(n,3e3):(k(!1),e(aw.DASHBOARD))};n()}catch(a){console.error("Error processing video:",a),await aC.logError(a),alert("Failed to start video generation. Please try again."),k(!1)}})()}},w=()=>{f.forEach(a=>URL.revokeObjectURL(a.previewUrl)),g([]),i(null),o(null),e(aw.LANDING)},x=()=>{e(aw.DASHBOARD)},y=()=>{u(!0)};return(0,ah.jsxs)("div",{className:"min-h-screen bg-vireo-offwhite font-sans text-vireo-dark overflow-x-hidden relative dark:bg-gray-900 dark:text-white transition-colors duration-300",children:[(0,ah.jsxs)("header",{className:"w-full p-3 sm:p-6 flex items-center justify-between max-w-7xl mx-auto z-50 relative",children:[(0,ah.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:w,children:[(0,ah.jsx)(fd,{className:"w-20 h-20 transform group-hover:rotate-12 transition-transform duration-300"}),(0,ah.jsx)("span",{className:"text-2xl font-black tracking-tight text-vireo-dark group-hover:text-vireo-teal transition-colors dark:text-white",children:"Vireo"})]}),(0,ah.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,ah.jsx)("button",{onClick:()=>{m(!l)},className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle Dark Mode",children:l?(0,ah.jsx)(at,{className:"w-6 h-6 text-yellow-400"}):(0,ah.jsx)(au,{className:"w-6 h-6 text-vireo-dark"})}),(0,ah.jsxs)(am,{children:[r&&(0,ah.jsx)(fn,{remainingGenerations:fk.getRemainingGenerations(c?.id||""),isPremium:r.isPremium,onClick:y}),(0,ah.jsx)("button",{onClick:x,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Go to Dashboard",title:"Dashboard",children:(0,ah.jsx)(av,{className:"w-6 h-6 text-vireo-dark dark:text-white"})})]}),(0,ah.jsx)(an,{children:(0,ah.jsx)(ak.hZ,{mode:"modal",children:(0,ah.jsx)("button",{className:"px-4 py-2 bg-vireo-teal text-white rounded-lg font-bold hover:bg-opacity-90 transition-all",children:"Sign In"})})}),(0,ah.jsx)(am,{children:(0,ah.jsx)(ak.uF,{})})]})]}),(0,ah.jsxs)("main",{className:"container mx-auto px-4 py-8 md:py-16 flex flex-col items-center justify-center min-h-[calc(100vh-100px)]",children:[d===aw.LANDING&&(0,ah.jsx)(aE,{onStartProcessing:v,isSignedIn:a,isProcessing:j,userId:c?.id,userName:c?.fullName||c?.firstName||c?.username||"User",userEmail:c?.primaryEmailAddress?.emailAddress,canGenerate:!r||fk.canGenerate(c?.id||""),onShowPaymentModal:y}),d===aw.PROCESSING&&(0,ah.jsx)(cD,{}),d===aw.DASHBOARD&&(0,ah.jsx)(fc,{onCreateNew:()=>{e(aw.LANDING)},onViewVideo:a=>{o(a),i(a.videoUrl||aC.getVideoUrl(a.filename)),e(aw.RESULT)}}),d===aw.RESULT&&(0,ah.jsx)(e4,{clips:f,videoUrl:h,onReset:w,onViewGallery:x})]}),c&&(0,ah.jsx)(fl,{isOpen:t,onClose:()=>u(!1),onPaymentSuccess:()=>{u(!1),c&&s(fk.getUserQuota(c.id))},userId:c.id,userName:c.fullName||c.firstName||c.username||"User",userEmail:c.primaryEmailAddress?.emailAddress,remainingGenerations:fk.getRemainingGenerations(c.id)}),(0,ah.jsx)("footer",{className:"w-full py-6 text-center text-sm text-gray-600 dark:text-gray-400",children:(0,ah.jsx)("p",{children:"Made with  by Noah and Rajat"})}),(0,ah.jsxs)("div",{className:"fixed top-0 left-0 w-full h-full pointer-events-none -z-10 overflow-hidden",children:[(0,ah.jsx)("div",{className:"absolute top-[-10%] left-[-5%] w-[400px] h-[400px] bg-vireo-teal rounded-full opacity-5 blur-3xl"}),(0,ah.jsx)("div",{className:"absolute bottom-[-10%] right-[-5%] w-[500px] h-[500px] bg-vireo-purple rounded-full opacity-5 blur-3xl"}),(0,ah.jsx)("div",{className:"absolute top-[40%] right-[10%] w-[200px] h-[200px] bg-vireo-pink rounded-full opacity-5 blur-3xl"})]})]})};function fp(){return(0,ah.jsx)(fo,{})}},29780:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AwsRequestSigner=void 0;let d=c(30911),e=c(4052),f="AWS4-HMAC-SHA256";class g{getCredentials;region;crypto;constructor(a,b){this.getCredentials=a,this.region=b,this.crypto=(0,e.createCrypto)()}async getRequestOptions(a){if(!a.url)throw RangeError('"url" is required in "amzOptions"');let b="object"==typeof a.data?JSON.stringify(a.data):a.data,c=a.url,e=a.method||"GET",f=a.body||b,g=a.headers,h=await this.getCredentials(),i=new URL(c);if("string"!=typeof f&&void 0!==f)throw TypeError(`'requestPayload' is expected to be a string if provided. Got: ${f}`);let k=await j({crypto:this.crypto,host:i.host,canonicalUri:i.pathname,canonicalQuerystring:i.search.slice(1),method:e,region:this.region,securityCredentials:h,requestPayload:f,additionalAmzHeaders:g}),l=d.Gaxios.mergeHeaders(k.amzDate?{"x-amz-date":k.amzDate}:{},{authorization:k.authorizationHeader,host:i.host},g||{});h.token&&d.Gaxios.mergeHeaders(l,{"x-amz-security-token":h.token});let m={url:c,method:e,headers:l};return void 0!==f&&(m.body=f),m}}async function h(a,b,c){return await a.signWithHmacSha256(b,c)}async function i(a,b,c,d,e){let f=await h(a,`AWS4${b}`,c),g=await h(a,f,d),i=await h(a,g,e);return await h(a,i,"aws4_request")}async function j(a){let b=d.Gaxios.mergeHeaders(a.additionalAmzHeaders),c=a.requestPayload||"",g=a.host.split(".")[0],j=new Date,k=j.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),l=j.toISOString().replace(/[-]/g,"").replace(/T.*/,"");a.securityCredentials.token&&b.set("x-amz-security-token",a.securityCredentials.token);let m=d.Gaxios.mergeHeaders({host:a.host},b.has("date")?{}:{"x-amz-date":k},b),n="",o=[...m.keys()].sort();o.forEach(a=>{n+=`${a}:${m.get(a)}
`});let p=o.join(";"),q=await a.crypto.sha256DigestHex(c),r=`${a.method.toUpperCase()}
${a.canonicalUri}
${a.canonicalQuerystring}
${n}
${p}
${q}`,s=`${l}/${a.region}/${g}/aws4_request`,t=`${f}
${k}
${s}
`+await a.crypto.sha256DigestHex(r),u=await i(a.crypto,a.securityCredentials.secretAccessKey,l,a.region,g),v=await h(a.crypto,u,t),w=`${f} Credential=${a.securityCredentials.accessKeyId}/${s}, SignedHeaders=${p}, Signature=${(0,e.fromArrayBufferToHex)(v)}`;return{amzDate:b.has("date")?void 0:k,authorizationHeader:w,canonicalQuerystring:a.canonicalQuerystring}}b.AwsRequestSigner=g},30896:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DefaultAwsSecurityCredentialsSupplier=void 0;let d=c(72449);class e{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(a){this.regionUrl=a.regionUrl,this.securityCredentialsUrl=a.securityCredentialsUrl,this.imdsV2SessionTokenUrl=a.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getAwsRegion(a){if(this.#d)return this.#d;let b=new Headers;if(!this.#d&&this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#e(a.transporter)),!this.regionUrl)throw RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let c={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:b};d.AuthClient.setMethodName(c,"getAwsRegion");let e=await a.transporter.request(c);return e.data.substr(0,e.data.length-1)}async getAwsSecurityCredentials(a){if(this.#f)return this.#f;let b=new Headers;this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#e(a.transporter));let c=await this.#g(b,a.transporter),d=await this.#h(c,b,a.transporter);return{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,token:d.Token}}async #e(a){let b={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return d.AuthClient.setMethodName(b,"#getImdsV2SessionToken"),(await a.request(b)).data}async #g(a,b){if(!this.securityCredentialsUrl)throw Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let c={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:a};return d.AuthClient.setMethodName(c,"#getAwsRoleName"),(await b.request(c)).data}async #h(a,b,c){let e={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${a}`,headers:b};return d.AuthClient.setMethodName(e,"#retrieveAwsSecurityCredentials"),(await c.request(e)).data}get #d(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get #f(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}}b.DefaultAwsSecurityCredentialsSupplier=e},30911:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.instance=b.Gaxios=b.GaxiosError=void 0,b.request=h;let f=c(81542);Object.defineProperty(b,"Gaxios",{enumerable:!0,get:function(){return f.Gaxios}});var g=c(78);async function h(a){return b.instance.request(a)}Object.defineProperty(b,"GaxiosError",{enumerable:!0,get:function(){return g.GaxiosError}}),e(c(31672),b),b.instance=new f.Gaxios},31672:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GaxiosInterceptorManager=void 0;class c extends Set{}b.GaxiosInterceptorManager=c},32852:(a,b,c)=>{"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.OAuth2Client=b.ClientAuthentication=b.CertificateFormat=b.CodeChallengeMethod=void 0;let g=c(30911),h=c(11723),i=c(27910),j=c(89158),k=c(21111),l=c(4052),m=c(72449),n=c(56455);!function(a){a.Plain="plain",a.S256="S256"}(d||(b.CodeChallengeMethod=d={})),function(a){a.PEM="PEM",a.JWK="JWK"}(e||(b.CertificateFormat=e={})),function(a){a.ClientSecretPost="ClientSecretPost",a.ClientSecretBasic="ClientSecretBasic",a.None="None"}(f||(b.ClientAuthentication=f={}));class o extends m.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=e.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(a={},b,c){super("object"==typeof a?a:{}),"object"!=typeof a&&(a={clientId:a,clientSecret:b,redirectUri:c}),this._clientId=a.clientId||a.client_id,this._clientSecret=a.clientSecret||a.client_secret,this.redirectUri=a.redirectUri||a.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...a.endpoints},this.clientAuthentication=a.clientAuthentication||f.ClientSecretPost,this.issuers=a.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(a={}){if(a.code_challenge_method&&!a.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");return a.response_type=a.response_type||"code",a.client_id=a.client_id||this._clientId,a.redirect_uri=a.redirect_uri||this.redirectUri,Array.isArray(a.scope)&&(a.scope=a.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+h.stringify(a)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let a=(0,l.createCrypto)(),b=a.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),c=(await a.sha256DigestBase64(b)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:b,codeChallenge:c}}getToken(a,b){let c="string"==typeof a?{code:a}:a;if(!b)return this.getTokenAsync(c);this.getTokenAsync(c).then(a=>b(null,a.tokens,a.res),a=>b(a,null,a.response))}async getTokenAsync(a){let b=this.endpoints.oauth2TokenUrl.toString(),c=new Headers,d={client_id:a.client_id||this._clientId,code_verifier:a.codeVerifier,code:a.code,grant_type:"authorization_code",redirect_uri:a.redirect_uri||this.redirectUri};if(this.clientAuthentication===f.ClientSecretBasic){let a=Buffer.from(`${this._clientId}:${this._clientSecret}`);c.set("authorization",`Basic ${a.toString("base64")}`)}this.clientAuthentication===f.ClientSecretPost&&(d.client_secret=this._clientSecret);let e={...o.RETRY_CONFIG,method:"POST",url:b,data:new URLSearchParams((0,k.removeUndefinedValuesInObject)(d)),headers:c};m.AuthClient.setMethodName(e,"getTokenAsync");let g=await this.transporter.request(e),h=g.data;return g.data&&g.data.expires_in&&(h.expiry_date=new Date().getTime()+1e3*g.data.expires_in,delete h.expires_in),this.emit("tokens",h),{tokens:h,res:g}}async refreshToken(a){if(!a)return this.refreshTokenNoCache(a);if(this.refreshTokenPromises.has(a))return this.refreshTokenPromises.get(a);let b=this.refreshTokenNoCache(a).then(b=>(this.refreshTokenPromises.delete(a),b),b=>{throw this.refreshTokenPromises.delete(a),b});return this.refreshTokenPromises.set(a,b),b}async refreshTokenNoCache(a){let b;if(!a)throw Error("No refresh token is set.");let c=this.endpoints.oauth2TokenUrl.toString(),d={refresh_token:a,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};try{let a={...o.RETRY_CONFIG,method:"POST",url:c,data:new URLSearchParams((0,k.removeUndefinedValuesInObject)(d))};m.AuthClient.setMethodName(a,"refreshTokenNoCache"),b=await this.transporter.request(a)}catch(a){throw a instanceof g.GaxiosError&&"invalid_grant"===a.message&&a.response?.data&&/ReAuth/i.test(a.response.data.error_description)&&(a.message=JSON.stringify(a.response.data)),a}let e=b.data;return b.data&&b.data.expires_in&&(e.expiry_date=new Date().getTime()+1e3*b.data.expires_in,delete e.expires_in),this.emit("tokens",e),{tokens:e,res:b}}refreshAccessToken(a){if(!a)return this.refreshAccessTokenAsync();this.refreshAccessTokenAsync().then(b=>a(null,b.credentials,b.res),a)}async refreshAccessTokenAsync(){let a=await this.refreshToken(this.credentials.refresh_token),b=a.tokens;return b.refresh_token=this.credentials.refresh_token,this.credentials=b,{credentials:this.credentials,res:a.res}}getAccessToken(a){if(!a)return this.getAccessTokenAsync();this.getAccessTokenAsync().then(b=>a(null,b.token,b.res),a)}async getAccessTokenAsync(){if(!(!this.credentials.access_token||this.isTokenExpiring()))return{token:this.credentials.access_token};{if(!this.credentials.refresh_token)if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token)return this.setCredentials(a),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let a=await this.refreshAccessTokenAsync();if(!a.credentials||a.credentials&&!a.credentials.access_token)throw Error("Could not refresh access token.");return{token:a.credentials.access_token,res:a.res}}}async getRequestHeaders(a){return(await this.getRequestMetadataAsync(a)).headers}async getRequestMetadataAsync(a){let b=this.credentials;if(!b.access_token&&!b.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if(b.access_token&&!this.isTokenExpiring()){b.token_type=b.token_type||"Bearer";let a=new Headers({authorization:b.token_type+" "+b.access_token});return{headers:this.addSharedMetadataHeaders(a)}}if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token){this.setCredentials(a);let b=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(b)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let c=null,d=null;try{d=(c=await this.refreshToken(b.refresh_token)).tokens}catch(a){throw a.response&&(403===a.response.status||404===a.response.status)&&(a.message=`Could not refresh access token: ${a.message}`),a}let e=this.credentials;e.token_type=e.token_type||"Bearer",d.refresh_token=e.refresh_token,this.credentials=d;let f=new Headers({authorization:e.token_type+" "+d.access_token});return{headers:this.addSharedMetadataHeaders(f),res:c.res}}static getRevokeTokenUrl(a){return new o().getRevokeTokenURL(a).toString()}getRevokeTokenURL(a){let b=new URL(this.endpoints.oauth2RevokeUrl);return b.searchParams.append("token",a),b}revokeToken(a,b){let c={...o.RETRY_CONFIG,url:this.getRevokeTokenURL(a).toString(),method:"POST"};if(m.AuthClient.setMethodName(c,"revokeToken"),!b)return this.transporter.request(c);this.transporter.request(c).then(a=>b(null,a),b)}revokeCredentials(a){if(!a)return this.revokeCredentialsAsync();this.revokeCredentialsAsync().then(b=>a(null,b),a)}async revokeCredentialsAsync(){let a=this.credentials.access_token;if(this.credentials={},a)return this.revokeToken(a);throw Error("No access token to revoke.")}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){try{let b=await this.getRequestMetadataAsync();return a.headers=g.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b.headers),this.apiKey&&a.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),f=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,g=c.config.data instanceof i.Readable,h=401===d||403===d;if(!b&&h&&!g&&e)return await this.refreshAccessTokenAsync(),this.requestAsync(a,!0);if(!b&&h&&!g&&f){let b=await this.processAndValidateRefreshHandler();return b?.access_token&&this.setCredentials(b),this.requestAsync(a,!0)}}throw d}}verifyIdToken(a,b){if(b&&"function"!=typeof b)throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(!b)return this.verifyIdTokenAsync(a);this.verifyIdTokenAsync(a).then(a=>b(null,a),b)}async verifyIdTokenAsync(a){if(!a.idToken)throw Error("The verifyIdToken method requires an ID Token");let b=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(a.idToken,b.certs,a.audience,this.issuers,a.maxExpiry)}async getTokenInfo(a){let{data:b}=await this.transporter.request({...o.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${a}`},url:this.endpoints.tokenInfoUrl.toString()}),c=Object.assign({expiry_date:new Date().getTime()+1e3*b.expires_in,scopes:b.scope.split(" ")},b);return delete c.expires_in,delete c.scope,c}getFederatedSignonCerts(a){if(!a)return this.getFederatedSignonCertsAsync();this.getFederatedSignonCertsAsync().then(b=>a(null,b.certs,b.res),a)}async getFederatedSignonCertsAsync(){let a,b,c=new Date().getTime(),d=(0,l.hasBrowserCrypto)()?e.JWK:e.PEM;if(this.certificateExpiry&&c<this.certificateExpiry.getTime()&&this.certificateCacheFormat===d)return{certs:this.certificateCache,format:d};switch(d){case e.PEM:b=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case e.JWK:b=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${d}`)}try{let c={...o.RETRY_CONFIG,url:b};m.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}let f=a?.headers.get("cache-control"),g=-1;if(f){let a=/max-age=(?<maxAge>[0-9]+)/.exec(f)?.groups?.maxAge;a&&(g=1e3*Number(a))}let h={};switch(d){case e.PEM:h=a.data;break;case e.JWK:for(let b of a.data.keys)h[b.kid]=b;break;default:throw Error(`Unsupported certificate format ${d}`)}let i=new Date;return this.certificateExpiry=-1===g?null:new Date(i.getTime()+g),this.certificateCache=h,this.certificateCacheFormat=d,{certs:h,format:d,res:a}}getIapPublicKeys(a){if(!a)return this.getIapPublicKeysAsync();this.getIapPublicKeysAsync().then(b=>a(null,b.pubkeys,b.res),a)}async getIapPublicKeysAsync(){let a,b=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let c={...o.RETRY_CONFIG,url:b};m.AuthClient.setMethodName(c,"getIapPublicKeysAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}return{pubkeys:a.data,res:a}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(a,b,c,d,e){let f,g,h=(0,l.createCrypto)();e||(e=o.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let i=a.split(".");if(3!==i.length)throw Error("Wrong number of segments in token: "+a);let k=i[0]+"."+i[1],m=i[2];try{f=JSON.parse(h.decodeBase64StringUtf8(i[0]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token envelope: ${i[0]}': ${a.message}`),a}if(!f)throw Error("Can't parse token envelope: "+i[0]);try{g=JSON.parse(h.decodeBase64StringUtf8(i[1]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token payload '${i[0]}`),a}if(!g)throw Error("Can't parse token payload: "+i[1]);if(!Object.prototype.hasOwnProperty.call(b,f.kid))throw Error("No pem found for envelope: "+JSON.stringify(f));let p=b[f.kid];if("ES256"===f.alg&&(m=j.joseToDer(m,"ES256").toString("base64")),!await h.verify(p,k,m))throw Error("Invalid token signature: "+a);if(!g.iat)throw Error("No issue time in token: "+JSON.stringify(g));if(!g.exp)throw Error("No expiration time in token: "+JSON.stringify(g));let q=Number(g.iat);if(isNaN(q))throw Error("iat field using invalid format");let r=Number(g.exp);if(isNaN(r))throw Error("exp field using invalid format");let s=new Date().getTime()/1e3;if(r>=s+e)throw Error("Expiration time too far in future: "+JSON.stringify(g));let t=q-o.CLOCK_SKEW_SECS_,u=r+o.CLOCK_SKEW_SECS_;if(s<t)throw Error("Token used too early, "+s+" < "+t+": "+JSON.stringify(g));if(s>u)throw Error("Token used too late, "+s+" > "+u+": "+JSON.stringify(g));if(d&&0>d.indexOf(g.iss))throw Error("Invalid issuer, expected one of ["+d+"], but got "+g.iss);if(null!=c){let a=g.aud;if(!(c.constructor===Array?c.indexOf(a)>-1:a===c))throw Error("Wrong recipient, payload audience != requiredAudience")}return new n.LoginTicket(f,g)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let a=await this.refreshHandler();if(!a.access_token)throw Error("No access token is returned by the refreshHandler callback.");return a}}isTokenExpiring(){let a=this.credentials.expiry_date;return!!a&&a<=new Date().getTime()+this.eagerRefreshThresholdMillis}}b.OAuth2Client=o},32999:(a,b,c)=>{var d=c(79428).Buffer;a.exports=function(a){return"string"==typeof a?a:"number"==typeof a||d.isBuffer(a)?a.toString():JSON.stringify(a)}},33043:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"hasBasePath",{enumerable:!0,get:function(){return e}});let d=c(60894);function e(a){return(0,d.pathHasPrefix)(a,"")}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},35046:(a,b,c)=>{"use strict";var d;let e;Object.defineProperty(b,"__esModule",{value:!0}),b.GCPEnv=void 0,b.clear=function(){e=void 0},b.getEnv=g;let f=c(54447);async function g(){return e||(e=h())}async function h(){d.NONE;return process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME?d.APP_ENGINE:process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET?d.CLOUD_FUNCTIONS:await j()?await i()?d.KUBERNETES_ENGINE:process.env.K_CONFIGURATION?d.CLOUD_RUN:process.env.CLOUD_RUN_JOB?d.CLOUD_RUN_JOBS:d.COMPUTE_ENGINE:d.NONE}async function i(){try{return await f.instance("attributes/cluster-name"),!0}catch(a){return!1}}async function j(){return f.isAvailable()}!function(a){a.APP_ENGINE="APP_ENGINE",a.KUBERNETES_ENGINE="KUBERNETES_ENGINE",a.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",a.COMPUTE_ENGINE="COMPUTE_ENGINE",a.CLOUD_RUN="CLOUD_RUN",a.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",a.NONE="NONE"}(d||(b.GCPEnv=d={}))},35103:(a,b,c)=>{"use strict";function d(a){return a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"removeBasePath",{enumerable:!0,get:function(){return d}}),c(33043),("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},35316:(a,b,c)=>{(()=>{var b={154:(a,b,c)=>{var d=c(781),e=["write","end","destroy"],f=["resume","pause"],g=["data","close"],h=Array.prototype.slice;function i(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c)}a.exports=function(a,b){var c=new d,j=!1;return i(e,function(b){c[b]=function(){return a[b].apply(a,arguments)}}),i(f,function(a){c[a]=function(){c.emit(a);var d=b[a];if(d)return d.apply(b,arguments);b.emit(a)}}),i(g,function(a){b.on(a,function(){var b=h.call(arguments);b.unshift(a),c.emit.apply(c,b)})}),b.on("end",function(){if(!j){j=!0;var a=h.call(arguments);a.unshift("end"),c.emit.apply(c,a)}}),a.on("drain",function(){c.emit("drain")}),a.on("error",k),b.on("error",k),c.writable=a.writable,c.readable=b.readable,c;function k(a){c.emit("error",a)}}},349:(a,b,c)=>{"use strict";let d=c(147),e=c(781),f=c(796),g=c(154),h=c(530),i=a=>Object.assign({level:9},a);a.exports=(a,b)=>a?h(f.gzip)(a,i(b)).then(a=>a.length).catch(a=>0):Promise.resolve(0),a.exports.sync=(a,b)=>f.gzipSync(a,i(b)).length,a.exports.stream=a=>{let b=new e.PassThrough,c=new e.PassThrough,d=g(b,c),h=0,j=f.createGzip(i(a)).on("data",a=>{h+=a.length}).on("error",()=>{d.gzipSize=0}).on("end",()=>{d.gzipSize=h,d.emit("gzip-size",h),c.end()});return b.pipe(j),b.pipe(c,{end:!1}),d},a.exports.file=(b,c)=>new Promise((e,f)=>{let g=d.createReadStream(b);g.on("error",f);let h=g.pipe(a.exports.stream(c));h.on("error",f),h.on("gzip-size",e)}),a.exports.fileSync=(b,c)=>a.exports.sync(d.readFileSync(b),c)},530:a=>{"use strict";let b=(a,b)=>function(...c){return new b.promiseModule((d,e)=>{b.multiArgs?c.push((...a)=>{b.errorFirst?a[0]?e(a):(a.shift(),d(a)):d(a)}):b.errorFirst?c.push((a,b)=>{a?e(a):d(b)}):c.push(d),a.apply(this,c)})};a.exports=(a,c)=>{let d;c=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},c);let e=typeof a;if(null===a||"object"!==e&&"function"!==e)throw TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===a?"null":e}\``);let f=a=>{let b=b=>"string"==typeof b?a===b:b.test(a);return c.include?c.include.some(b):!c.exclude.some(b)};for(let g in d="function"===e?function(...d){return c.excludeMain?a(...d):b(a,c).apply(this,d)}:Object.create(Object.getPrototypeOf(a)),a){let e=a[g];d[g]="function"==typeof e&&f(g)?b(e,c):e}return d}},147:a=>{"use strict";a.exports=c(29021)},781:a=>{"use strict";a.exports=c(27910)},796:a=>{"use strict";a.exports=c(74075)}},d={};function e(a){var c=d[a];if(void 0!==c)return c.exports;var f=d[a]={exports:{}},g=!0;try{b[a](f,f.exports,e),g=!1}finally{g&&delete d[a]}return f.exports}e.ab=__dirname+"/",a.exports=e(349)})()},35366:(a,b,c)=>{"use strict";let d=c(94735),e=c(81630),{Duplex:f}=c(27910),{createHash:g}=c(55511),h=c(58986),i=c(20879),j=c(43677),k=c(77740),{GUID:l,kWebSocket:m}=c(63674),n=/^[+/0-9A-Za-z]{22}==$/;class o extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){let a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(p,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{p(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",q);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void s(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void s(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!n.test(e))return void s(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==g&&8!==g)return void s(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(a))return void r(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){s(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],o={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),o[i.extensionName]=c)}catch(c){s(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return r(b,g||401,h,i);this.completeUpgrade(o,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return r(b,401)}this.completeUpgrade(o,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[m])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return r(e,503);let k=g("sha1").update(b+l).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],o=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(n.push(`Sec-WebSocket-Protocol: ${a}`),o._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});n.push(`Sec-WebSocket-Extensions: ${c}`),o._extensions=a}this.emit("headers",n,d),e.write(n.concat("\r\n").join("\r\n")),e.removeListener("error",q),o.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(o),o.on("close",()=>{this.clients.delete(o),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)})),j(o,d)}}function p(a){a._state=2,a.emit("close")}function q(){this.destroy()}function r(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function s(a,b,c,d,e,f){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,s),a.emit("wsClientError",d,c,b)}else r(c,d,e,f)}a.exports=o},35552:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GCE_LINUX_BIOS_PATHS=void 0,b.isGoogleCloudServerless=g,b.isGoogleComputeEngineLinux=h,b.isGoogleComputeEngineMACAddress=i,b.isGoogleComputeEngine=j,b.detectGCPResidency=function(){return g()||j()};let d=c(29021),e=c(21820);b.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};let f=/^42:01/;function g(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function h(){if("linux"!==(0,e.platform)())return!1;try{(0,d.statSync)(b.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let a=(0,d.readFileSync)(b.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(a)}catch{return!1}}function i(){for(let a of Object.values((0,e.networkInterfaces)()))if(a){for(let{mac:b}of a)if(f.test(b))return!0}return!1}function j(){return h()||i()}},36249:a=>{a.exports=function(a,b,c,d){var e=c?c.call(d,a,b):void 0;if(void 0!==e)return!!e;if(a===b)return!0;if("object"!=typeof a||!a||"object"!=typeof b||!b)return!1;var f=Object.keys(a),g=Object.keys(b);if(f.length!==g.length)return!1;for(var h=Object.prototype.hasOwnProperty.bind(b),i=0;i<f.length;i++){var j=f[i];if(!h(j))return!1;var k=a[j],l=b[j];if(!1===(e=c?c.call(d,k,l,j):void 0)||void 0===e&&k!==l)return!1}return!0}},37067:a=>{"use strict";a.exports=require("node:http")},37830:a=>{"use strict";a.exports=require("node:stream/web")},38229:(a,b)=>{"use strict";async function c(a){var b;let c=e(a);if(!a||!a.config||!c&&!a.config.retry)return{shouldRetry:!1};(c=c||{}).currentRetryAttempt=c.currentRetryAttempt||0,c.retry=void 0===c.retry||null===c.retry?3:c.retry,c.httpMethodsToRetry=c.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],c.noResponseRetries=void 0===c.noResponseRetries||null===c.noResponseRetries?2:c.noResponseRetries,c.retryDelayMultiplier=c.retryDelayMultiplier?c.retryDelayMultiplier:2,c.timeOfFirstRequest=c.timeOfFirstRequest?c.timeOfFirstRequest:Date.now(),c.totalTimeout=c.totalTimeout?c.totalTimeout:Number.MAX_SAFE_INTEGER,c.maxRetryDelay=c.maxRetryDelay?c.maxRetryDelay:Number.MAX_SAFE_INTEGER,c.statusCodesToRetry=c.statusCodesToRetry||[[100,199],[408,408],[429,429],[500,599]],a.config.retryConfig=c;let f=c.shouldRetry||d;if(!await f(a))return{shouldRetry:!1,config:a.config};let g=Math.min(((b=c).currentRetryAttempt?0:b.retryDelay??100)+(Math.pow(b.retryDelayMultiplier,b.currentRetryAttempt)-1)/2*1e3,b.totalTimeout-(Date.now()-b.timeOfFirstRequest),b.maxRetryDelay);a.config.retryConfig.currentRetryAttempt+=1;let h=c.retryBackoff?c.retryBackoff(a,g):new Promise(a=>{setTimeout(a,g)});return c.onRetryAttempt&&await c.onRetryAttempt(a),await h,{shouldRetry:!0,config:a.config}}function d(a){let b=e(a);if(a.config.signal?.aborted&&"TimeoutError"!==a.code||"AbortError"===a.code||!b||0===b.retry||!a.response&&(b.currentRetryAttempt||0)>=b.noResponseRetries||!b.httpMethodsToRetry||!b.httpMethodsToRetry.includes(a.config.method?.toUpperCase()||"GET"))return!1;if(a.response&&a.response.status){let c=!1;for(let[d,e]of b.statusCodesToRetry){let b=a.response.status;if(b>=d&&b<=e){c=!0;break}}if(!c)return!1}return b.currentRetryAttempt=b.currentRetryAttempt||0,!(b.currentRetryAttempt>=b.retry)}function e(a){if(a&&a.config&&a.config.retryConfig)return a.config.retryConfig}Object.defineProperty(b,"__esModule",{value:!0}),b.getRetryConfig=c},38404:(a,b,c)=>{Promise.resolve().then(c.bind(c,56962)),Promise.resolve().then(c.bind(c,30210)),Promise.resolve().then(c.bind(c,81512)),Promise.resolve().then(c.bind(c,85522)),Promise.resolve().then(c.t.bind(c,14702,23))},38522:a=>{"use strict";a.exports=require("node:zlib")},39727:()=>{},40728:(a,b,c)=>{"use strict";function d(a,b){return a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"removeLocale",{enumerable:!0,get:function(){return d}}),c(58430),("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},41062:function(a,b,c){var d;!function(e){"use strict";var f,g=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,h=Math.ceil,i=Math.floor,j="[BigNumber Error] ",k=j+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function m(a){var b=0|a;return a>0||a===b?b:b-1}function n(a){for(var b,c,d=1,e=a.length,f=a[0]+"";d<e;){for(c=14-(b=a[d++]+"").length;c--;b="0"+b);f+=b}for(e=f.length;48===f.charCodeAt(--e););return f.slice(0,e+1||1)}function o(a,b){var c,d,e=a.c,f=b.c,g=a.s,h=b.s,i=a.e,j=b.e;if(!g||!h)return null;if(c=e&&!e[0],d=f&&!f[0],c||d)return c?d?0:-h:g;if(g!=h)return g;if(c=g<0,d=i==j,!e||!f)return d?0:!e^c?1:-1;if(!d)return i>j^c?1:-1;for(g=0,h=(i=e.length)<(j=f.length)?i:j;g<h;g++)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1}function p(a,b,c,d){if(a<b||a>c||a!==i(a))throw Error(j+(d||"Argument")+("number"==typeof a?a<b||a>c?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function q(a){var b=a.c.length-1;return m(a.e/14)==b&&a.c[b]%2!=0}function r(a,b){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(b<0?"e":"e+")+b}function s(a,b,c){var d,e;if(b<0){for(e=c+".";++b;e+=c);a=e+a}else if(d=a.length,++b>d){for(e=c,b-=d;--b;e+=c);a+=e}else b<d&&(a=a.slice(0,b)+"."+a.slice(b));return a}(f=function a(b){var c,d,e,f,t,u,v,w,x,y=M.prototype={constructor:M,toString:null,valueOf:null},z=new M(1),A=20,B=4,C=-7,D=21,E=-1e7,F=1e7,G=!1,H=1,I=0,J={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",L=!0;function M(a,b){var c,d,e,f,h,j,l,m,n=this;if(!(n instanceof M))return new M(a,b);if(null==b){if(a&&!0===a._isBigNumber){n.s=a.s,!a.c||a.e>F?n.c=n.e=null:a.e<E?n.c=[n.e=0]:(n.e=a.e,n.c=a.c.slice());return}if((j="number"==typeof a)&&0*a==0){if(n.s=1/a<0?(a=-a,-1):1,a===~~a){for(f=0,h=a;h>=10;h/=10,f++);f>F?n.c=n.e=null:(n.e=f,n.c=[a]);return}m=String(a)}else{if(!g.test(m=String(a)))return x(n,m,j);n.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(f=m.indexOf("."))>-1&&(m=m.replace(".","")),(h=m.search(/e/i))>0?(f<0&&(f=h),f+=+m.slice(h+1),m=m.substring(0,h)):f<0&&(f=m.length)}else{if(p(b,2,K.length,"Base"),10==b&&L)return Q(n=new M(a),A+n.e+1,B);if(m=String(a),j="number"==typeof a){if(0*a!=0)return x(n,m,j,b);if(n.s=1/a<0?(m=m.slice(1),-1):1,M.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(k+a)}else n.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(c=K.slice(0,b),f=h=0,l=m.length;h<l;h++)if(0>c.indexOf(d=m.charAt(h))){if("."==d){if(h>f){f=l;continue}}else if(!e&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){e=!0,h=-1,f=0;continue}return x(n,String(a),j,b)}j=!1,(f=(m=w(m,b,10,n.s)).indexOf("."))>-1?m=m.replace(".",""):f=m.length}for(h=0;48===m.charCodeAt(h);h++);for(l=m.length;48===m.charCodeAt(--l););if(m=m.slice(h,++l)){if(l-=h,j&&M.DEBUG&&l>15&&(a>0x1fffffffffffff||a!==i(a)))throw Error(k+n.s*a);if((f=f-h-1)>F)n.c=n.e=null;else if(f<E)n.c=[n.e=0];else{if(n.e=f,n.c=[],h=(f+1)%14,f<0&&(h+=14),h<l){for(h&&n.c.push(+m.slice(0,h)),l-=14;h<l;)n.c.push(+m.slice(h,h+=14));h=14-(m=m.slice(h)).length}else h-=l;for(;h--;m+="0");n.c.push(+m)}}else n.c=[n.e=0]}function N(a,b,c,d){var e,f,g,h,i;if(null==c?c=B:p(c,0,8),!a.c)return a.toString();if(e=a.c[0],g=a.e,null==b)i=n(a.c),i=1==d||2==d&&(g<=C||g>=D)?r(i,g):s(i,g,"0");else if(f=(a=Q(new M(a),b,c)).e,h=(i=n(a.c)).length,1==d||2==d&&(b<=f||f<=C)){for(;h<b;i+="0",h++);i=r(i,f)}else if(b-=g+(2===d&&f>g),i=s(i,f,"0"),f+1>h){if(--b>0)for(i+=".";b--;i+="0");}else if((b+=f-h)>0)for(f+1==h&&(i+=".");b--;i+="0");return a.s<0&&e?"-"+i:i}function O(a,b){for(var c,d,e=1,f=new M(a[0]);e<a.length;e++)(d=new M(a[e])).s&&(c=o(f,d))!==b&&(0!==c||f.s!==b)||(f=d);return f}function P(a,b,c){for(var d=1,e=b.length;!b[--e];b.pop());for(e=b[0];e>=10;e/=10,d++);return(c=d+14*c-1)>F?a.c=a.e=null:c<E?a.c=[a.e=0]:(a.e=c,a.c=b),a}function Q(a,b,c,d){var e,f,g,j,k,m,n,o=a.c;if(o){a:{for(e=1,j=o[0];j>=10;j/=10,e++);if((f=b-e)<0)f+=14,g=b,n=i((k=o[m=0])/l[e-g-1]%10);else if((m=h((f+1)/14))>=o.length)if(d){for(;o.length<=m;o.push(0));k=n=0,e=1,f%=14,g=f-14+1}else break a;else{for(e=1,k=j=o[m];j>=10;j/=10,e++);f%=14,n=(g=f-14+e)<0?0:i(k/l[e-g-1]%10)}if(d=d||b<0||null!=o[m+1]||(g<0?k:k%l[e-g-1]),d=c<4?(n||d)&&(0==c||c==(a.s<0?3:2)):n>5||5==n&&(4==c||d||6==c&&(f>0?g>0?k/l[e-g]:0:o[m-1])%10&1||c==(a.s<0?8:7)),b<1||!o[0])return o.length=0,d?(b-=a.e+1,o[0]=l[(14-b%14)%14],a.e=-b||0):o[0]=a.e=0,a;if(0==f?(o.length=m,j=1,m--):(o.length=m+1,j=l[14-f],o[m]=g>0?i(k/l[e-g]%l[g])*j:0),d)for(;;)if(0==m){for(f=1,g=o[0];g>=10;g/=10,f++);for(g=o[0]+=j,j=1;g>=10;g/=10,j++);f!=j&&(a.e++,1e14==o[0]&&(o[0]=1));break}else{if(o[m]+=j,1e14!=o[m])break;o[m--]=0,j=1}for(f=o.length;0===o[--f];o.pop());}a.e>F?a.c=a.e=null:a.e<E&&(a.c=[a.e=0])}return a}function R(a){var b,c=a.e;return null===c?a.toString():(b=n(a.c),b=c<=C||c>=D?r(b,c):s(b,c,"0"),a.s<0?"-"+b:b)}return M.clone=a,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(a){var b,c;if(null!=a)if("object"==typeof a){if(a.hasOwnProperty(b="DECIMAL_PLACES")&&(p(c=a[b],0,1e9,b),A=c),a.hasOwnProperty(b="ROUNDING_MODE")&&(p(c=a[b],0,8,b),B=c),a.hasOwnProperty(b="EXPONENTIAL_AT")&&((c=a[b])&&c.pop?(p(c[0],-1e9,0,b),p(c[1],0,1e9,b),C=c[0],D=c[1]):(p(c,-1e9,1e9,b),C=-(D=c<0?-c:c))),a.hasOwnProperty(b="RANGE"))if((c=a[b])&&c.pop)p(c[0],-1e9,-1,b),p(c[1],1,1e9,b),E=c[0],F=c[1];else if(p(c,-1e9,1e9,b),c)E=-(F=c<0?-c:c);else throw Error(j+b+" cannot be zero: "+c);if(a.hasOwnProperty(b="CRYPTO"))if(!!(c=a[b])===c)if(c)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))G=c;else throw G=!c,Error(j+"crypto unavailable");else G=c;else throw Error(j+b+" not true or false: "+c);if(a.hasOwnProperty(b="MODULO_MODE")&&(p(c=a[b],0,9,b),H=c),a.hasOwnProperty(b="POW_PRECISION")&&(p(c=a[b],0,1e9,b),I=c),a.hasOwnProperty(b="FORMAT"))if("object"==typeof(c=a[b]))J=c;else throw Error(j+b+" not an object: "+c);if(a.hasOwnProperty(b="ALPHABET")){if("string"!=typeof(c=a[b])||/^.?$|[+\-.\s]|(.).*\1/.test(c))throw Error(j+b+" invalid: "+c);L="0123456789"==c.slice(0,10),K=c}}else throw Error(j+"Object expected: "+a);return{DECIMAL_PLACES:A,ROUNDING_MODE:B,EXPONENTIAL_AT:[C,D],RANGE:[E,F],CRYPTO:G,MODULO_MODE:H,POW_PRECISION:I,FORMAT:J,ALPHABET:K}},M.isBigNumber=function(a){if(!a||!0!==a._isBigNumber)return!1;if(!M.DEBUG)return!0;var b,c,d=a.c,e=a.e,f=a.s;a:if("[object Array]"==({}).toString.call(d)){if((1===f||-1===f)&&e>=-1e9&&e<=1e9&&e===i(e)){if(0===d[0]){if(0===e&&1===d.length)return!0;break a}if((b=(e+1)%14)<1&&(b+=14),String(d[0]).length==b){for(b=0;b<d.length;b++)if((c=d[b])<0||c>=1e14||c!==i(c))break a;if(0!==c)return!0}}}else if(null===d&&null===e&&(null===f||1===f||-1===f))return!0;throw Error(j+"Invalid BigNumber: "+a)},M.maximum=M.max=function(){return O(arguments,-1)},M.minimum=M.min=function(){return O(arguments,1)},c=0x20000000000000*Math.random()&2097151?function(){return i(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},M.random=function(a){var b,d,e,f,g,k=0,m=[],n=new M(z);if(null==a?a=A:p(a,0,1e9),f=h(a/14),G)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(f*=2));k<f;)(g=131072*b[k]+(b[k+1]>>>11))>=9e15?(d=crypto.getRandomValues(new Uint32Array(2)),b[k]=d[0],b[k+1]=d[1]):(m.push(g%1e14),k+=2);k=f/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(f*=7);k<f;)(g=(31&b[k])*0x1000000000000+0x10000000000*b[k+1]+0x100000000*b[k+2]+0x1000000*b[k+3]+(b[k+4]<<16)+(b[k+5]<<8)+b[k+6])>=9e15?crypto.randomBytes(7).copy(b,k):(m.push(g%1e14),k+=7);k=f/7}else throw G=!1,Error(j+"crypto unavailable");if(!G)for(;k<f;)(g=c())<9e15&&(m[k++]=g%1e14);for(f=m[--k],a%=14,f&&a&&(g=l[14-a],m[k]=i(f/g)*g);0===m[k];m.pop(),k--);if(k<0)m=[e=0];else{for(e=-1;0===m[0];m.splice(0,1),e-=14);for(k=1,g=m[0];g>=10;g/=10,k++);k<14&&(e-=14-k)}return n.e=e,n.c=m,n},M.sum=function(){for(var a=1,b=arguments,c=new M(b[0]);a<b.length;)c=c.plus(b[a++]);return c},w=function(){var a="0123456789";function b(a,b,c,d){for(var e,f,g=[0],h=0,i=a.length;h<i;){for(f=g.length;f--;g[f]*=b);for(g[0]+=d.indexOf(a.charAt(h++)),e=0;e<g.length;e++)g[e]>c-1&&(null==g[e+1]&&(g[e+1]=0),g[e+1]+=g[e]/c|0,g[e]%=c)}return g.reverse()}return function(c,d,e,f,g){var h,i,j,k,l,m,o,p,q=c.indexOf("."),r=A,t=B;for(q>=0&&(k=I,I=0,c=c.replace(".",""),m=(p=new M(d)).pow(c.length-q),I=k,p.c=b(s(n(m.c),m.e,"0"),10,e,a),p.e=p.c.length),j=k=(o=b(c,d,e,g?(h=K,a):(h=a,K))).length;0==o[--k];o.pop());if(!o[0])return h.charAt(0);if(q<0?--j:(m.c=o,m.e=j,m.s=f,o=(m=v(m,p,r,t,e)).c,l=m.r,j=m.e),q=o[i=j+r+1],k=e/2,l=l||i<0||null!=o[i+1],l=t<4?(null!=q||l)&&(0==t||t==(m.s<0?3:2)):q>k||q==k&&(4==t||l||6==t&&1&o[i-1]||t==(m.s<0?8:7)),i<1||!o[0])c=l?s(h.charAt(1),-r,h.charAt(0)):h.charAt(0);else{if(o.length=i,l)for(--e;++o[--i]>e;)o[i]=0,i||(++j,o=[1].concat(o));for(k=o.length;!o[--k];);for(q=0,c="";q<=k;c+=h.charAt(o[q++]));c=s(c,j,h.charAt(0))}return c}}(),v=function(){function a(a,b,c){var d,e,f,g,h=0,i=a.length,j=b%1e7,k=b/1e7|0;for(a=a.slice();i--;)d=k*(f=a[i]%1e7)+(g=a[i]/1e7|0)*j,h=((e=j*f+d%1e7*1e7+h)/c|0)+(d/1e7|0)+k*g,a[i]=e%c;return h&&(a=[h].concat(a)),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c,d){for(var e=0;c--;)a[c]-=e,e=+(a[c]<b[c]),a[c]=e*d+a[c]-b[c];for(;!a[0]&&a.length>1;a.splice(0,1));}return function(d,e,f,g,h){var j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=d.s==e.s?1:-1,C=d.c,D=e.c;if(!C||!C[0]||!D||!D[0])return new M(!d.s||!e.s||(C?D&&C[0]==D[0]:!D)?NaN:C&&0==C[0]||!D?0*B:B/0);for(s=(r=new M(B)).c=[],B=f+(k=d.e-e.e)+1,h||(h=1e14,k=m(d.e/14)-m(e.e/14),B=B/14|0),l=0;D[l]==(C[l]||0);l++);if(D[l]>(C[l]||0)&&k--,B<0)s.push(1),n=!0;else{for(x=C.length,z=D.length,l=0,B+=2,(o=i(h/(D[0]+1)))>1&&(D=a(D,o,h),C=a(C,o,h),z=D.length,x=C.length),w=z,u=(t=C.slice(0,z)).length;u<z;t[u++]=0);A=[0].concat(A=D.slice()),y=D[0],D[1]>=h/2&&y++;do{if(o=0,(j=b(D,t,z,u))<0){if(v=t[0],z!=u&&(v=v*h+(t[1]||0)),(o=i(v/y))>1)for(o>=h&&(o=h-1),q=(p=a(D,o,h)).length,u=t.length;1==b(p,t,q,u);)o--,c(p,z<q?A:D,q,h),q=p.length,j=1;else 0==o&&(j=o=1),q=(p=D.slice()).length;if(q<u&&(p=[0].concat(p)),c(t,p,u,h),u=t.length,-1==j)for(;1>b(D,t,z,u);)o++,c(t,z<u?A:D,u,h),u=t.length}else 0===j&&(o++,t=[0]);s[l++]=o,t[0]?t[u++]=C[w]||0:(t=[C[w]],u=1)}while((w++<x||null!=t[0])&&B--);n=null!=t[0],s[0]||s.splice(0,1)}if(1e14==h){for(l=1,B=s[0];B>=10;B/=10,l++);Q(r,f+(r.e=l+14*k-1)+1,g,n)}else r.e=k,r.r=+n;return r}}(),d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,f=/^\.([^.]+)$/,t=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(a,b,c,g){var h,i=c?b:b.replace(u,"");if(t.test(i))a.s=isNaN(i)?null:i<0?-1:1;else{if(!c&&(i=i.replace(d,function(a,b,c){return h="x"==(c=c.toLowerCase())?16:"b"==c?2:8,g&&g!=h?a:b}),g&&(h=g,i=i.replace(e,"$1").replace(f,"0.$1")),b!=i))return new M(i,h);if(M.DEBUG)throw Error(j+"Not a"+(g?" base "+g:"")+" number: "+b);a.s=null}a.c=a.e=null},y.absoluteValue=y.abs=function(){var a=new M(this);return a.s<0&&(a.s=1),a},y.comparedTo=function(a,b){return o(this,new M(a,b))},y.decimalPlaces=y.dp=function(a,b){var c,d,e;if(null!=a)return p(a,0,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a+this.e+1,b);if(!(c=this.c))return null;if(d=((e=c.length-1)-m(this.e/14))*14,e=c[e])for(;e%10==0;e/=10,d--);return d<0&&(d=0),d},y.dividedBy=y.div=function(a,b){return v(this,new M(a,b),A,B)},y.dividedToIntegerBy=y.idiv=function(a,b){return v(this,new M(a,b),0,1)},y.exponentiatedBy=y.pow=function(a,b){var c,d,e,f,g,k,l,m,n,o=this;if((a=new M(a)).c&&!a.isInteger())throw Error(j+"Exponent not an integer: "+R(a));if(null!=b&&(b=new M(b)),k=a.e>14,!o.c||!o.c[0]||1==o.c[0]&&!o.e&&1==o.c.length||!a.c||!a.c[0])return n=new M(Math.pow(+R(o),k?a.s*(2-q(a)):+R(a))),b?n.mod(b):n;if(l=a.s<0,b){if(b.c?!b.c[0]:!b.s)return new M(NaN);(d=!l&&o.isInteger()&&b.isInteger())&&(o=o.mod(b))}else{if(a.e>9&&(o.e>0||o.e<-1||(0==o.e?o.c[0]>1||k&&o.c[1]>=24e7:o.c[0]<8e13||k&&o.c[0]<=9999975e7)))return f=o.s<0&&q(a)?-0:0,o.e>-1&&(f=1/f),new M(l?1/f:f);I&&(f=h(I/14+2))}for(k?(c=new M(.5),l&&(a.s=1),m=q(a)):m=(e=Math.abs(+R(a)))%2,n=new M(z);;){if(m){if(!(n=n.times(o)).c)break;f?n.c.length>f&&(n.c.length=f):d&&(n=n.mod(b))}if(e){if(0===(e=i(e/2)))break;m=e%2}else if(Q(a=a.times(c),a.e+1,1),a.e>14)m=q(a);else{if(0==(e=+R(a)))break;m=e%2}o=o.times(o),f?o.c&&o.c.length>f&&(o.c.length=f):d&&(o=o.mod(b))}return d?n:(l&&(n=z.div(n)),b?n.mod(b):f?Q(n,I,B,g):n)},y.integerValue=function(a){var b=new M(this);return null==a?a=B:p(a,0,8),Q(b,b.e+1,a)},y.isEqualTo=y.eq=function(a,b){return 0===o(this,new M(a,b))},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(a,b){return o(this,new M(a,b))>0},y.isGreaterThanOrEqualTo=y.gte=function(a,b){return 1===(b=o(this,new M(a,b)))||0===b},y.isInteger=function(){return!!this.c&&m(this.e/14)>this.c.length-2},y.isLessThan=y.lt=function(a,b){return 0>o(this,new M(a,b))},y.isLessThanOrEqualTo=y.lte=function(a,b){return -1===(b=o(this,new M(a,b)))||0===b},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&0==this.c[0]},y.minus=function(a,b){var c,d,e,f,g=this.s;if(b=(a=new M(a,b)).s,!g||!b)return new M(NaN);if(g!=b)return a.s=-b,this.plus(a);var h=this.e/14,i=a.e/14,j=this.c,k=a.c;if(!h||!i){if(!j||!k)return j?(a.s=-b,a):new M(k?this:NaN);if(!j[0]||!k[0])return k[0]?(a.s=-b,a):new M(j[0]?this:3==B?-0:0)}if(h=m(h),i=m(i),j=j.slice(),g=h-i){for((f=g<0)?(g=-g,e=j):(i=h,e=k),e.reverse(),b=g;b--;e.push(0));e.reverse()}else for(d=(f=(g=j.length)<(b=k.length))?g:b,g=b=0;b<d;b++)if(j[b]!=k[b]){f=j[b]<k[b];break}if(f&&(e=j,j=k,k=e,a.s=-a.s),(b=(d=k.length)-(c=j.length))>0)for(;b--;j[c++]=0);for(b=1e14-1;d>g;){if(j[--d]<k[d]){for(c=d;c&&!j[--c];j[c]=b);--j[c],j[d]+=1e14}j[d]-=k[d]}for(;0==j[0];j.splice(0,1),--i);return j[0]?P(a,j,i):(a.s=3==B?-1:1,a.c=[a.e=0],a)},y.modulo=y.mod=function(a,b){var c,d;return(a=new M(a,b),this.c&&a.s&&(!a.c||a.c[0]))?a.c&&(!this.c||this.c[0])?(9==H?(d=a.s,a.s=1,c=v(this,a,0,3),a.s=d,c.s*=d):c=v(this,a,0,H),(a=this.minus(c.times(a))).c[0]||1!=H||(a.s=this.s),a):new M(this):new M(NaN)},y.multipliedBy=y.times=function(a,b){var c,d,e,f,g,h,i,j,k,l,n,o,p,q=this.c,r=(a=new M(a,b)).c;if(!q||!r||!q[0]||!r[0])return this.s&&a.s&&(!q||q[0]||r)&&(!r||r[0]||q)?(a.s*=this.s,q&&r?(a.c=[0],a.e=0):a.c=a.e=null):a.c=a.e=a.s=null,a;for(d=m(this.e/14)+m(a.e/14),a.s*=this.s,(i=q.length)<(l=r.length)&&(p=q,q=r,r=p,e=i,i=l,l=e),e=i+l,p=[];e--;p.push(0));for(e=l;--e>=0;){for(c=0,n=r[e]%1e7,o=r[e]/1e7|0,f=e+(g=i);f>e;)h=o*(j=q[--g]%1e7)+(k=q[g]/1e7|0)*n,c=((j=n*j+h%1e7*1e7+p[f]+c)/1e14|0)+(h/1e7|0)+o*k,p[f--]=j%1e14;p[f]=c}return c?++d:p.splice(0,1),P(a,p,d)},y.negated=function(){var a=new M(this);return a.s=-a.s||null,a},y.plus=function(a,b){var c,d=this.s;if(b=(a=new M(a,b)).s,!d||!b)return new M(NaN);if(d!=b)return a.s=-b,this.minus(a);var e=this.e/14,f=a.e/14,g=this.c,h=a.c;if(!e||!f){if(!g||!h)return new M(d/0);if(!g[0]||!h[0])return h[0]?a:new M(g[0]?this:0*d)}if(e=m(e),f=m(f),g=g.slice(),d=e-f){for(d>0?(f=e,c=h):(d=-d,c=g),c.reverse();d--;c.push(0));c.reverse()}for((d=g.length)-(b=h.length)<0&&(c=h,h=g,g=c,b=d),d=0;b;)d=(g[--b]=g[b]+h[b]+d)/1e14|0,g[b]=1e14===g[b]?0:g[b]%1e14;return d&&(g=[d].concat(g),++f),P(a,g,f)},y.precision=y.sd=function(a,b){var c,d,e;if(null!=a&&!!a!==a)return p(a,1,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a,b);if(!(c=this.c))return null;if(d=14*(e=c.length-1)+1,e=c[e]){for(;e%10==0;e/=10,d--);for(e=c[0];e>=10;e/=10,d++);}return a&&this.e+1>d&&(d=this.e+1),d},y.shiftedBy=function(a){return p(a,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+a)},y.squareRoot=y.sqrt=function(){var a,b,c,d,e,f=this.c,g=this.s,h=this.e,i=A+4,j=new M("0.5");if(1!==g||!f||!f[0])return new M(!g||g<0&&(!f||f[0])?NaN:f?this:1/0);if(0==(g=Math.sqrt(+R(this)))||g==1/0?(((b=n(f)).length+h)%2==0&&(b+="0"),g=Math.sqrt(+b),h=m((h+1)/2)-(h<0||h%2),c=new M(b=g==1/0?"5e"+h:(b=g.toExponential()).slice(0,b.indexOf("e")+1)+h)):c=new M(g+""),c.c[0]){for((g=(h=c.e)+i)<3&&(g=0);;)if(e=c,c=j.times(e.plus(v(this,e,i,1))),n(e.c).slice(0,g)===(b=n(c.c)).slice(0,g)){if(c.e<h&&--g,"9999"!=(b=b.slice(g-3,g+1))&&(d||"4999"!=b)){+b&&(+b.slice(1)||"5"!=b.charAt(0))||(Q(c,c.e+A+2,1),a=!c.times(c).eq(this));break}if(!d&&(Q(e,e.e+A+2,0),e.times(e).eq(this))){c=e;break}i+=4,g+=4,d=1}}return Q(c,c.e+A+1,B,a)},y.toExponential=function(a,b){return null!=a&&(p(a,0,1e9),a++),N(this,a,b,1)},y.toFixed=function(a,b){return null!=a&&(p(a,0,1e9),a=a+this.e+1),N(this,a,b)},y.toFormat=function(a,b,c){var d;if(null==c)null!=a&&b&&"object"==typeof b?(c=b,b=null):a&&"object"==typeof a?(c=a,a=b=null):c=J;else if("object"!=typeof c)throw Error(j+"Argument not an object: "+c);if(d=this.toFixed(a,b),this.c){var e,f=d.split("."),g=+c.groupSize,h=+c.secondaryGroupSize,i=c.groupSeparator||"",k=f[0],l=f[1],m=this.s<0,n=m?k.slice(1):k,o=n.length;if(h&&(e=g,g=h,h=e,o-=e),g>0&&o>0){for(e=o%g||g,k=n.substr(0,e);e<o;e+=g)k+=i+n.substr(e,g);h>0&&(k+=i+n.slice(e)),m&&(k="-"+k)}d=l?k+(c.decimalSeparator||"")+((h=+c.fractionGroupSize)?l.replace(RegExp("\\d{"+h+"}\\B","g"),"$&"+(c.fractionGroupSeparator||"")):l):k}return(c.prefix||"")+d+(c.suffix||"")},y.toFraction=function(a){var b,c,d,e,f,g,h,i,k,m,o,p,q=this.c;if(null!=a&&(!(h=new M(a)).isInteger()&&(h.c||1!==h.s)||h.lt(z)))throw Error(j+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+R(h));if(!q)return new M(this);for(b=new M(z),k=c=new M(z),d=i=new M(z),p=n(q),f=b.e=p.length-this.e-1,b.c[0]=l[(g=f%14)<0?14+g:g],a=!a||h.comparedTo(b)>0?f>0?b:k:h,g=F,F=1/0,h=new M(p),i.c[0]=0;m=v(h,b,0,1),1!=(e=c.plus(m.times(d))).comparedTo(a);)c=d,d=e,k=i.plus(m.times(e=k)),i=e,b=h.minus(m.times(e=b)),h=e;return e=v(a.minus(c),d,0,1),i=i.plus(e.times(k)),c=c.plus(e.times(d)),i.s=k.s=this.s,f*=2,o=1>v(k,d,f,B).minus(this).abs().comparedTo(v(i,c,f,B).minus(this).abs())?[k,d]:[i,c],F=g,o},y.toNumber=function(){return+R(this)},y.toPrecision=function(a,b){return null!=a&&p(a,1,1e9),N(this,a,b,2)},y.toString=function(a){var b,c=this,d=c.s,e=c.e;return null===e?d?(b="Infinity",d<0&&(b="-"+b)):b="NaN":(null==a?b=e<=C||e>=D?r(n(c.c),e):s(n(c.c),e,"0"):10===a&&L?b=s(n((c=Q(new M(c),A+e+1,B)).c),c.e,"0"):(p(a,2,K.length,"Base"),b=w(s(n(c.c),e,"0"),10,a,d,!0)),d<0&&c.c[0]&&(b="-"+b)),b},y.valueOf=y.toJSON=function(){return R(this)},y._isBigNumber=!0,null!=b&&M.set(b),M}()).default=f.BigNumber=f,void 0===(d=(function(){return f}).call(b,c,b,a))||(a.exports=d)}(0)},41167:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IdentityPoolClient=void 0;let d=c(52177),e=c(21111),f=c(8111),g=c(49690),h=c(76380),i=c(43358),j=c(30911);class k extends d.BaseExternalAccountClient{subjectTokenSupplier;constructor(a){super(a);let b=(0,e.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("subject_token_supplier");if(!c&&!d)throw Error("A credential source or subject token supplier must be specified.");if(c&&d)throw Error("Only one of credential source or subject token supplier can be specified.");if(d)this.subjectTokenSupplier=d,this.credentialSourceType="programmatic";else{let a=(0,e.originalOrCamelOptions)(c),b=(0,e.originalOrCamelOptions)(a.get("format")),d=b.get("type")||"text",i=b.get("subject_token_field_name");if("json"!==d&&"text"!==d)throw Error(`Invalid credential_source format "${d}"`);if("json"===d&&!i)throw Error("Missing subject_token_field_name for JSON credential_source format");let j=a.get("file"),l=a.get("url"),m=a.get("certificate"),n=a.get("headers");if(j&&l||l&&m||j&&m)throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(j)this.credentialSourceType="file",this.subjectTokenSupplier=new f.FileSubjectTokenSupplier({filePath:j,formatType:d,subjectTokenFieldName:i});else if(l)this.credentialSourceType="url",this.subjectTokenSupplier=new g.UrlSubjectTokenSupplier({url:l,formatType:d,subjectTokenFieldName:i,headers:n,additionalGaxiosOptions:k.RETRY_CONFIG});else if(m){this.credentialSourceType="certificate";let a=new h.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:m.use_default_certificate_config,certificateConfigLocation:m.certificate_config_location,trustChainPath:m.trust_chain_path});this.subjectTokenSupplier=a}else throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let a=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof h.CertificateSubjectTokenSupplier){let a=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new i.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new j.Gaxios({agent:a})}),this.transporter=new j.Gaxios({...this.transporter.defaults||{},agent:a})}return a}}b.IdentityPoolClient=k},41867:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Impersonated=b.IMPERSONATED_ACCOUNT_TYPE=void 0;let d=c(32852),e=c(30911),f=c(21111);b.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class g extends d.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(a={}){if(super(a),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=a.sourceClient??new d.OAuth2Client,this.targetPrincipal=a.targetPrincipal??"",this.delegates=a.delegates??[],this.targetScopes=a.targetScopes??[],this.lifetime=a.lifetime??3600,(0,f.originalOrCamelOptions)(a).get("universe_domain")){if(this.sourceClient.universeDomain!==this.universeDomain)throw RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`)}else this.universeDomain=this.sourceClient.universeDomain;this.endpoint=a.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(a){await this.sourceClient.getAccessToken();let b=`projects/-/serviceAccounts/${this.targetPrincipal}`,c=`${this.endpoint}/v1/${b}:signBlob`,d={delegates:this.delegates,payload:Buffer.from(a).toString("base64")};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:c,data:d,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let a="projects/-/serviceAccounts/"+this.targetPrincipal,b=`${this.endpoint}/v1/${a}:generateAccessToken`,c={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},d=await this.sourceClient.request({...g.RETRY_CONFIG,url:b,data:c,method:"POST"}),e=d.data;return this.credentials.access_token=e.accessToken,this.credentials.expiry_date=Date.parse(e.expireTime),{tokens:this.credentials,res:d}}catch(c){if(!(c instanceof Error))throw c;let a=0,b="";if(c instanceof e.GaxiosError&&(a=c?.response?.data?.error?.status,b=c?.response?.data?.error?.message),a&&b)throw c.message=`${a}: unable to impersonate: ${b}`,c;throw c.message=`unable to impersonate: ${c}`,c}}async fetchIdToken(a,b){await this.sourceClient.getAccessToken();let c=`projects/-/serviceAccounts/${this.targetPrincipal}`,d=`${this.endpoint}/v1/${c}:generateIdToken`,e={delegates:this.delegates,audience:a,includeEmail:b?.includeEmail??!0,useEmailAzp:b?.includeEmail??!0};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:d,data:e,method:"POST"})).data.token}}b.Impersonated=g},42511:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"addPathPrefix",{enumerable:!0,get:function(){return e}});let d=c(58430);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return""+b+c+e+f}},43358:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.StsCredentials=void 0;let d=c(30911),e=c(72449),f=c(77542),g=c(21111);class h extends f.OAuthClientAuthHandler{#i;constructor(a={tokenExchangeEndpoint:""},b){("object"!=typeof a||a instanceof URL)&&(a={tokenExchangeEndpoint:a,clientAuthentication:b}),super(a),this.#i=a.tokenExchangeEndpoint}async exchangeToken(a,b,c){let i={grant_type:a.grantType,resource:a.resource,audience:a.audience,scope:a.scope?.join(" "),requested_token_type:a.requestedTokenType,subject_token:a.subjectToken,subject_token_type:a.subjectTokenType,actor_token:a.actingParty?.actorToken,actor_token_type:a.actingParty?.actorTokenType,options:c&&JSON.stringify(c)},j={...h.RETRY_CONFIG,url:this.#i.toString(),method:"POST",headers:b,data:new URLSearchParams((0,g.removeUndefinedValuesInObject)(i))};e.AuthClient.setMethodName(j,"exchangeToken"),this.applyClientAuthenticationOptions(j);try{let a=await this.transporter.request(j),b=a.data;return b.res=a,b}catch(a){if(a instanceof d.GaxiosError&&a.response)throw(0,f.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}b.StsCredentials=h},43604:(a,b,c)=>{var d=c(41062),e=a.exports;!function(){"use strict";var a,b,c,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function h(a){return f.lastIndex=0,f.test(a)?'"'+a.replace(f,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}"function"!=typeof e.stringify&&(e.stringify=function(e,f,g){var i;if(a="",b="","number"==typeof g)for(i=0;i<g;i+=1)b+=" ";else"string"==typeof g&&(b=g);if(c=f,f&&"function"!=typeof f&&("object"!=typeof f||"number"!=typeof f.length))throw Error("JSON.stringify");return function e(f,g){var i,j,k,l,m,n=a,o=g[f],p=null!=o&&(o instanceof d||d.isBigNumber(o));switch(o&&"object"==typeof o&&"function"==typeof o.toJSON&&(o=o.toJSON(f)),"function"==typeof c&&(o=c.call(g,f,o)),typeof o){case"string":if(p)return o;return h(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":case"bigint":return String(o);case"object":if(!o)return"null";if(a+=b,m=[],"[object Array]"===Object.prototype.toString.apply(o)){for(i=0,l=o.length;i<l;i+=1)m[i]=e(i,o)||"null";return k=0===m.length?"[]":a?"[\n"+a+m.join(",\n"+a)+"\n"+n+"]":"["+m.join(",")+"]",a=n,k}if(c&&"object"==typeof c)for(i=0,l=c.length;i<l;i+=1)"string"==typeof c[i]&&(k=e(j=c[i],o))&&m.push(h(j)+(a?": ":":")+k);else Object.keys(o).forEach(function(b){var c=e(b,o);c&&m.push(h(b)+(a?": ":":")+c)});return k=0===m.length?"{}":a?"{\n"+a+m.join(",\n"+a)+"\n"+n+"}":"{"+m.join(",")+"}",a=n,k}}("",{"":e})})}()},43677:(a,b,c)=>{"use strict";let{tokenChars:d}=c(86200);a.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},44708:a=>{"use strict";a.exports=require("node:https")},45114:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"formatNextPathnameInfo",{enumerable:!0,get:function(){return h}});let d=c(92800),e=c(42511),f=c(20766),g=c(52771);function h(a){let b=(0,g.addLocale)(a.pathname,a.locale,a.buildId?void 0:a.defaultLocale,a.ignorePrefix);return(a.buildId||!a.trailingSlash)&&(b=(0,d.removeTrailingSlash)(b)),a.buildId&&(b=(0,f.addPathSuffix)((0,e.addPathPrefix)(b,"/_next/data/"+a.buildId),"/"===a.pathname?"index.json":".json")),b=(0,e.addPathPrefix)(b,a.basePath),!a.buildId&&a.trailingSlash?b.endsWith("/")?b:(0,f.addPathSuffix)(b,"/"):(0,d.removeTrailingSlash)(b)}},47332:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{formatUrl:function(){return f},formatWithValidation:function(){return h},urlObjectKeys:function(){return g}});let d=c(55823)._(c(15238)),e=/https?|ftp|gopher|file/;function f(a){let{auth:b,hostname:c}=a,f=a.protocol||"",g=a.pathname||"",h=a.hash||"",i=a.query||"",j=!1;b=b?encodeURIComponent(b).replace(/%3A/i,":")+"@":"",a.host?j=b+a.host:c&&(j=b+(~c.indexOf(":")?"["+c+"]":c),a.port&&(j+=":"+a.port)),i&&"object"==typeof i&&(i=String(d.urlQueryToSearchParams(i)));let k=a.search||i&&"?"+i||"";return f&&!f.endsWith(":")&&(f+=":"),a.slashes||(!f||e.test(f))&&!1!==j?(j="//"+(j||""),g&&"/"!==g[0]&&(g="/"+g)):j||(j=""),h&&"#"!==h[0]&&(h="#"+h),k&&"?"!==k[0]&&(k="?"+k),""+f+j+(g=g.replace(/[?#]/g,encodeURIComponent))+(k=k.replace("#","%23"))+h}let g=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function h(a){return f(a)}},47447:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DownscopedClient=b.EXPIRATION_TIME_OFFSET=b.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;let d=c(30911),e=c(27910),f=c(72449),g=c(43358);b.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,b.EXPIRATION_TIME_OFFSET=3e5;class h extends f.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(a,c={accessBoundary:{accessBoundaryRules:[]}}){if(super(a instanceof f.AuthClient?{}:a),a instanceof f.AuthClient?(this.authClient=a,this.credentialAccessBoundary=c):(this.authClient=a.authClient,this.credentialAccessBoundary=a.credentialAccessBoundary),0===this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length)throw Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>b.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw Error(`The provided access boundary has more than ${b.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(0===a.availablePermissions.length)throw Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(a){if(!a.expiry_date)throw Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(a),this.cachedDownscopedAccessToken=a}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=(await this.authClient.getAccessToken()).token,b=await this.stsCredential.exchangeToken({grantType:"urn:ietf:params:oauth:grant-type:token-exchange",requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:"urn:ietf:params:oauth:token-type:access_token"},void 0,this.credentialAccessBoundary),c=this.authClient.credentials?.expiry_date||null,d=b.expires_in?new Date().getTime()+1e3*b.expires_in:c;return this.cachedDownscopedAccessToken={access_token:b.access_token,expiry_date:d,res:b.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}b.DownscopedClient=h},47990:()=>{},48191:(a,b)=>{"use strict";function c(a,b){let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d=c.length;d--;){let e=c[d];if("query"===e){let c=Object.keys(a.query);if(c.length!==Object.keys(b.query).length)return!1;for(let d=c.length;d--;){let e=c[d];if(!b.query.hasOwnProperty(e)||a.query[e]!==b.query[e])return!1}}else if(!b.hasOwnProperty(e)||a[e]!==b[e])return!1}return!0}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"compareRouterStates",{enumerable:!0,get:function(){return c}})},49690:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UrlSubjectTokenSupplier=void 0;let d=c(72449);class e{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(a){this.url=a.url,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName,this.headers=a.headers,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getSubjectToken(a){let b,c={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};if(d.AuthClient.setMethodName(c,"getSubjectToken"),"text"===this.formatType?b=(await a.transporter.request(c)).data:"json"===this.formatType&&this.subjectTokenFieldName&&(b=(await a.transporter.request(c)).data[this.subjectTokenFieldName]),!b)throw Error("Unable to parse the subject_token from the credential_source URL");return b}}b.UrlSubjectTokenSupplier=e},50619:a=>{"use strict";a.exports=JSON.parse('{"name":"gaxios","version":"7.1.3","description":"A simple common HTTP client specifically for Google APIs and services.","main":"build/cjs/src/index.js","types":"build/cjs/src/index.d.ts","files":["build/"],"exports":{".":{"import":{"types":"./build/esm/src/index.d.ts","default":"./build/esm/src/index.js"},"require":{"types":"./build/cjs/src/index.d.ts","default":"./build/cjs/src/index.js"}}},"scripts":{"lint":"gts check --no-inline-config","test":"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000","compile":"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs","fix":"gts fix","prepare":"npm run compile","pretest":"npm run compile","webpack":"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js","docs":"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","prelint":"cd samples; npm link ../; npm install","clean":"gts clean"},"repository":{"type":"git","directory":"packages/gaxios","url":"https://github.com/googleapis/google-cloud-node-core.git"},"keywords":["google"],"engines":{"node":">=18"},"author":"Google, LLC","license":"Apache-2.0","devDependencies":{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","assert":"^2.0.0","browserify":"^17.0.0","c8":"^10.0.0","cors":"^2.8.5","express":"^5.0.0","gts":"^6.0.0","is-docker":"^3.0.0","jsdoc":"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1","linkinator":"^6.1.2","mocha":"^11.1.0","multiparty":"^4.2.1","mv":"^2.1.1","ncp":"^2.0.0","nock":"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0","puppeteer":"^24.0.0","sinon":"^21.0.0","stream-browserify":"^3.0.0","tmp":"0.2.5","ts-loader":"^9.5.2","typescript":"^5.8.3","webpack":"^5.35.0","webpack-cli":"^6.0.1"},"dependencies":{"extend":"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2","rimraf":"^5.0.1"},"homepage":"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"}')},52177:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BaseExternalAccountClient=b.CLOUD_RESOURCE_MANAGER=b.EXTERNAL_ACCOUNT_TYPE=b.EXPIRATION_TIME_OFFSET=void 0;let d=c(30911),e=c(27910),f=c(72449),g=c(43358),h=c(21111),i=c(74119),j="https://www.googleapis.com/auth/cloud-platform";b.EXPIRATION_TIME_OFFSET=3e5,b.EXTERNAL_ACCOUNT_TYPE="external_account",b.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";class k extends f.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#j=null;constructor(a){super(a);let c=(0,h.originalOrCamelOptions)(a),d=c.get("type");if(d&&d!==b.EXTERNAL_ACCOUNT_TYPE)throw Error(`Expected "${b.EXTERNAL_ACCOUNT_TYPE}" type but received "${a.type}"`);let e=c.get("client_id"),f=c.get("client_secret");this.tokenUrl=c.get("token_url")??"https://sts.{universeDomain}/v1/token".replace("{universeDomain}",this.universeDomain);let i=c.get("subject_token_type"),k=c.get("workforce_pool_user_project"),l=c.get("service_account_impersonation_url"),m=c.get("service_account_impersonation"),n=(0,h.originalOrCamelOptions)(m).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(c.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),e&&(this.clientAuth={confidentialClientType:"basic",clientId:e,clientSecret:f}),this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=c.get("scopes")||[j],this.cachedAccessToken=null,this.audience=c.get("audience"),this.subjectTokenType=i,this.workforcePoolUserProject=k;let o=RegExp("//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+");if(this.workforcePoolUserProject&&!this.audience.match(o))throw Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=l,this.serviceAccountImpersonationLifetime=n,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=3600),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);let a=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return a?.groups?.email||null}return null}setCredentials(a){super.setCredentials(a),this.cachedAccessToken=a}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async getProjectId(){let a=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(a){let b=await this.getRequestHeaders(),c={...k.RETRY_CONFIG,headers:b,url:`${this.cloudResourceManagerURL.toString()}${a}`};f.AuthClient.setMethodName(c,"getProjectId");let d=await this.transporter.request(c);return this.projectId=d.data.projectId,this.projectId}return null}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){this.#j=this.#j||this.#k();try{return await this.#j}finally{this.#j=null}}async #k(){let a=await this.retrieveSubjectToken(),b={grantType:"urn:ietf:params:oauth:grant-type:token-exchange",audience:this.audience,requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[j]:this.getScopesArray()},c=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,d=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),e=await this.stsCredential.exchangeToken(b,d,c);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(e.access_token):e.expires_in?this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+1e3*e.expires_in,res:e.res}:this.cachedAccessToken={access_token:e.access_token,res:e.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(a){let b=a.match(/\/projects\/([^/]+)/);return b?b[1]:null}async getImpersonatedAccessToken(a){let b={...k.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${a}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};f.AuthClient.setMethodName(b,"getImpersonatedAccessToken");let c=await this.transporter.request(b),d=c.data;return{access_token:d.accessToken,expiry_date:new Date(d.expireTime).getTime(),res:c}}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}getScopesArray(){return"string"==typeof this.scopes?[this.scopes]:this.scopes||[j]}getMetricsHeaderValue(){let a=process.version.replace(/^v/,""),b=void 0!==this.serviceAccountImpersonationUrl,c=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${a} auth/${i.pkg.version} google-byoid-sdk source/${c} sa-impersonation/${b} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}}b.BaseExternalAccountClient=k},52771:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"addLocale",{enumerable:!0,get:function(){return f}});let d=c(42511),e=c(60894);function f(a,b,c,f){if(!b||b===c)return a;let g=a.toLowerCase();return!f&&((0,e.pathHasPrefix)(g,"/api")||(0,e.pathHasPrefix)(g,"/"+b.toLowerCase()))?a:(0,d.addPathPrefix)(a,"/"+b)}},53533:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWTAccess=void 0;let d=c(99255),e=c(21111),f={alg:"RS256",typ:"JWT"};class g{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new e.LRUCache({capacity:500,maxAge:36e5});constructor(a,b,c,d){this.email=a,this.key=b,this.keyId=c,this.eagerRefreshThresholdMillis=d??3e5}getCachedKey(a,b){let c=a;if(b&&Array.isArray(b)&&b.length?c=a?`${a}_${b.join("_")}`:`${b.join("_")}`:"string"==typeof b&&(c=a?`${a}_${b}`:b),!c)throw Error("Scopes or url must be provided");return c}getRequestHeaders(a,b,c){let e,h=this.getCachedKey(a,c),i=this.cache.get(h),j=Date.now();if(i&&i.expiration-j>this.eagerRefreshThresholdMillis)return new Headers(i.headers);let k=Math.floor(Date.now()/1e3),l=g.getExpirationTime(k);if(Array.isArray(c)&&(c=c.join(" ")),e=c?{iss:this.email,sub:this.email,scope:c,exp:l,iat:k}:{iss:this.email,sub:this.email,aud:a,exp:l,iat:k},b){for(let a in e)if(b[a])throw Error(`The '${a}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let m=this.keyId?{...f,kid:this.keyId}:f,n=Object.assign(e,b),o=d.sign({header:m,payload:n,secret:this.key}),p=new Headers({authorization:`Bearer ${o}`});return this.cache.set(h,{expiration:1e3*l,headers:p}),p}static getExpirationTime(a){return a+3600}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{a||c(Error("Must pass in a stream containing the service account auth settings."));let d="";a.setEncoding("utf8").on("data",a=>d+=a).on("error",c).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}}b.JWTAccess=g},53921:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"interpolateAs",{enumerable:!0,get:function(){return f}});let d=c(57321),e=c(86992);function f(a,b,c){let f="",g=(0,e.getRouteRegex)(a),h=g.groups,i=(b!==a?(0,d.getRouteMatcher)(g)(b):"")||c;f=a;let j=Object.keys(h);return j.every(a=>{let b=i[a]||"",{repeat:c,optional:d}=h[a],e="["+(c?"...":"")+a+"]";return d&&(e=(b?"":"/")+"["+e+"]"),c&&!Array.isArray(b)&&(b=[b]),(d||a in i)&&(f=f.replace(e,c?b.map(a=>encodeURIComponent(a)).join("/"):encodeURIComponent(b))||"/")})||(f=""),{params:j,result:f}}},54447:function(a,b,c){"use strict";let d;var e,f=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),g=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),h=this&&this.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&f(b,a,c[d]);return g(b,a),b}),i=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||f(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.gcpResidencyCache=b.METADATA_SERVER_DETECTION=b.HEADERS=b.HEADER_VALUE=b.HEADER_NAME=b.SECONDARY_HOST_ADDRESS=b.HOST_ADDRESS=b.BASE_PATH=void 0,b.instance=function(a){return p("instance",a)},b.project=function(a){return p("project",a)},b.universe=function(a){return p("universe",a)},b.bulk=r,b.isAvailable=s,b.resetIsAvailableCache=function(){d=void 0},b.getGCPResidency=t,b.setGCPResidency=u,b.requestTimeout=v;let j=c(30911),k=c(26069),l=c(35552),m=h(c(3752));b.BASE_PATH="/computeMetadata/v1",b.HOST_ADDRESS="http://169.254.169.254",b.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",b.HEADER_NAME="Metadata-Flavor",b.HEADER_VALUE="Google",b.HEADERS=Object.freeze({[b.HEADER_NAME]:b.HEADER_VALUE});let n=m.log("gcp-metadata");function o(a){return a||(a=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||b.HOST_ADDRESS),/^https?:\/\//.test(a)||(a=`http://${a}`),new URL(b.BASE_PATH,a).href}async function p(a,c={},d=3,e=!1){let f=new Headers(b.HEADERS),g="",h={};("object"==typeof a?(new Headers(a.headers).forEach((a,b)=>f.set(b,a)),g=a.metadataKey,h=a.params||h,d=a.noResponseRetries||d,e=a.fastFail||e):g=a,"string"==typeof c)?g+=`/${c}`:(Object.keys(c).forEach(a=>{switch(a){case"params":case"property":case"headers":break;case"qs":throw Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw Error(`'${a}' is not a valid configuration option.`)}}),c.property&&(g+=`/${c.property}`),new Headers(c.headers).forEach((a,b)=>f.set(b,a)),h=c.params||h);let i=e?q:j.request,l={url:`${o()}/${g}`,headers:f,retryConfig:{noResponseRetries:d},params:h,responseType:"text",timeout:v()};n.info("instance request %j",l);let m=await i(l);n.info("instance metadata is %s",m.data);let r=m.headers.get(b.HEADER_NAME);if(r!==b.HEADER_VALUE)throw RangeError(`Invalid response from metadata service: incorrect ${b.HEADER_NAME} header. Expected '${b.HEADER_VALUE}', got ${r?`'${r}'`:"no header"}`);if("string"==typeof m.data)try{return k.parse(m.data)}catch{}return m.data}async function q(a){let c={...a,url:a.url?.toString().replace(o(),o(b.SECONDARY_HOST_ADDRESS))};return Promise.any([(0,j.request)(a),(0,j.request)(c)])}async function r(a){let b={};return await Promise.all(a.map(a=>(async()=>{let c=await p(a);b[a.metadataKey]=c})())),b}async function s(){if(process.env.METADATA_SERVER_DETECTION){let a=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(a in b.METADATA_SERVER_DETECTION))throw RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${a}\`, but it should be \`${Object.keys(b.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(a){case"assume-present":return!0;case"none":return!1;case"bios-only":return t()}}try{return void 0===d&&(d=p("instance",void 0,process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0,!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await d,!0}catch(a){if(process.env.DEBUG_AUTH&&console.info(a),"request-timeout"===a.type||a.response&&404===a.response.status)return!1;if(!(a.response&&404===a.response.status)&&(!a.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(a.code.toString()))){let b="UNKNOWN";a.code&&(b=a.code.toString()),process.emitWarning(`received unexpected error = ${a.message} code = ${b}`,"MetadataLookupWarning")}return!1}}function t(){return null===b.gcpResidencyCache&&u(),b.gcpResidencyCache}function u(a=null){b.gcpResidencyCache=null!==a?a:(0,l.detectGCPResidency)()}function v(){return 3e3*!t()}b.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"}),b.gcpResidencyCache=null,i(c(35552),b)},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},56455:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LoginTicket=void 0;class c{envelope;payload;constructor(a,b){this.envelope=a,this.payload=b}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let a=this.getPayload();return a&&a.sub?a.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}b.LoginTicket=c},56735:(a,b,c)=>{var d=c(62253).Buffer,e=c(88828),f=c(16293),g=c(27910),h=c(32999),i=c(28354);function j(a,b){return d.from(a,b).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k(a){var b,c,d,e=a.header,g=a.payload,k=a.secret||a.privateKey,l=a.encoding,m=f(e.alg),n=(b=(b=l)||"utf8",c=j(h(e),"binary"),d=j(h(g),b),i.format("%s.%s",c,d)),o=m.sign(n,k);return i.format("%s.%s",n,o)}function l(a){var b=new e(a.secret||a.privateKey||a.key);this.readable=!0,this.header=a.header,this.encoding=a.encoding,this.secret=this.privateKey=this.key=b,this.payload=new e(a.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}i.inherits(l,g),l.prototype.sign=function(){try{var a=k({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",a),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},l.sign=k,a.exports=l},57075:a=>{"use strict";a.exports=require("node:stream")},57321:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getRouteMatcher",{enumerable:!0,get:function(){return f}});let d=c(61962),e=c(66034);function f(a){let{re:b,groups:c}=a;return(0,e.safeRouteMatcher)(a=>{let e=b.exec(a);if(!e)return!1;let f=a=>{try{return decodeURIComponent(a)}catch(a){throw Object.defineProperty(new d.DecodeError("failed to decode param"),"__NEXT_ERROR_CODE",{value:"E528",enumerable:!1,configurable:!0})}},g={};for(let[a,b]of Object.entries(c)){let c=e[b.pos];void 0!==c&&(b.repeat?g[a]=c.split("/").map(a=>f(a)):g[a]=f(c))}return g})}},57504:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ACTION_SUFFIX:function(){return o},APP_DIR_ALIAS:function(){return I},CACHE_ONE_YEAR:function(){return A},DOT_NEXT_ALIAS:function(){return G},ESLINT_DEFAULT_DIRS:function(){return aa},GSP_NO_RETURNED_VALUE:function(){return W},GSSP_COMPONENT_MEMBER_ERROR:function(){return Z},GSSP_NO_RETURNED_VALUE:function(){return X},HTML_CONTENT_TYPE_HEADER:function(){return d},INFINITE_CACHE:function(){return B},INSTRUMENTATION_HOOK_FILENAME:function(){return E},JSON_CONTENT_TYPE_HEADER:function(){return e},MATCHED_PATH_HEADER:function(){return h},MIDDLEWARE_FILENAME:function(){return C},MIDDLEWARE_LOCATION_REGEXP:function(){return D},NEXT_BODY_SUFFIX:function(){return r},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return z},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return t},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return u},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return y},NEXT_CACHE_TAGS_HEADER:function(){return s},NEXT_CACHE_TAG_MAX_ITEMS:function(){return w},NEXT_CACHE_TAG_MAX_LENGTH:function(){return x},NEXT_DATA_SUFFIX:function(){return p},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return g},NEXT_META_SUFFIX:function(){return q},NEXT_QUERY_PARAM_PREFIX:function(){return f},NEXT_RESUME_HEADER:function(){return v},NON_STANDARD_NODE_ENV:function(){return $},PAGES_DIR_ALIAS:function(){return F},PRERENDER_REVALIDATE_HEADER:function(){return i},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return j},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return Q},ROOT_DIR_ALIAS:function(){return H},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return P},RSC_ACTION_ENCRYPTION_ALIAS:function(){return O},RSC_ACTION_PROXY_ALIAS:function(){return L},RSC_ACTION_VALIDATE_ALIAS:function(){return K},RSC_CACHE_WRAPPER_ALIAS:function(){return M},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return N},RSC_MOD_REF_PROXY_ALIAS:function(){return J},RSC_PREFETCH_SUFFIX:function(){return k},RSC_SEGMENTS_DIR_SUFFIX:function(){return l},RSC_SEGMENT_SUFFIX:function(){return m},RSC_SUFFIX:function(){return n},SERVER_PROPS_EXPORT_ERROR:function(){return V},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return S},SERVER_PROPS_SSG_CONFLICT:function(){return T},SERVER_RUNTIME:function(){return ab},SSG_FALLBACK_EXPORT_ERROR:function(){return _},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return R},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return U},TEXT_PLAIN_CONTENT_TYPE_HEADER:function(){return c},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return Y},WEBPACK_LAYERS:function(){return ad},WEBPACK_RESOURCE_QUERIES:function(){return ae}});let c="text/plain",d="text/html; charset=utf-8",e="application/json; charset=utf-8",f="nxtP",g="nxtI",h="x-matched-path",i="x-prerender-revalidate",j="x-prerender-revalidate-if-generated",k=".prefetch.rsc",l=".segments",m=".segment.rsc",n=".rsc",o=".action",p=".json",q=".meta",r=".body",s="x-next-cache-tags",t="x-next-revalidated-tags",u="x-next-revalidate-tag-token",v="next-resume",w=128,x=256,y=1024,z="_N_T_",A=31536e3,B=0xfffffffe,C="middleware",D=`(?:src/)?${C}`,E="instrumentation",F="private-next-pages",G="private-dot-next",H="private-next-root-dir",I="private-next-app-dir",J="private-next-rsc-mod-ref-proxy",K="private-next-rsc-action-validate",L="private-next-rsc-server-reference",M="private-next-rsc-cache-wrapper",N="private-next-rsc-track-dynamic-import",O="private-next-rsc-action-encryption",P="private-next-rsc-action-client-wrapper",Q="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",R="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",S="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",T="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",U="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",V="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",W="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",X="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",Y="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",Z="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",$='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',_="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",aa=["app","pages","components","lib","src"],ab={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ac={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},ad={...ac,GROUP:{builtinReact:[ac.reactServerComponents,ac.actionBrowser],serverOnly:[ac.reactServerComponents,ac.actionBrowser,ac.instrument,ac.middleware],neutralTarget:[ac.apiNode,ac.apiEdge],clientOnly:[ac.serverSideRendering,ac.appPagesBrowser],bundled:[ac.reactServerComponents,ac.actionBrowser,ac.serverSideRendering,ac.appPagesBrowser,ac.shared,ac.instrument,ac.middleware],appPages:[ac.reactServerComponents,ac.serverSideRendering,ac.appPagesBrowser,ac.actionBrowser]}},ae={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},57932:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.fromArrayBufferToHex=function(a){return Array.from(new Uint8Array(a)).map(a=>a.toString(16).padStart(2,"0")).join("")}},57975:a=>{"use strict";a.exports=require("node:util")},58211:a=>{"use strict";function b(a){return(a/8|0)+ +(a%8!=0)}var c={ES256:b(256),ES384:b(384),ES512:b(521)};a.exports=function(a){var b=c[a];if(b)return b;throw Error('Unknown algorithm "'+a+'"')}},58430:(a,b)=>{"use strict";function c(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"parsePath",{enumerable:!0,get:function(){return c}})},58555:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isDynamicRoute",{enumerable:!0,get:function(){return g}});let d=c(21054),e=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,f=/\/\[[^/]+\](?=\/|$)/;function g(a,b){return(void 0===b&&(b=!0),(0,d.isInterceptionRouteAppPath)(a)&&(a=(0,d.extractInterceptionRouteInformation)(a).interceptedRoute),b)?f.test(a):e.test(a)}},58925:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GoogleAuth=b.GoogleAuthExceptionMessages=void 0;let d=c(79646),e=c(29021),f=c(30911),g=c(54447),h=c(21820),i=c(33873),j=c(4052),k=c(82648),l=c(93759),m=c(35046),n=c(83364),o=c(1682),p=c(41867),q=c(13284),r=c(52177),s=c(72449),t=c(59857),u=c(21111);b.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:"Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_CREDENTIALS_FOUND:"Unable to find credentials in current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:"Unable to detect a Universe Domain in the current environment.\nTo learn more about Universe Domain retrieval, visit: \nhttps://cloud.google.com/compute/docs/metadata/predefined-metadata-keys"};class v{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#l=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(a={}){if(this._cachedProjectId=a.projectId||null,this.cachedCredential=a.authClient||null,this.keyFilename=a.keyFilename||a.keyFile,this.scopes=a.scopes,this.clientOptions=a.clientOptions||{},this.jsonContent=a.credentials||null,this.apiKey=a.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw RangeError(b.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);a.universeDomain&&(this.clientOptions.universeDomain=a.universeDomain)}setGapicJWTValues(a){a.defaultServicePath=this.defaultServicePath,a.useJWTAccessWithScope=this.useJWTAccessWithScope,a.defaultScopes=this.defaultScopes}getProjectId(a){if(!a)return this.getProjectIdAsync();this.getProjectIdAsync().then(b=>a(null,b),a)}async getProjectIdOptional(){try{return await this.getProjectId()}catch(a){if(a instanceof Error&&a.message===b.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw a}}async findAndCacheProjectId(){let a=null;if(a||=await this.getProductionProjectId(),a||=await this.getFileProjectId(),a||=await this.getDefaultServiceProjectId(),a||=await this.getGCEProjectId(),a||=await this.getExternalAccountClientProjectId())return this._cachedProjectId=a,a;throw Error(b.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let a;try{a=await g.universe("universe-domain"),a||=s.DEFAULT_UNIVERSE}catch(b){if(b&&b?.response?.status===404)a=s.DEFAULT_UNIVERSE;else throw b}return a}async getUniverseDomain(){let a=(0,u.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{a??=(await this.getClient()).universeDomain}catch{a??=s.DEFAULT_UNIVERSE}return a}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(a={},b){let c;if("function"==typeof a?b=a:c=a,!b)return this.getApplicationDefaultAsync(c);this.getApplicationDefaultAsync(c).then(a=>b(null,a.credential,a.projectId),b)}async getApplicationDefaultAsync(a={}){let c;if(this.cachedCredential)return await this.#m(this.cachedCredential,null);if((c=await this._tryGetApplicationCredentialsFromEnvironmentVariable(a))||(c=await this._tryGetApplicationCredentialsFromWellKnownFile(a)))return c instanceof n.JWT?c.scopes=this.scopes:c instanceof r.BaseExternalAccountClient&&(c.scopes=this.getAnyScopes()),await this.#m(c);if(await this._checkIsGCE())return a.scopes=this.getAnyScopes(),await this.#m(new k.Compute(a));throw Error(b.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async #m(a,b=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let c=await this.getProjectIdOptional();return b&&(a.quotaProjectId=b),this.cachedCredential=a,{credential:a,projectId:c}}async _checkIsGCE(){return void 0===this.checkIsGCE&&(this.checkIsGCE=g.getGCPResidency()||await g.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(a){let b=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!b||0===b.length)return null;try{return this._getApplicationCredentialsFromFilePath(b,a)}catch(a){throw a instanceof Error&&(a.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${a.message}`),a}}async _tryGetApplicationCredentialsFromWellKnownFile(a){let b=null;if(this._isWindows())b=process.env.APPDATA;else{let a=process.env.HOME;a&&(b=i.join(a,".config"))}return(b&&(b=i.join(b,"gcloud","application_default_credentials.json"),e.existsSync(b)||(b=null)),b)?await this._getApplicationCredentialsFromFilePath(b,a):null}async _getApplicationCredentialsFromFilePath(a,b={}){if(!a||0===a.length)throw Error("The file path is invalid.");try{if(a=e.realpathSync(a),!e.lstatSync(a).isFile())throw Error()}catch(b){throw b instanceof Error&&(b.message=`The file at ${a} does not exist, or it is not a file. ${b.message}`),b}let c=e.createReadStream(a);return this.fromStream(c,b)}fromImpersonatedJSON(a){if(!a)throw Error("Must pass in a JSON object containing an  impersonated refresh token");if(a.type!==p.IMPERSONATED_ACCOUNT_TYPE)throw Error(`The incoming JSON object does not have the "${p.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!a.source_credentials)throw Error("The incoming JSON object does not contain a source_credentials field");if(!a.service_account_impersonation_url)throw Error("The incoming JSON object does not contain a service_account_impersonation_url field");let b=this.fromJSON(a.source_credentials);if(a.service_account_impersonation_url?.length>256)throw RangeError(`Target principal is too long: ${a.service_account_impersonation_url}`);let c=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(a.service_account_impersonation_url)?.groups?.target;if(!c)throw RangeError(`Cannot extract target principal from ${a.service_account_impersonation_url}`);let d=(this.scopes||a.scopes||this.defaultScopes)??[];return new p.Impersonated({...a,sourceClient:b,targetPrincipal:c,targetScopes:Array.isArray(d)?d:[d]})}fromJSON(a,b={}){let c,d=(0,u.originalOrCamelOptions)(b).get("universe_domain");return a.type===o.USER_REFRESH_ACCOUNT_TYPE?(c=new o.UserRefreshClient(b)).fromJSON(a):a.type===p.IMPERSONATED_ACCOUNT_TYPE?c=this.fromImpersonatedJSON(a):a.type===r.EXTERNAL_ACCOUNT_TYPE?(c=q.ExternalAccountClient.fromJSON({...a,...b})).scopes=this.getAnyScopes():a.type===t.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?c=new t.ExternalAccountAuthorizedUserClient({...a,...b}):(b.scopes=this.scopes,c=new n.JWT(b),this.setGapicJWTValues(c),c.fromJSON(a)),d&&(c.universeDomain=d),c}_cacheClientFromJSON(a,b){let c=this.fromJSON(a,b);return this.jsonContent=a,this.cachedCredential=c,c}fromStream(a,b={},c){let d={};if("function"==typeof b?c=b:d=b,!c)return this.fromStreamAsync(a,d);this.fromStreamAsync(a,d).then(a=>c(null,a),c)}fromStreamAsync(a,b){return new Promise((c,d)=>{if(!a)throw Error("Must pass in a stream containing the Google auth settings.");let e=[];a.setEncoding("utf8").on("error",d).on("data",a=>e.push(a)).on("end",()=>{try{try{let a=JSON.parse(e.join("")),d=this._cacheClientFromJSON(a,b);return c(d)}catch(b){if(!this.keyFilename)throw b;let a=new n.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),c(a)}}catch(a){return d(a)}})})}fromAPIKey(a,b={}){return new n.JWT({...b,apiKey:a})}_isWindows(){let a=h.platform();return!!a&&!!(a.length>=3)&&"win"===a.substring(0,3).toLowerCase()}async getDefaultServiceProjectId(){return new Promise(a=>{(0,d.exec)("gcloud config config-helper --format json",(b,c)=>{if(!b&&c)try{let b=JSON.parse(c).configuration.properties.core.project;a(b);return}catch(a){}a(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let a=await this.getClient();if(a&&a.projectId)return a.projectId}let a=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return a?a.projectId:null}async getExternalAccountClientProjectId(){if(!this.jsonContent||this.jsonContent.type!==r.EXTERNAL_ACCOUNT_TYPE)return null;let a=await this.getClient();return await a.getProjectId()}async getGCEProjectId(){try{return await g.project("project-id")}catch(a){return null}}getCredentials(a){if(!a)return this.getCredentialsAsync();this.getCredentialsAsync().then(b=>a(null,b),a)}async getCredentialsAsync(){let a=await this.getClient();if(a instanceof p.Impersonated)return{client_email:a.getTargetPrincipal()};if(a instanceof r.BaseExternalAccountClient){let b=a.getServiceAccountEmail();if(b)return{client_email:b,universe_domain:a.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[a,b]=await Promise.all([g.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:a,universe_domain:b}}throw Error(b.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#l=this.#l||this.#n();try{return await this.#l}finally{this.#l=null}}async #n(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let a=i.resolve(this.keyFilename),b=e.createReadStream(a);return await this.fromStreamAsync(b,this.clientOptions)}if(this.apiKey){let a=await this.fromAPIKey(this.apiKey,this.clientOptions);a.scopes=this.scopes;let{credential:b}=await this.#m(a);return b}{let{credential:a}=await this.getApplicationDefaultAsync(this.clientOptions);return a}}async getIdTokenClient(a){let b=await this.getClient();if(!("fetchIdToken"in b))throw Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new l.IdTokenClient({targetAudience:a,idTokenProvider:b})}async getAccessToken(){let a=await this.getClient();return(await a.getAccessToken()).token}async getRequestHeaders(a){return(await this.getClient()).getRequestHeaders(a)}async authorizeRequest(a={}){let b=a.url,c=await this.getClient(),d=await c.getRequestHeaders(b);return a.headers=f.Gaxios.mergeHeaders(a.headers,d),a}async fetch(...a){return(await this.getClient()).fetch(...a)}async request(a){return(await this.getClient()).request(a)}getEnv(){return(0,m.getEnv)()}async sign(a,b){let c=await this.getClient(),d=await this.getUniverseDomain();if(b=b||`https://iamcredentials.${d}/v1/projects/-/serviceAccounts/`,c instanceof p.Impersonated)return(await c.sign(a)).signedBlob;let e=(0,j.createCrypto)();if(c instanceof n.JWT&&c.key)return await e.sign(c.key,a);let f=await this.getCredentials();if(!f.client_email)throw Error("Cannot sign data without `client_email`.");return this.signBlob(e,f.client_email,a,b)}async signBlob(a,b,c,d){let e=new URL(d+`${b}:signBlob`);return(await this.request({method:"POST",url:e.href,data:{payload:a.encodeBase64StringUtf8(c)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}b.GoogleAuth=v},58986:(a,b,c)=>{"use strict";let{tokenChars:d}=c(86200);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}a.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},59225:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getSortedRouteObjects:function(){return e},getSortedRoutes:function(){return d}});class c{insert(a){this._insert(a.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(a){void 0===a&&(a="/");let b=[...this.children.keys()].sort();null!==this.slugName&&b.splice(b.indexOf("[]"),1),null!==this.restSlugName&&b.splice(b.indexOf("[...]"),1),null!==this.optionalRestSlugName&&b.splice(b.indexOf("[[...]]"),1);let c=b.map(b=>this.children.get(b)._smoosh(""+a+b+"/")).reduce((a,b)=>[...a,...b],[]);if(null!==this.slugName&&c.push(...this.children.get("[]")._smoosh(a+"["+this.slugName+"]/")),!this.placeholder){let b="/"===a?"/":a.slice(0,-1);if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot define a route with the same specificity as a optional catch-all route ("'+b+'" and "'+b+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});c.unshift(b)}return null!==this.restSlugName&&c.push(...this.children.get("[...]")._smoosh(a+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&c.push(...this.children.get("[[...]]")._smoosh(a+"[[..."+this.optionalRestSlugName+"]]/")),c}_insert(a,b,d){if(0===a.length){this.placeholder=!1;return}if(d)throw Object.defineProperty(Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let e=a[0];if(e.startsWith("[")&&e.endsWith("]")){let c=e.slice(1,-1),g=!1;if(c.startsWith("[")&&c.endsWith("]")&&(c=c.slice(1,-1),g=!0),c.startsWith(""))throw Object.defineProperty(Error("Detected a three-dot character ('') at ('"+c+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(c.startsWith("...")&&(c=c.substring(3),d=!0),c.startsWith("[")||c.endsWith("]"))throw Object.defineProperty(Error("Segment names may not start or end with extra brackets ('"+c+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(c.startsWith("."))throw Object.defineProperty(Error("Segment names may not start with erroneous periods ('"+c+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});function f(a,c){if(null!==a&&a!==c)throw Object.defineProperty(Error("You cannot use different slug names for the same dynamic path ('"+a+"' !== '"+c+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});b.forEach(a=>{if(a===c)throw Object.defineProperty(Error('You cannot have the same slug name "'+c+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(a.replace(/\W/g,"")===e.replace(/\W/g,""))throw Object.defineProperty(Error('You cannot have the slug names "'+a+'" and "'+c+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),b.push(c)}if(d)if(g){if(null!=this.restSlugName)throw Object.defineProperty(Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+a[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});f(this.optionalRestSlugName,c),this.optionalRestSlugName=c,e="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+a[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});f(this.restSlugName,c),this.restSlugName=c,e="[...]"}else{if(g)throw Object.defineProperty(Error('Optional route parameters are not yet supported ("'+a[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});f(this.slugName,c),this.slugName=c,e="[]"}}this.children.has(e)||this.children.set(e,new c),this.children.get(e)._insert(a.slice(1),b,d)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function d(a){let b=new c;return a.forEach(a=>b.insert(a)),b.smoosh()}function e(a,b){let c={},e=[];for(let d=0;d<a.length;d++){let f=b(a[d]);c[f]=d,e[d]=f}return d(e).map(b=>a[c[b]])}},59347:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getSortedRouteObjects:function(){return d.getSortedRouteObjects},getSortedRoutes:function(){return d.getSortedRoutes},isDynamicRoute:function(){return e.isDynamicRoute}});let d=c(59225),e=c(58555)},59857:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ExternalAccountAuthorizedUserClient=b.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;let d=c(72449),e=c(77542),f=c(30911),g=c(27910),h=c(52177);b.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";class i extends e.OAuthClientAuthHandler{#o;constructor(a){super(a),this.#o=a.tokenRefreshEndpoint}async refreshToken(a,b){let c={...i.RETRY_CONFIG,url:this.#o,method:"POST",headers:b,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:a})};d.AuthClient.setMethodName(c,"refreshToken"),this.applyClientAuthenticationOptions(c);try{let a=await this.transporter.request(c),b=a.data;return b.res=a,b}catch(a){if(a instanceof f.GaxiosError&&a.response)throw(0,e.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}class j extends d.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(a){super(a),a.universe_domain&&(this.universeDomain=a.universe_domain),this.refreshToken=a.refresh_token;let b={confidentialClientType:"basic",clientId:a.client_id,clientSecret:a.client_secret};this.externalAccountAuthorizedUserHandler=new i({tokenRefreshEndpoint:a.token_url??"https://sts.{universeDomain}/v1/oauthtoken".replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:b}),this.cachedAccessToken=null,this.quotaProjectId=a.quota_project_id,"number"!=typeof a?.eagerRefreshThresholdMillis?this.eagerRefreshThresholdMillis=h.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!a?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=f.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=c.config.data instanceof g.Readable;if(!b&&(401===d||403===d)&&!e&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:a.access_token,expiry_date:new Date().getTime()+1e3*a.expires_in,res:a.res},void 0!==a.refresh_token&&(this.refreshToken=a.refresh_token),this.cachedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}b.ExternalAccountAuthorizedUserClient=j},60366:a=>{"use strict";a.exports=JSON.parse('{"name":"google-auth-library","version":"10.5.0","author":"Google Inc.","description":"Google APIs Authentication Client Library for Node.js","engines":{"node":">=18"},"main":"./build/src/index.js","types":"./build/src/index.d.ts","repository":"googleapis/google-auth-library-nodejs.git","keywords":["google","api","google apis","client","client library"],"dependencies":{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","gaxios":"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0","gtoken":"^8.0.0","jws":"^4.0.0"},"devDependencies":{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0","c8":"^10.0.0","codecov":"^3.0.2","gts":"^6.0.0","is-docker":"^3.0.0","jsdoc":"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1","keypair":"^1.0.4","mocha":"^11.1.0","mv":"^2.1.1","ncp":"^2.0.0","nock":"^14.0.5","null-loader":"^4.0.0","puppeteer":"^24.0.0","sinon":"^21.0.0","ts-loader":"^8.0.0","typescript":"5.8.2","webpack":"^5.21.2","webpack-cli":"^4.0.0"},"files":["build/src","!build/src/**/*.map"],"scripts":{"test":"c8 mocha build/test","clean":"gts clean","prepare":"npm run compile","lint":"gts check --no-inline-config","compile":"tsc -p .","fix":"gts fix","pretest":"npm run compile -- --sourceMap","docs":"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap","webpack":"webpack","browser-test":"karma start","docs-test":"echo \'disabled until linkinator is fixed\'","predocs-test":"npm run docs","prelint":"cd samples; npm link ../; npm install"},"license":"Apache-2.0"}')},60894:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"pathHasPrefix",{enumerable:!0,get:function(){return e}});let d=c(58430);function e(a,b){if("string"!=typeof a)return!1;let{pathname:c}=(0,d.parsePath)(a);return c===b||c.startsWith(b+"/")}},61075:a=>{"use strict";let b=Symbol("kDone"),c=Symbol("kRun");class d{constructor(a){this[b]=()=>{this.pending--,this[c]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[c]()}[c](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[b])}}}a.exports=d},61348:(a,b)=>{"use strict";function c(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"encodeURIPath",{enumerable:!0,get:function(){return c}})},61962:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{DecodeError:function(){return o},MiddlewareNotFoundError:function(){return s},MissingStaticPage:function(){return r},NormalizeError:function(){return p},PageNotFoundError:function(){return q},SP:function(){return m},ST:function(){return n},WEB_VITALS:function(){return c},execOnce:function(){return d},getDisplayName:function(){return i},getLocationOrigin:function(){return g},getURL:function(){return h},isAbsoluteUrl:function(){return f},isResSent:function(){return j},loadGetInitialProps:function(){return l},normalizeRepeatedSlashes:function(){return k},stringifyError:function(){return t}});let c=["CLS","FCP","FID","INP","LCP","TTFB"];function d(a){let b,c=!1;return function(){for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c||(c=!0,b=a(...e)),b}}let e=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,f=a=>e.test(a);function g(){let{protocol:a,hostname:b,port:c}=window.location;return a+"//"+b+(c?":"+c:"")}function h(){let{href:a}=window.location,b=g();return a.substring(b.length)}function i(a){return"string"==typeof a?a:a.displayName||a.name||"Unknown"}function j(a){return a.finished||a.headersSent}function k(a){let b=a.split("?");return b[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(b[1]?"?"+b.slice(1).join("?"):"")}async function l(a,b){let c=b.res||b.ctx&&b.ctx.res;if(!a.getInitialProps)return b.ctx&&b.Component?{pageProps:await l(b.Component,b.ctx)}:{};let d=await a.getInitialProps(b);if(c&&j(c))return d;if(!d)throw Object.defineProperty(Error('"'+i(a)+'.getInitialProps()" should resolve to an object. But found "'+d+'" instead.'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d}let m="undefined"!=typeof performance,n=m&&["mark","measure","getEntriesByName"].every(a=>"function"==typeof performance[a]);class o extends Error{}class p extends Error{}class q extends Error{constructor(a){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+a}}class r extends Error{constructor(a,b){super(),this.message="Failed to load static file for page: "+a+" "+b}}class s extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function t(a){return JSON.stringify({message:a.message,stack:a.stack})}},62253:(a,b,c)=>{var d=c(79428),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?a.exports=d:(f(d,b),b.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63674:a=>{"use strict";let b=["nodebuffer","arraybuffer","fragments"],c="undefined"!=typeof Blob;c&&b.push("blob"),a.exports={BINARY_TYPES:b,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:c,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},65069:(a,b)=>{"use strict";function c(){return""}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getDeploymentIdQueryOrEmptyString",{enumerable:!0,get:function(){return c}})},66034:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{safeCompile:function(){return g},safePathToRegexp:function(){return f},safeRegexpToFunction:function(){return h},safeRouteMatcher:function(){return i}});let d=c(86489),e=c(16923);function f(a,b,c){if("string"!=typeof a)return(0,d.pathToRegexp)(a,b,c);let f=(0,e.hasAdjacentParameterIssues)(a),g=f?(0,e.normalizeAdjacentParameters)(a):a;try{return(0,d.pathToRegexp)(g,b,c)}catch(g){if(!f)try{let f=(0,e.normalizeAdjacentParameters)(a);return(0,d.pathToRegexp)(f,b,c)}catch(a){}throw g}}function g(a,b){let c=(0,e.hasAdjacentParameterIssues)(a),f=c?(0,e.normalizeAdjacentParameters)(a):a;try{return(0,d.compile)(f,b)}catch(f){if(!c)try{let c=(0,e.normalizeAdjacentParameters)(a);return(0,d.compile)(c,b)}catch(a){}throw f}}function h(a,b){let c=(0,d.regexpToFunction)(a,b||[]);return a=>{let b=c(a);return!!b&&{...b,params:(0,e.stripParameterSeparators)(b.params)}}}function i(a){return b=>{let c=a(b);return!!c&&(0,e.stripParameterSeparators)(c)}}},67687:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"7f580b45312e5b1e80cc6761511700796bfbf0e96c":()=>d.y});var d=c(11206)},68448:(a,b)=>{"use strict";function c(a){return"/api"===a||!!(null==a?void 0:a.startsWith("/api/"))}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isAPIRoute",{enumerable:!0,get:function(){return c}})},70045:(a,b)=>{"use strict";function c(){let a=Object.create(null);return{on(b,c){(a[b]||(a[b]=[])).push(c)},off(b,c){a[b]&&a[b].splice(a[b].indexOf(c)>>>0,1)},emit(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(a[b]||[]).slice().map(a=>{a(...d)})}}}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return c}})},70664:(a,b)=>{"use strict";function c(a){return Object.prototype.toString.call(a)}function d(a){if("[object Object]"!==c(a))return!1;let b=Object.getPrototypeOf(a);return null===b||b.hasOwnProperty("isPrototypeOf")}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getObjectClassLabel:function(){return c},isPlainObject:function(){return d}})},71490:(a,b,c)=>{"use strict";c.d(b,{y:()=>e});var d=c(85708);let e=(0,d.createServerReference)("7f580b45312e5b1e80cc6761511700796bfbf0e96c",d.callServer,void 0,d.findSourceMapURL,"invalidateCacheAction")},72449:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AuthClient=b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=b.DEFAULT_UNIVERSE=void 0;let d=c(94735),e=c(30911),f=c(21111),g=c(3752),h=c(74119);b.DEFAULT_UNIVERSE="googleapis.com",b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=3e5;class i extends d.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=b.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(a={}){super();let c=(0,f.originalOrCamelOptions)(a);this.apiKey=a.apiKey,this.projectId=c.get("project_id")??null,this.quotaProjectId=c.get("quota_project_id"),this.credentials=c.get("credentials")??{},this.universeDomain=c.get("universe_domain")??b.DEFAULT_UNIVERSE,this.transporter=a.transporter??new e.Gaxios(a.transporterOptions),!1!==c.get("useAuthRequestParameters")&&(this.transporter.interceptors.request.add(i.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(i.DEFAULT_RESPONSE_INTERCEPTOR)),a.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=a.forceRefreshOnFailure??!1}fetch(...a){let b,c=a[0],d=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&e.Gaxios.mergeHeaders(f,c.headers),d&&e.Gaxios.mergeHeaders(f,new Headers(d.headers)),"object"!=typeof c||c instanceof URL)?this.request({...d,headers:f,url:b}):this.request({...d,...c,headers:f,url:b})}setCredentials(a){this.credentials=a}addSharedMetadataHeaders(a){return!a.has("x-goog-user-project")&&this.quotaProjectId&&a.set("x-goog-user-project",this.quotaProjectId),a}addUserProjectAndAuthHeaders(a,b){let c=b.get("x-goog-user-project"),d=b.get("authorization");return c&&a.set("x-goog-user-project",c),d&&a.set("authorization",d),a}static log=(0,g.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async a=>{if(!a.headers.has("x-goog-api-client")){let b=process.version.replace(/^v/,"");a.headers.set("x-goog-api-client",`gl-node/${b}`)}let b=a.headers.get("User-Agent");b?b.includes(`${h.PRODUCT_NAME}/`)||a.headers.set("User-Agent",`${b} ${h.USER_AGENT}`):a.headers.set("User-Agent",h.USER_AGENT);try{let b=a[i.RequestMethodNameSymbol],c=`${Math.floor(1e3*Math.random())}`;a[i.RequestLogIdSymbol]=c;let d={url:a.url,headers:a.headers};b?i.log.info("%s [%s] request %j",b,c,d):i.log.info("[%s] request %j",c,d)}catch(a){}return a}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] response %j",c,d,a.data):i.log.info("[%s] response %j",d,a.data)}catch(a){}return a},rejected:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] error %j",c,d,a.response?.data):i.log.error("[%s] error %j",d,a.response?.data)}catch(a){}throw a}};static setMethodName(a,b){try{a[i.RequestMethodNameSymbol]=b}catch(a){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}b.AuthClient=i},72573:(a,b,c)=>{Promise.resolve().then(c.bind(c,17742))},73024:a=>{"use strict";a.exports=require("node:fs")},73133:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BrowserCrypto=void 0;let d=c(99290),e=c(57932);class f{constructor(){if("undefined"==typeof window||void 0===window.crypto||void 0===window.crypto.subtle)throw Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return d.fromByteArray(new Uint8Array(c))}randomBytesBase64(a){let b=new Uint8Array(a);return window.crypto.getRandomValues(b),d.fromByteArray(b)}static padBase64(a){for(;a.length%4!=0;)a+="=";return a}async verify(a,b,c){let e={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},g=new TextEncoder().encode(b),h=d.toByteArray(f.padBase64(c)),i=await window.crypto.subtle.importKey("jwk",a,e,!0,["verify"]);return await window.crypto.subtle.verify(e,i,h,g)}async sign(a,b){let c={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},e=new TextEncoder().encode(b),f=await window.crypto.subtle.importKey("jwk",a,c,!0,["sign"]),g=await window.crypto.subtle.sign(c,f,e);return d.fromByteArray(new Uint8Array(g))}decodeBase64StringUtf8(a){let b=d.toByteArray(f.padBase64(a));return new TextDecoder().decode(b)}encodeBase64StringUtf8(a){let b=new TextEncoder().encode(a);return d.fromByteArray(b)}async sha256DigestHex(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return(0,e.fromArrayBufferToHex)(c)}async signWithHmacSha256(a,b){let c="string"==typeof a?a:String.fromCharCode(...new Uint16Array(a)),d=new TextEncoder,e=await window.crypto.subtle.importKey("raw",d.encode(c),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",e,d.encode(b))}}b.BrowserCrypto=f},73136:a=>{"use strict";a.exports=require("node:url")},73162:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},73566:a=>{"use strict";a.exports=require("worker_threads")},73820:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PassThroughClient=void 0;let d=c(72449);class e extends d.AuthClient{async request(a){return this.transporter.request(a)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}}b.PassThroughClient=e},74075:a=>{"use strict";a.exports=require("zlib")},74119:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.USER_AGENT=b.PRODUCT_NAME=b.pkg=void 0;let d=c(60366);b.pkg=d;let e="google-api-nodejs-client";b.PRODUCT_NAME=e,b.USER_AGENT=`${e}/${d.version}`},74539:(a,b,c)=>{var d=c(62253).Buffer,e=c(88828),f=c(16293),g=c(27910),h=c(32999),i=c(28354),j=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function k(a){var b=a.split(".",1)[0],c=d.from(b,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(c))return c;try{return JSON.parse(c)}catch(a){return}}function l(a){return a.split(".")[2]}function m(a){return j.test(a)&&!!k(a)}function n(a,b,c){if(!b){var d=Error("Missing algorithm parameter for jws.verify");throw d.code="MISSING_ALGORITHM",d}var e=l(a=h(a)),g=a.split(".",2).join(".");return f(b).verify(g,e,c)}function o(a,b){if(b=b||{},!m(a=h(a)))return null;var c,e,f=k(a);if(!f)return null;var g=(c=c||"utf8",e=a.split(".")[1],d.from(e,"base64").toString(c));return("JWT"===f.typ||b.json)&&(g=JSON.parse(g,b.encoding)),{header:f,payload:g,signature:l(a)}}function p(a){var b=new e((a=a||{}).secret||a.publicKey||a.key);this.readable=!0,this.algorithm=a.algorithm,this.encoding=a.encoding,this.secret=this.publicKey=this.key=b,this.signature=new e(a.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}i.inherits(p,g),p.prototype.verify=function(){try{var a=n(this.signature.buffer,this.algorithm,this.key.buffer),b=o(this.signature.buffer,this.encoding);return this.emit("done",a,b),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},p.decode=o,p.isValid=m,p.verify=n,a.exports=p},75758:(a,b,c)=>{var d=null;let e=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,f=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;a.exports=function(a){"use strict";var b={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=a){if(!0===a.strict&&(b.strict=!0),!0===a.storeAsString&&(b.storeAsString=!0),b.alwaysParseAsBig=!0===a.alwaysParseAsBig&&a.alwaysParseAsBig,b.useNativeBigInt=!0===a.useNativeBigInt&&a.useNativeBigInt,void 0!==a.constructorAction)if("error"===a.constructorAction||"ignore"===a.constructorAction||"preserve"===a.constructorAction)b.constructorAction=a.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${a.constructorAction}`);if(void 0!==a.protoAction)if("error"===a.protoAction||"ignore"===a.protoAction||"preserve"===a.protoAction)b.protoAction=a.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${a.protoAction}`)}var g,h,i,j,k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},l=function(a){throw{name:"SyntaxError",message:a,at:g,text:i}},m=function(a){return a&&a!==h&&l("Expected '"+a+"' instead of '"+h+"'"),h=i.charAt(g),g+=1,h},n=function(){var a,e="";for("-"===h&&(e="-",m("-"));h>="0"&&h<="9";)e+=h,m();if("."===h)for(e+=".";m()&&h>="0"&&h<="9";)e+=h;if("e"===h||"E"===h)for(e+=h,m(),("-"===h||"+"===h)&&(e+=h,m());h>="0"&&h<="9";)e+=h,m();if(isFinite(a=+e))return(null==d&&(d=c(41062)),e.length>15)?b.storeAsString?e:b.useNativeBigInt?BigInt(e):new d(e):b.alwaysParseAsBig?b.useNativeBigInt?BigInt(a):new d(a):a;l("Bad number")},o=function(){var a,b,c,d="";if('"'===h)for(var e=g;m();){if('"'===h)return g-1>e&&(d+=i.substring(e,g-1)),m(),d;if("\\"===h){if(g-1>e&&(d+=i.substring(e,g-1)),m(),"u"===h){for(b=0,c=0;b<4&&isFinite(a=parseInt(m(),16));b+=1)c=16*c+a;d+=String.fromCharCode(c)}else if("string"==typeof k[h])d+=k[h];else break;e=g}}l("Bad string")},p=function(){for(;h&&h<=" ";)m()},q=function(){switch(h){case"t":return m("t"),m("r"),m("u"),m("e"),!0;case"f":return m("f"),m("a"),m("l"),m("s"),m("e"),!1;case"n":return m("n"),m("u"),m("l"),m("l"),null}l("Unexpected '"+h+"'")},r=function(){var a=[];if("["===h){if(m("["),p(),"]"===h)return m("]"),a;for(;h;){if(a.push(j()),p(),"]"===h)return m("]"),a;m(","),p()}}l("Bad array")},s=function(){var a,c=Object.create(null);if("{"===h){if(m("{"),p(),"}"===h)return m("}"),c;for(;h;){if(a=o(),p(),m(":"),!0===b.strict&&Object.hasOwnProperty.call(c,a)&&l('Duplicate key "'+a+'"'),!0===e.test(a)?"error"===b.protoAction?l("Object contains forbidden prototype property"):"ignore"===b.protoAction?j():c[a]=j():!0===f.test(a)?"error"===b.constructorAction?l("Object contains forbidden constructor property"):"ignore"===b.constructorAction?j():c[a]=j():c[a]=j(),p(),"}"===h)return m("}"),c;m(","),p()}}l("Bad object")};return j=function(){switch(p(),h){case"{":return s();case"[":return r();case'"':return o();case"-":return n();default:return h>="0"&&h<="9"?n():q()}},function(a,b){var c;return i=a+"",g=0,h=" ",c=j(),p(),h&&l("Syntax error"),"function"==typeof b?function a(c,d){var e,f=c[d];return f&&"object"==typeof f&&Object.keys(f).forEach(function(b){void 0!==(e=a(f,b))?f[b]=e:delete f[b]}),b.call(c,d,f)}({"":c},""):c}}},75994:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InvalidSubjectTokenError=b.InvalidMessageFieldError=b.InvalidCodeFieldError=b.InvalidTokenTypeFieldError=b.InvalidExpirationTimeFieldError=b.InvalidSuccessFieldError=b.InvalidVersionFieldError=b.ExecutableResponseError=b.ExecutableResponse=void 0;let c="urn:ietf:params:oauth:token-type:saml2",d="urn:ietf:params:oauth:token-type:id_token",e="urn:ietf:params:oauth:token-type:jwt";class f{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(a){if(!a.version)throw new h("Executable response must contain a 'version' field.");if(void 0===a.success)throw new i("Executable response must contain a 'success' field.");if(this.version=a.version,this.success=a.success,this.success){if(this.expirationTime=a.expiration_time,this.tokenType=a.token_type,this.tokenType!==c&&this.tokenType!==d&&this.tokenType!==e)throw new k(`Executable response must contain a 'token_type' field when successful and it must be one of ${d}, ${e}, or ${c}.`);if(this.tokenType===c){if(!a.saml_response)throw new n(`Executable response must contain a 'saml_response' field when token_type=${c}.`);this.subjectToken=a.saml_response}else{if(!a.id_token)throw new n(`Executable response must contain a 'id_token' field when token_type=${d} or ${e}.`);this.subjectToken=a.id_token}}else{if(!a.code)throw new l("Executable response must contain a 'code' field when unsuccessful.");if(!a.message)throw new m("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=a.code,this.errorMessage=a.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return void 0!==this.expirationTime&&this.expirationTime<Math.round(Date.now()/1e3)}}b.ExecutableResponse=f;class g extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}b.ExecutableResponseError=g;class h extends g{}b.InvalidVersionFieldError=h;class i extends g{}b.InvalidSuccessFieldError=i;class j extends g{}b.InvalidExpirationTimeFieldError=j;class k extends g{}b.InvalidTokenTypeFieldError=k;class l extends g{}b.InvalidCodeFieldError=l;class m extends g{}b.InvalidMessageFieldError=m;class n extends g{}b.InvalidSubjectTokenError=n},76380:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CertificateSubjectTokenSupplier=b.InvalidConfigurationError=b.CertificateSourceUnavailableError=b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;let d=c(21111),e=c(29021),f=c(55511),g=c(55591);b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";class h extends Error{constructor(a){super(a),this.name="CertificateSourceUnavailableError"}}b.CertificateSourceUnavailableError=h;class i extends Error{constructor(a){super(a),this.name="InvalidConfigurationError"}}b.InvalidConfigurationError=i;class j{certificateConfigPath;trustChainPath;cert;key;constructor(a){if(!a.useDefaultCertificateConfig&&!a.certificateConfigLocation)throw new i("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(a.useDefaultCertificateConfig&&a.certificateConfigLocation)throw new i("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=a.trustChainPath,this.certificateConfigPath=a.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new i("Cannot create mTLS Agent with missing certificate or key");return new g.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#p();let{certPath:a,keyPath:b}=await this.#q();return{cert:this.cert,key:this.key}=await this.#r(a,b),await this.#s(this.cert)}async #p(){let a=this.certificateConfigPath;if(a){if(await (0,d.isValidFile)(a))return a;throw new h(`Provided certificate config path is invalid: ${a}`)}let c=process.env[b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(c){if(await (0,d.isValidFile)(c))return c;throw new h(`Path from environment variable "${b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${c}`)}let e=(0,d.getWellKnownCertificateConfigFileLocation)();if(await (0,d.isValidFile)(e))return e;throw new h(`Could not find certificate configuration file. Searched override path, the "${b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${e}).`)}async #q(){let a,b=this.certificateConfigPath;try{a=await e.promises.readFile(b,"utf8")}catch(a){throw new h(`Failed to read certificate config file at: ${b}`)}try{let c=JSON.parse(a),d=c?.cert_configs?.workload?.cert_path,e=c?.cert_configs?.workload?.key_path;if(!d||!e)throw new i(`Certificate config file (${b}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:d,keyPath:e}}catch(a){if(a instanceof i)throw a;throw new i(`Failed to parse certificate config from ${b}: ${a.message}`)}}async #r(a,b){let c,d;try{c=await e.promises.readFile(a),new f.X509Certificate(c)}catch(c){let b=c instanceof Error?c.message:String(c);throw new h(`Failed to read certificate file at ${a}: ${b}`)}try{d=await e.promises.readFile(b),(0,f.createPrivateKey)(d)}catch(c){let a=c instanceof Error?c.message:String(c);throw new h(`Failed to read private key file at ${b}: ${a}`)}return{cert:c,key:d}}async #s(a){let b=new f.X509Certificate(a);if(!this.trustChainPath)return JSON.stringify([b.raw.toString("base64")]);try{let a,c=((await e.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((a,b)=>{try{return new f.X509Certificate(a)}catch(c){let a=c instanceof Error?c.message:String(c);throw new i(`Failed to parse certificate at index ${b} in trust chain file ${this.trustChainPath}: ${a}`)}}),d=c.findIndex(a=>b.raw.equals(a.raw));if(-1===d)a=[b,...c];else if(0===d)a=c;else throw new i(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${d}).`);return JSON.stringify(a.map(a=>a.raw.toString("base64")))}catch(b){if(b instanceof i)throw b;let a=b instanceof Error?b.message:String(b);throw new h(`Failed to process certificate chain from ${this.trustChainPath}: ${a}`)}}}b.CertificateSubjectTokenSupplier=j},76507:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getNextPathnameInfo",{enumerable:!0,get:function(){return g}});let d=c(320),e=c(164),f=c(60894);function g(a,b){var c,g;let{basePath:h,i18n:i,trailingSlash:j}=null!=(c=b.nextConfig)?c:{},k={pathname:a,trailingSlash:"/"!==a?a.endsWith("/"):j};h&&(0,f.pathHasPrefix)(k.pathname,h)&&(k.pathname=(0,e.removePathPrefix)(k.pathname,h),k.basePath=h);let l=k.pathname;if(k.pathname.startsWith("/_next/data/")&&k.pathname.endsWith(".json")){let a=k.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");k.buildId=a[0],l="index"!==a[1]?"/"+a.slice(1).join("/"):"/",!0===b.parseData&&(k.pathname=l)}if(i){let a=b.i18nProvider?b.i18nProvider.analyze(k.pathname):(0,d.normalizeLocalePath)(k.pathname,i.locales);k.locale=a.detectedLocale,k.pathname=null!=(g=a.pathname)?g:k.pathname,!a.detectedLocale&&k.buildId&&(a=b.i18nProvider?b.i18nProvider.analyze(l):(0,d.normalizeLocalePath)(l,i.locales)).detectedLocale&&(k.locale=a.detectedLocale)}return k}},76760:a=>{"use strict";a.exports=require("node:path")},77030:a=>{"use strict";a.exports=require("node:net")},77042:(a,b)=>{"use strict";let c;function d(a){return(null==c?void 0:c.createScriptURL(a))||a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"__unsafeCreateTrustedScriptURL",{enumerable:!0,get:function(){return d}}),("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},77542:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OAuthClientAuthHandler=void 0,b.getErrorFromOAuthErrorResponse=function(a,b){let c=a.error,d=a.error_description,e=a.error_uri,f=`Error code ${c}`;void 0!==d&&(f+=`: ${d}`),void 0!==e&&(f+=` - ${e}`);let g=Error(f);if(b){let a=Object.keys(b);b.stack&&a.push("stack"),a.forEach(a=>{"message"!==a&&Object.defineProperty(g,a,{value:b[a],writable:!1,enumerable:!0})})}return g};let d=c(30911),e=c(4052),f=["PUT","POST","PATCH"];class g{#t=(0,e.createCrypto)();#u;transporter;constructor(a){a&&"clientId"in a?(this.#u=a,this.transporter=new d.Gaxios):(this.#u=a?.clientAuthentication,this.transporter=a?.transporter||new d.Gaxios)}applyClientAuthenticationOptions(a,b){a.headers=d.Gaxios.mergeHeaders(a.headers),this.injectAuthenticatedHeaders(a,b),b||this.injectAuthenticatedRequestBody(a)}injectAuthenticatedHeaders(a,b){if(b)a.headers=d.Gaxios.mergeHeaders(a.headers,{authorization:`Bearer ${b}`});else if(this.#u?.confidentialClientType==="basic"){a.headers=d.Gaxios.mergeHeaders(a.headers);let b=this.#u.clientId,c=this.#u.clientSecret||"",e=this.#t.encodeBase64StringUtf8(`${b}:${c}`);d.Gaxios.mergeHeaders(a.headers,{authorization:`Basic ${e}`})}}injectAuthenticatedRequestBody(a){if(this.#u?.confidentialClientType==="request-body"){let b=(a.method||"GET").toUpperCase();if(!f.includes(b))throw Error(`${b} HTTP method does not support ${this.#u.confidentialClientType} client authentication`);let c=new Headers(a.headers).get("content-type");if(c?.startsWith("application/x-www-form-urlencoded")||a.data instanceof URLSearchParams){let b=new URLSearchParams(a.data??"");b.append("client_id",this.#u.clientId),b.append("client_secret",this.#u.clientSecret||""),a.data=b}else if(c?.startsWith("application/json"))a.data=a.data||{},Object.assign(a.data,{client_id:this.#u.clientId,client_secret:this.#u.clientSecret||""});else throw Error(`${c} content-types are not supported with ${this.#u.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}b.OAuthClientAuthHandler=g},77545:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"addLocale",{enumerable:!0,get:function(){return d}}),c(11107);let d=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},77598:a=>{"use strict";a.exports=require("node:crypto")},77699:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"resolveHref",{enumerable:!0,get:function(){return n}});let d=c(15238),e=c(47332),f=c(85278),g=c(61962),h=c(11107),i=c(17545),j=c(59347),k=c(53921),l=c(86992),m=c(57321);function n(a,b,c){let n,o="string"==typeof b?b:(0,e.formatWithValidation)(b),p=o.match(/^[a-z][a-z0-9+.-]*:\/\//i),q=p?o.slice(p[0].length):o;if((q.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+o+"' passed to next/router in page: '"+a.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let b=(0,g.normalizeRepeatedSlashes)(q);o=(p?p[0]:"")+b}if(!(0,i.isLocalURL)(o))return c?[o]:o;try{let b=o.startsWith("#")?a.asPath:a.pathname;if(o.startsWith("?")&&(b=a.asPath,(0,j.isDynamicRoute)(a.pathname))){b=a.pathname;let c=(0,l.getRouteRegex)(a.pathname);(0,m.getRouteMatcher)(c)(a.asPath)||(b=a.asPath)}n=new URL(b,"http://n")}catch(a){n=new URL("/","http://n")}try{let a=new URL(o,n);a.pathname=(0,h.normalizePathTrailingSlash)(a.pathname);let b="";if((0,j.isDynamicRoute)(a.pathname)&&a.searchParams&&c){let c=(0,d.searchParamsToUrlQuery)(a.searchParams),{result:g,params:h}=(0,k.interpolateAs)(a.pathname,a.pathname,c);g&&(b=(0,e.formatWithValidation)({pathname:g,hash:a.hash,query:(0,f.omit)(c,h)}))}let g=a.origin===n.origin?a.href.slice(a.origin.length):a.href;return c?[g,b||g]:g}catch(a){return c?[o]:o}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},77740:(a,b,c)=>{"use strict";let d=c(94735),e=c(55591),f=c(81630),g=c(91645),h=c(34631),{randomBytes:i,createHash:j}=c(55511),{Duplex:k,Readable:l}=c(27910),{URL:m}=c(79551),n=c(20879),o=c(26802),p=c(92910),{isBlob:q}=c(86200),{BINARY_TYPES:r,EMPTY_BUFFER:s,GUID:t,kForOnEventAttribute:u,kListener:v,kStatusCode:w,kWebSocket:x,NOOP:y}=c(63674),{EventTarget:{addEventListener:z,removeEventListener:A}}=c(17605),{format:B,parse:C}=c(58986),{toBuffer:D}=c(78086),E=Symbol("kAborted"),F=[8,13],G=["CONNECTING","OPEN","CLOSING","CLOSED"],H=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class I extends d{constructor(a,b,c){super(),this._binaryType=r[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=s,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=I.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:F[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,!F.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${F.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void J(b,a);throw a}let s=q?443:80,u=i(16).toString("base64"),v=q?e.request:f.request,w=new Set;if(p.createConnection=p.createConnection||(q?L:K),p.defaultPort=p.defaultPort||s,p.port=h.port||s,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=B({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!H.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{M(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[E]||(o=b._req=null,J(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void M(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){J(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||M(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==I.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void M(b,c,"Invalid Upgrade header");let g=j("sha1").update(u+t).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void M(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?w.size?w.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void M(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void M(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=C(i)}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void M(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){r.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation}),e=new p(a,this._extensions,c.generateMask);this._receiver=d,this._sender=e,this._socket=a,d[x]=this,e[x]=this,a[x]=this,d.on("conclude",O),d.on("drain",P),d.on("error",Q),d.on("message",S),d.on("ping",T),d.on("pong",U),e.onerror=W,a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Y),a.on("data",Z),a.on("end",$),a.on("error",_),this._readyState=I.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===I.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=I.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),X(this)}}pause(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)return void N(this,a,c);void 0===b&&(b=!this._isServer),this._sender.ping(a||s,b,c)}pong(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)return void N(this,a,c);void 0===b&&(b=!this._isServer),this._sender.pong(a||s,b,c)}resume(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)return void N(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||s,d,c)}terminate(){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=I.CLOSING,this._socket.destroy())}}}function J(a,b){a._readyState=I.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function K(a){return a.path=a.socketPath,g.connect(a)}function L(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function M(a,b,c){a._readyState=I.CLOSING;let d=Error(c);Error.captureStackTrace(d,M),b.setHeader?(b[E]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(J,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function N(a,b,c){if(b){let c=q(b)?b.size:D(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${G[a.readyState]})`);process.nextTick(c,b)}}function O(a,b){let c=this[x];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[x]&&(c._socket.removeListener("data",Z),process.nextTick(V,c._socket),1005===a?c.close():c.close(a,b))}function P(){let a=this[x];a.isPaused||a._socket.resume()}function Q(a){let b=this[x];void 0!==b._socket[x]&&(b._socket.removeListener("data",Z),process.nextTick(V,b._socket),b.close(a[w])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function R(){this[x].emitClose()}function S(a,b){this[x].emit("message",a,b)}function T(a){let b=this[x];b._autoPong&&b.pong(a,!this._isServer,y),b.emit("ping",a)}function U(a){this[x].emit("pong",a)}function V(a){a.resume()}function W(a){let b=this[x];b.readyState!==I.CLOSED&&(b.readyState===I.OPEN&&(b._readyState=I.CLOSING,X(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function X(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),3e4)}function Y(){let a,b=this[x];this.removeListener("close",Y),this.removeListener("data",Z),this.removeListener("end",$),b._readyState=I.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[x]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",R),b._receiver.on("finish",R))}function Z(a){this[x]._receiver.write(a)||this.pause()}function $(){let a=this[x];a._readyState=I.CLOSING,a._receiver.end(),this.end()}function _(){let a=this[x];this.removeListener("error",_),this.on("error",y),a&&(a._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(I.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(I.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[u])return b[v];return null},set(b){for(let b of this.listeners(a))if(b[u]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[u]:!0})}})}),I.prototype.addEventListener=z,I.prototype.removeEventListener=A,a.exports=I},78086:(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=c(63674),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(a.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let b=c(39727);a.exports.mask=function(a,c,d,e,g){g<48?f(a,c,d,e,g):b.mask(a,c,d,e,g)},a.exports.unmask=function(a,c){a.length<32?g(a,c):b.unmask(a,c)}}catch(a){}},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79646:a=>{"use strict";a.exports=require("child_process")},80223:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PluggableAuthHandler=b.ExecutableError=void 0;let d=c(75994),e=c(79646),f=c(29021);class g extends Error{code;constructor(a,b){super(`The executable failed with exit code: ${b} and error message: ${a}.`),this.code=b,Object.setPrototypeOf(this,new.target.prototype)}}b.ExecutableError=g;class h{commandComponents;timeoutMillis;outputFile;constructor(a){if(!a.command)throw Error("No command provided.");if(this.commandComponents=h.parseCommand(a.command),this.timeoutMillis=a.timeoutMillis,!this.timeoutMillis)throw Error("No timeoutMillis provided.");this.outputFile=a.outputFile}retrieveResponseFromExecutable(a){return new Promise((b,c)=>{let f=e.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(a)}}),h="";f.stdout.on("data",a=>{h+=a}),f.stderr.on("data",a=>{h+=a});let i=setTimeout(()=>(f.removeAllListeners(),f.kill(),c(Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);f.on("close",a=>{if(clearTimeout(i),0!==a)return c(new g(h,a.toString()));try{let a=JSON.parse(h),c=new d.ExecutableResponse(a);return b(c)}catch(a){if(a instanceof d.ExecutableResponseError)return c(a);return c(new d.ExecutableResponseError(`The executable returned an invalid response: ${h}`))}})})}async retrieveCachedResponse(){let a;if(!this.outputFile||0===this.outputFile.length)return;try{a=await f.promises.realpath(this.outputFile)}catch{return}if(!(await f.promises.lstat(a)).isFile())return;let b=await f.promises.readFile(a,{encoding:"utf8"});if(""!==b)try{let a=JSON.parse(b);if(new d.ExecutableResponse(a).isValid())return new d.ExecutableResponse(a);return}catch(a){if(a instanceof d.ExecutableResponseError)throw a;throw new d.ExecutableResponseError(`The output file contained an invalid response: ${b}`)}}static parseCommand(a){let b=a.match(/(?:[^\s"]+|"[^"]*")+/g);if(!b)throw Error(`Provided command: "${a}" could not be parsed.`);for(let a=0;a<b.length;a++)'"'===b[a][0]&&'"'===b[a].slice(-1)&&(b[a]=b[a].slice(1,-1));return b}}b.PluggableAuthHandler=h},81542:function(a,b,c){"use strict";var d,e=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.Gaxios=void 0;let f=e(c(88633)),g=c(55591),h=c(78),i=c(38229),j=c(27910),k=c(31672),l=async()=>globalThis.crypto?.randomUUID()||(await Promise.resolve().then(c.t.bind(c,55511,23))).randomUUID();class m{agentCache=new Map;defaults;interceptors;constructor(a){this.defaults=a||{},this.interceptors={request:new k.GaxiosInterceptorManager,response:new k.GaxiosInterceptorManager}}fetch(...a){let b,c=a[0],e=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&d.mergeHeaders(f,c.headers),e&&d.mergeHeaders(f,new Headers(e.headers)),"object"!=typeof c||c instanceof URL)?this.request({...e,headers:f,url:b}):this.request({...e,...c,headers:f,url:b})}async request(a={}){let b=await this.#v(a);return b=await this.#w(b),this.#x(this._request(b))}async _defaultAdapter(a){let b=a.fetchImplementation||this.defaults.fetchImplementation||await d.#y(),c={...a};delete c.data;let e=await b(a.url,c),f=await this.getResponseData(a,e);return Object.getOwnPropertyDescriptor(e,"data")?.configurable||Object.defineProperties(e,{data:{configurable:!0,writable:!0,enumerable:!0,value:f}}),Object.assign(e,{config:a,data:f})}async _request(a){try{let b;if(b=a.adapter?await a.adapter(a,this._defaultAdapter.bind(this)):await this._defaultAdapter(a),!a.validateStatus(b.status)){if("stream"===a.responseType){let a=[];for await(let c of b.data)a.push(c);b.data=a.toString()}let c=h.GaxiosError.extractAPIErrorFromResponse(b,`Request failed with status code ${b.status}`);throw new h.GaxiosError(c?.message,a,b,c)}return b}catch(e){let b;b=e instanceof h.GaxiosError?e:e instanceof Error?new h.GaxiosError(e.message,a,void 0,e):new h.GaxiosError("Unexpected Gaxios Error",a,void 0,e);let{shouldRetry:c,config:d}=await (0,i.getRetryConfig)(b);if(c&&d)return b.config.retryConfig.currentRetryAttempt=d.retryConfig.currentRetryAttempt,a.retryConfig=b.config?.retryConfig,this.#z(a),this._request(a);throw a.errorRedactor&&a.errorRedactor(b),b}}async getResponseData(a,b){if(204===b.status)return"";if(a.maxContentLength&&b.headers.has("content-length")&&a.maxContentLength<Number.parseInt(b.headers?.get("content-length")||""))throw new h.GaxiosError("Response's `Content-Length` is over the limit.",a,Object.assign(b,{config:a}));switch(a.responseType){case"stream":return b.body;case"json":{let a=await b.text();try{return JSON.parse(a)}catch{return a}}case"arraybuffer":return b.arrayBuffer();case"blob":return b.blob();case"text":return b.text();default:return this.getResponseDataFromContentType(b)}}#A(a,b=[]){let c=new URL(a),d=[...b];for(let a of(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[])d.push(a.trim());for(let a of d)if(a instanceof RegExp){if(a.test(c.toString()))return!1}else if(a instanceof URL){if(a.origin===c.origin)return!1}else if(a.startsWith("*.")||a.startsWith(".")){let b=a.replace(/^\*\./,".");if(c.hostname.endsWith(b))return!1}else if(a===c.origin||a===c.hostname||a===c.href)return!1;return!0}async #w(a){let b=Promise.resolve(a);for(let a of this.interceptors.request.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #x(a){let b=Promise.resolve(a);for(let a of this.interceptors.response.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #v(a){let b=new Headers(this.defaults.headers);d.mergeHeaders(b,a.headers);let c=(0,f.default)(!0,{},this.defaults,a);if(!c.url)throw Error("URL is required.");if(c.baseURL&&(c.url=new URL(c.url,c.baseURL)),c.url=new URL(c.url),c.params)if(c.paramsSerializer){let a=c.paramsSerializer(c.params);a.startsWith("?")&&(a=a.slice(1));let b=c.url.toString().includes("?")?"&":"?";c.url=c.url+b+a}else{let a=c.url instanceof URL?c.url:new URL(c.url);for(let[b,d]of new URLSearchParams(c.params))a.searchParams.append(b,d);c.url=a}"number"==typeof a.maxContentLength&&(c.size=a.maxContentLength),"number"==typeof a.maxRedirects&&(c.follow=a.maxRedirects);let e="string"==typeof c.data||c.data instanceof ArrayBuffer||c.data instanceof Blob||globalThis.File&&c.data instanceof File||c.data instanceof FormData||c.data instanceof j.Readable||c.data instanceof ReadableStream||c.data instanceof String||c.data instanceof URLSearchParams||ArrayBuffer.isView(c.data)||["Blob","File","FormData"].includes(c.data?.constructor?.name||"");if(c.multipart?.length){let a=await l();b.set("content-type",`multipart/related; boundary=${a}`),c.body=j.Readable.from(this.getMultipartRequest(c.multipart,a))}else e?c.body=c.data:"object"==typeof c.data?"application/x-www-form-urlencoded"===b.get("Content-Type")?c.body=c.paramsSerializer?c.paramsSerializer(c.data):new URLSearchParams(c.data):(b.has("content-type")||b.set("content-type","application/json"),c.body=JSON.stringify(c.data)):c.data&&(c.body=c.data);c.validateStatus=c.validateStatus||this.validateStatus,c.responseType=c.responseType||"unknown",b.has("accept")||"json"!==c.responseType||b.set("accept","application/json");let i=c.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(c.agent);else if(i&&this.#A(c.url,c.noProxy)){let a=await d.#B();this.agentCache.has(i)?c.agent=this.agentCache.get(i):(c.agent=new a(i,{cert:c.cert,key:c.key}),this.agentCache.set(i,c.agent))}else c.cert&&c.key&&(this.agentCache.has(c.key)?c.agent=this.agentCache.get(c.key):(c.agent=new g.Agent({cert:c.cert,key:c.key}),this.agentCache.set(c.key,c.agent)));return"function"!=typeof c.errorRedactor&&!1!==c.errorRedactor&&(c.errorRedactor=h.defaultErrorRedactor),!c.body||"duplex"in c||(c.duplex="half"),this.#z(c),Object.assign(c,{headers:b,url:c.url instanceof URL?c.url:new URL(c.url)})}#z(a){if(a.timeout){let b=AbortSignal.timeout(a.timeout);a.signal&&!a.signal.aborted?a.signal=AbortSignal.any([a.signal,b]):a.signal=b}}validateStatus(a){return a>=200&&a<300}async getResponseDataFromContentType(a){let b=a.headers.get("Content-Type");if(null===b)return a.text();if((b=b.toLowerCase()).includes("application/json")){let b=await a.text();try{b=JSON.parse(b)}catch{}return b}return b.match(/^text\//)?a.text():a.blob()}async *getMultipartRequest(a,b){let c=`--${b}--`;for(let c of a){let a=c.headers.get("Content-Type")||"application/octet-stream",d=`--${b}\r
Content-Type: ${a}\r
\r
`;yield d,"string"==typeof c.content?yield c.content:yield*c.content,yield"\r\n"}yield c}static #C;static #D;static async #B(){return this.#C||=(await c.e(664).then(c.t.bind(c,31664,23))).HttpsProxyAgent,this.#C}static async #y(){let a="undefined"!=typeof window&&!!window;return this.#D||=a?window.fetch:(await c.e(638).then(c.bind(c,37638))).default,this.#D}static mergeHeaders(a,...b){for(let c of(a=a instanceof Headers?a:new Headers(a),b))(c instanceof Headers?c:new Headers(c)).forEach((b,c)=>{"set-cookie"===c?a.append(c,b):a.set(c,b)});return a}}b.Gaxios=m,d=m},81630:a=>{"use strict";a.exports=require("http")},82083:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IAMAuth=void 0;class c{selector;token;constructor(a,b){this.selector=a,this.token=b,this.selector=a,this.token=b}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}b.IAMAuth=c},82359:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"BloomFilter",{enumerable:!0,get:function(){return d}});class d{static from(a,b){void 0===b&&(b=1e-4);let c=new d(a.length,b);for(let b of a)c.add(b);return c}export(){let a={numItems:this.numItems,errorRate:this.errorRate,numBits:this.numBits,numHashes:this.numHashes,bitArray:this.bitArray};if(this.errorRate<1e-4){let b=JSON.stringify(a),d=c(35316).sync(b);d>1024&&console.warn("Creating filter with error rate less than 0.1% (0.001) can increase the size dramatically proceed with caution. Received error rate "+this.errorRate+" resulted in size "+b.length+" bytes, "+d+" bytes (gzip)")}return a}import(a){this.numItems=a.numItems,this.errorRate=a.errorRate,this.numBits=a.numBits,this.numHashes=a.numHashes,this.bitArray=a.bitArray}add(a){this.getHashValues(a).forEach(a=>{this.bitArray[a]=1})}contains(a){return this.getHashValues(a).every(a=>this.bitArray[a])}getHashValues(a){let b=[];for(let c=1;c<=this.numHashes;c++){let d=function(a){let b=0;for(let c=0;c<a.length;c++)b=Math.imul(b^a.charCodeAt(c),0x5bd1e995),b^=b>>>13,b=Math.imul(b,0x5bd1e995);return b>>>0}(""+a+c)%this.numBits;b.push(d)}return b}constructor(a,b=1e-4){this.numItems=a,this.errorRate=b,this.numBits=Math.ceil(-(a*Math.log(b))/(Math.log(2)*Math.log(2))),this.numHashes=Math.ceil(this.numBits/a*Math.log(2)),this.bitArray=Array(this.numBits).fill(0)}}},82648:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Compute=void 0;let d=c(30911),e=c(54447),f=c(32852);class g extends f.OAuth2Client{serviceAccountEmail;scopes;constructor(a={}){super(a),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=a.serviceAccountEmail||"default",this.scopes=Array.isArray(a.scopes)?a.scopes:a.scopes?[a.scopes]:[]}async refreshTokenNoCache(){let a,b=`service-accounts/${this.serviceAccountEmail}/token`;try{let c={property:b};this.scopes.length>0&&(c.params={scopes:this.scopes.join(",")}),a=await e.instance(c)}catch(a){throw a instanceof d.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let c=a;return a&&a.expires_in&&(c.expiry_date=new Date().getTime()+1e3*a.expires_in,delete c.expires_in),this.emit("tokens",c),{tokens:c,res:null}}async fetchIdToken(a){let b,c=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${a}`;try{b=await e.instance({property:c})}catch(a){throw a instanceof Error&&(a.message=`Could not fetch ID token: ${a.message}`),a}return b}wrapError(a){let b=a.response;b&&b.status&&(a.status=b.status,403===b.status?a.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+a.message:404===b.status&&(a.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+a.message))}}b.Compute=g},82704:()=>{},83364:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWT=void 0;let d=c(20425),e=c(53533),f=c(32852),g=c(72449);class h extends f.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(a={}){super(a),this.email=a.email,this.keyFile=a.keyFile,this.key=a.key,this.keyId=a.keyId,this.scopes=a.scopes,this.subject=a.subject,this.additionalClaims=a.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(a){let b=new h(this);return b.scopes=a,b}async getRequestMetadataAsync(a){a=this.defaultServicePath?`https://${this.defaultServicePath}/`:a;let b=!this.hasUserScopes()&&a||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==g.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==g.DEFAULT_UNIVERSE)throw RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${g.DEFAULT_UNIVERSE}`);if(!this.apiKey&&b)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${a.id_token}`}))}}else{let b;this.access||(this.access=new e.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis)),this.hasUserScopes()?b=this.scopes:a||(b=this.defaultScopes);let c=this.useJWTAccessWithScope||this.universeDomain!==g.DEFAULT_UNIVERSE,d=await this.access.getRequestHeaders(a??void 0,this.additionalClaims,c?b:void 0);return{headers:this.addSharedMetadataHeaders(d)}}return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(a):{headers:new Headers}}async fetchIdToken(a){let b=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:a},transporter:this.transporter});if(await b.getToken({forceRefresh:!0}),!b.idToken)throw Error("Unknown error: Failed to fetch ID token");return b.idToken}hasUserScopes(){return!!this.scopes&&this.scopes.length>0}hasAnyScopes(){return!!this.scopes&&!!(this.scopes.length>0)||!!this.defaultScopes&&!!(this.defaultScopes.length>0)}authorize(a){if(!a)return this.authorizeAsync();this.authorizeAsync().then(b=>a(null,b),a)}async authorizeAsync(){let a=await this.refreshToken();if(!a)throw Error("No result returned");return this.credentials=a.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,a.tokens}async refreshTokenNoCache(){let a=this.createGToken(),b={access_token:(await a.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:a.expiresAt,id_token:a.idToken};return this.emit("tokens",b),{res:null,tokens:b}}createGToken(){return this.gtoken||(this.gtoken=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{if(!a)throw Error("Must pass in a stream containing the service account auth settings.");let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}fromAPIKey(a){if("string"!=typeof a)throw Error("Must provide an API Key string.");this.apiKey=a}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let a=this.createGToken(),b=await a.getCredentials(this.keyFile);return{private_key:b.privateKey,client_email:b.clientEmail}}throw Error("A key or a keyFile must be provided to getCredentials.")}}b.JWT=h},83674:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{createRouteLoader:function(){return q},getClientBuildManifest:function(){return o},isAssetError:function(){return k},markAssetError:function(){return j}}),c(35288),c(27381);let d=c(77042),e=c(26339),f=c(65069),g=c(61348);function h(a,b,c){let d,e=b.get(a);if(e)return"future"in e?e.future:Promise.resolve(e);let f=new Promise(a=>{d=a});return b.set(a,{resolve:d,future:f}),c?c().then(a=>(d(a),a)).catch(c=>{throw b.delete(a),c}):f}let i=Symbol("ASSET_LOAD_ERROR");function j(a){return Object.defineProperty(a,i,{})}function k(a){return a&&i in a}let l=function(a){try{return a=document.createElement("link"),!!window.MSInputMethodContext&&!!document.documentMode||a.relList.supports("prefetch")}catch(a){return!1}}(),m=()=>(0,f.getDeploymentIdQueryOrEmptyString)();function n(a,b,c){return new Promise((d,f)=>{let g=!1;a.then(a=>{g=!0,d(a)}).catch(f),(0,e.requestIdleCallback)(()=>setTimeout(()=>{g||f(c)},b))})}function o(){return self.__BUILD_MANIFEST?Promise.resolve(self.__BUILD_MANIFEST):n(new Promise(a=>{let b=self.__BUILD_MANIFEST_CB;self.__BUILD_MANIFEST_CB=()=>{a(self.__BUILD_MANIFEST),b&&b()}}),3800,j(Object.defineProperty(Error("Failed to load client build manifest"),"__NEXT_ERROR_CODE",{value:"E273",enumerable:!1,configurable:!0})))}function p(a,b){return o().then(c=>{if(!(b in c))throw j(Object.defineProperty(Error("Failed to lookup route: "+b),"__NEXT_ERROR_CODE",{value:"E446",enumerable:!1,configurable:!0}));let e=c[b].map(b=>a+"/_next/"+(0,g.encodeURIPath)(b));return{scripts:e.filter(a=>a.endsWith(".js")).map(a=>(0,d.__unsafeCreateTrustedScriptURL)(a)+m()),css:e.filter(a=>a.endsWith(".css")).map(a=>a+m())}})}function q(a){let b=new Map,c=new Map,d=new Map,f=new Map;function g(a){{var b;let d=c.get(a.toString());return d?d:document.querySelector('script[src^="'+a+'"]')?Promise.resolve():(c.set(a.toString(),d=new Promise((c,d)=>{(b=document.createElement("script")).onload=c,b.onerror=()=>d(j(Object.defineProperty(Error("Failed to load script: "+a),"__NEXT_ERROR_CODE",{value:"E74",enumerable:!1,configurable:!0}))),b.crossOrigin=void 0,b.src=a,document.body.appendChild(b)})),d)}}function i(a){let b=d.get(a);return b||d.set(a,b=fetch(a,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw Object.defineProperty(Error("Failed to load stylesheet: "+a),"__NEXT_ERROR_CODE",{value:"E189",enumerable:!1,configurable:!0});return b.text().then(b=>({href:a,content:b}))}).catch(a=>{throw j(a)})),b}return{whenEntrypoint:a=>h(a,b),onEntrypoint(a,c){(c?Promise.resolve().then(()=>c()).then(a=>({component:a&&a.default||a,exports:a}),a=>({error:a})):Promise.resolve(void 0)).then(c=>{let d=b.get(a);d&&"resolve"in d?c&&(b.set(a,c),d.resolve(c)):(c?b.set(a,c):b.delete(a),f.delete(a))})},loadRoute(c,d){return h(c,f,()=>{let e;return n(p(a,c).then(a=>{let{scripts:d,css:e}=a;return Promise.all([b.has(c)?[]:Promise.all(d.map(g)),Promise.all(e.map(i))])}).then(a=>this.whenEntrypoint(c).then(b=>({entrypoint:b,styles:a[1]}))),3800,j(Object.defineProperty(Error("Route did not complete loading: "+c),"__NEXT_ERROR_CODE",{value:"E12",enumerable:!1,configurable:!0}))).then(a=>{let{entrypoint:b,styles:c}=a,d=Object.assign({styles:c},b);return"error"in b?b:d}).catch(a=>{if(d)throw a;return{error:a}}).finally(()=>null==e?void 0:e())})},prefetch(b){let c;return(c=navigator.connection)&&(c.saveData||/2g/.test(c.effectiveType))?Promise.resolve():p(a,b).then(a=>Promise.all(l?a.scripts.map(a=>{var b,c,d;return b=a.toString(),c="script",new Promise((a,e)=>{let f='\n      link[rel="prefetch"][href^="'+b+'"],\n      link[rel="preload"][href^="'+b+'"],\n      script[src^="'+b+'"]';if(document.querySelector(f))return a();d=document.createElement("link"),c&&(d.as=c),d.rel="prefetch",d.crossOrigin=void 0,d.onload=a,d.onerror=()=>e(j(Object.defineProperty(Error("Failed to prefetch: "+b),"__NEXT_ERROR_CODE",{value:"E268",enumerable:!1,configurable:!0}))),d.href=b,document.head.appendChild(d)})}):[])).then(()=>{(0,e.requestIdleCallback)(()=>this.loadRoute(b,!0).catch(()=>{}))}).catch(()=>{})}}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},83948:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AwsClient=void 0;let d=c(29780),e=c(52177),f=c(30896),g=c(21111),h=c(30911);class i extends e.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static #E="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(a){super(a);let b=(0,g.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("aws_security_credentials_supplier");if(!c&&!d)throw Error("A credential source or AWS security credentials supplier must be specified.");if(c&&d)throw Error("Only one of credential source or AWS security credentials supplier can be specified.");if(d)this.awsSecurityCredentialsSupplier=d,this.regionalCredVerificationUrl=i.#E,this.credentialSourceType="programmatic";else{let a=(0,g.originalOrCamelOptions)(c);this.environmentId=a.get("environment_id");let b=a.get("region_url"),d=a.get("url"),e=a.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new f.DefaultAwsSecurityCredentialsSupplier({regionUrl:b,securityCredentialsUrl:d,imdsV2SessionTokenUrl:e}),this.regionalCredVerificationUrl=a.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let a=this.environmentId?.match(/^(aws)(\d+)$/);if(a&&this.regionalCredVerificationUrl){if(1!==parseInt(a[2],10))throw Error(`aws version "${a[2]}" is not supported in the current build.`)}else throw Error('No valid AWS "credential_source" provided')}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new d.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let a=await this.awsRequestSigner.getRequestOptions({...i.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),b=[];return h.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},a.headers).forEach((a,c)=>b.push({key:c,value:a})),encodeURIComponent(JSON.stringify({url:a.url,method:a.method,headers:b}))}}b.AwsClient=i},83997:a=>{"use strict";a.exports=require("tty")},85278:(a,b)=>{"use strict";function c(a,b){let c={};return Object.keys(a).forEach(d=>{b.includes(d)||(c[d]=a[d])}),c}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"omit",{enumerable:!0,get:function(){return c}})},86200:(a,b,c)=>{"use strict";let{isUtf8:d}=c(79428),{hasBlob:e}=c(63674);function f(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(a.exports={isBlob:function(a){return e&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:f,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)a.exports.isValidUTF8=function(a){return a.length<24?f(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let b=c(47990);a.exports.isValidUTF8=function(a){return a.length<32?f(a):b(a)}}catch(a){}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},86489:a=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var b={};(()=>{function a(a,b){void 0===b&&(b={});for(var c=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];if("*"===d||"+"===d||"?"===d){b.push({type:"MODIFIER",index:c,value:a[c++]});continue}if("\\"===d){b.push({type:"ESCAPED_CHAR",index:c++,value:a[c++]});continue}if("{"===d){b.push({type:"OPEN",index:c,value:a[c++]});continue}if("}"===d){b.push({type:"CLOSE",index:c,value:a[c++]});continue}if(":"===d){for(var e="",f=c+1;f<a.length;){var g=a.charCodeAt(f);if(g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||95===g){e+=a[f++];continue}break}if(!e)throw TypeError("Missing parameter name at ".concat(c));b.push({type:"NAME",index:c,value:e}),c=f;continue}if("("===d){var h=1,i="",f=c+1;if("?"===a[f])throw TypeError('Pattern cannot start with "?" at '.concat(f));for(;f<a.length;){if("\\"===a[f]){i+=a[f++]+a[f++];continue}if(")"===a[f]){if(0==--h){f++;break}}else if("("===a[f]&&(h++,"?"!==a[f+1]))throw TypeError("Capturing groups are not allowed at ".concat(f));i+=a[f++]}if(h)throw TypeError("Unbalanced pattern at ".concat(c));if(!i)throw TypeError("Missing pattern at ".concat(c));b.push({type:"PATTERN",index:c,value:i}),c=f;continue}b.push({type:"CHAR",index:c,value:a[c++]})}return b.push({type:"END",index:c,value:""}),b}(a),d=b.prefixes,f=void 0===d?"./":d,g=b.delimiter,h=void 0===g?"/#?":g,i=[],j=0,k=0,l="",m=function(a){if(k<c.length&&c[k].type===a)return c[k++].value},n=function(a){var b=m(a);if(void 0!==b)return b;var d=c[k],e=d.type,f=d.index;throw TypeError("Unexpected ".concat(e," at ").concat(f,", expected ").concat(a))},o=function(){for(var a,b="";a=m("CHAR")||m("ESCAPED_CHAR");)b+=a;return b},p=function(a){for(var b=0;b<h.length;b++){var c=h[b];if(a.indexOf(c)>-1)return!0}return!1},q=function(a){var b=i[i.length-1],c=a||(b&&"string"==typeof b?b:"");if(b&&!c)throw TypeError('Must have text between two parameters, missing text after "'.concat(b.name,'"'));return!c||p(c)?"[^".concat(e(h),"]+?"):"(?:(?!".concat(e(c),")[^").concat(e(h),"])+?")};k<c.length;){var r=m("CHAR"),s=m("NAME"),t=m("PATTERN");if(s||t){var u=r||"";-1===f.indexOf(u)&&(l+=u,u=""),l&&(i.push(l),l=""),i.push({name:s||j++,prefix:u,suffix:"",pattern:t||q(u),modifier:m("MODIFIER")||""});continue}var v=r||m("ESCAPED_CHAR");if(v){l+=v;continue}if(l&&(i.push(l),l=""),m("OPEN")){var u=o(),w=m("NAME")||"",x=m("PATTERN")||"",y=o();n("CLOSE"),i.push({name:w||(x?j++:""),pattern:w&&!x?q(u):x,prefix:u,suffix:y,modifier:m("MODIFIER")||""});continue}n("END")}return i}function c(a,b){void 0===b&&(b={});var c=f(b),d=b.encode,e=void 0===d?function(a){return a}:d,g=b.validate,h=void 0===g||g,i=a.map(function(a){if("object"==typeof a)return new RegExp("^(?:".concat(a.pattern,")$"),c)});return function(b){for(var c="",d=0;d<a.length;d++){var f=a[d];if("string"==typeof f){c+=f;continue}var g=b?b[f.name]:void 0,j="?"===f.modifier||"*"===f.modifier,k="*"===f.modifier||"+"===f.modifier;if(Array.isArray(g)){if(!k)throw TypeError('Expected "'.concat(f.name,'" to not repeat, but got an array'));if(0===g.length){if(j)continue;throw TypeError('Expected "'.concat(f.name,'" to not be empty'))}for(var l=0;l<g.length;l++){var m=e(g[l],f);if(h&&!i[d].test(m))throw TypeError('Expected all "'.concat(f.name,'" to match "').concat(f.pattern,'", but got "').concat(m,'"'));c+=f.prefix+m+f.suffix}continue}if("string"==typeof g||"number"==typeof g){var m=e(String(g),f);if(h&&!i[d].test(m))throw TypeError('Expected "'.concat(f.name,'" to match "').concat(f.pattern,'", but got "').concat(m,'"'));c+=f.prefix+m+f.suffix;continue}if(!j){var n=k?"an array":"a string";throw TypeError('Expected "'.concat(f.name,'" to be ').concat(n))}}return c}}function d(a,b,c){void 0===c&&(c={});var d=c.decode,e=void 0===d?function(a){return a}:d;return function(c){var d=a.exec(c);if(!d)return!1;for(var f=d[0],g=d.index,h=Object.create(null),i=1;i<d.length;i++)!function(a){if(void 0!==d[a]){var c=b[a-1];"*"===c.modifier||"+"===c.modifier?h[c.name]=d[a].split(c.prefix+c.suffix).map(function(a){return e(a,c)}):h[c.name]=e(d[a],c)}}(i);return{path:f,index:g,params:h}}}function e(a){return a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function f(a){return a&&a.sensitive?"":"i"}function g(a,b,c){void 0===c&&(c={});for(var d=c.strict,g=void 0!==d&&d,h=c.start,i=c.end,j=c.encode,k=void 0===j?function(a){return a}:j,l=c.delimiter,m=c.endsWith,n="[".concat(e(void 0===m?"":m),"]|$"),o="[".concat(e(void 0===l?"/#?":l),"]"),p=void 0===h||h?"^":"",q=0;q<a.length;q++){var r=a[q];if("string"==typeof r)p+=e(k(r));else{var s=e(k(r.prefix)),t=e(k(r.suffix));if(r.pattern)if(b&&b.push(r),s||t)if("+"===r.modifier||"*"===r.modifier){var u="*"===r.modifier?"?":"";p+="(?:".concat(s,"((?:").concat(r.pattern,")(?:").concat(t).concat(s,"(?:").concat(r.pattern,"))*)").concat(t,")").concat(u)}else p+="(?:".concat(s,"(").concat(r.pattern,")").concat(t,")").concat(r.modifier);else{if("+"===r.modifier||"*"===r.modifier)throw TypeError('Can not repeat "'.concat(r.name,'" without a prefix and suffix'));p+="(".concat(r.pattern,")").concat(r.modifier)}else p+="(?:".concat(s).concat(t,")").concat(r.modifier)}}if(void 0===i||i)g||(p+="".concat(o,"?")),p+=c.endsWith?"(?=".concat(n,")"):"$";else{var v=a[a.length-1],w="string"==typeof v?o.indexOf(v[v.length-1])>-1:void 0===v;g||(p+="(?:".concat(o,"(?=").concat(n,"))?")),w||(p+="(?=".concat(o,"|").concat(n,")"))}return new RegExp(p,f(c))}function h(b,c,d){if(b instanceof RegExp){var e;if(!c)return b;for(var i=/\((?:\?<(.*?)>)?(?!\?)/g,j=0,k=i.exec(b.source);k;)c.push({name:k[1]||j++,prefix:"",suffix:"",modifier:"",pattern:""}),k=i.exec(b.source);return b}return Array.isArray(b)?(e=b.map(function(a){return h(a,c,d).source}),new RegExp("(?:".concat(e.join("|"),")"),f(d))):g(a(b,d),c,d)}Object.defineProperty(b,"__esModule",{value:!0}),b.pathToRegexp=b.tokensToRegexp=b.regexpToFunction=b.match=b.tokensToFunction=b.compile=b.parse=void 0,b.parse=a,b.compile=function(b,d){return c(a(b,d),d)},b.tokensToFunction=c,b.match=function(a,b){var c=[];return d(h(a,c,b),c,b)},b.regexpToFunction=d,b.tokensToRegexp=g,b.pathToRegexp=h})(),a.exports=b})()},86612:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{createKey:function(){return R},default:function(){return U},matchesMiddleware:function(){return J}});let d=c(35288),e=c(55823),f=c(92800),g=c(83674),h=c(14702),i=e._(c(98122)),j=c(8051),k=c(320),l=d._(c(70045)),m=c(61962),n=c(58555),o=c(94217),p=c(57321),q=c(86992),r=c(47332);c(89090);let s=c(58430),t=c(77545),u=c(40728),v=c(35103),w=c(92464),x=c(33043),y=c(77699),z=c(68448),A=c(76507),B=c(45114),C=c(48191),D=c(17545);c(27963);let E=c(85278),F=c(53921),G=c(43678),H=c(57504);function I(){return Object.assign(Object.defineProperty(Error("Route Cancelled"),"__NEXT_ERROR_CODE",{value:"E315",enumerable:!1,configurable:!0}),{cancelled:!0})}async function J(a){let b=await Promise.resolve(a.router.pageLoader.getMiddleware());if(!b)return!1;let{pathname:c}=(0,s.parsePath)(a.asPath),d=(0,x.hasBasePath)(c)?(0,v.removeBasePath)(c):c,e=(0,w.addBasePath)((0,t.addLocale)(d,a.locale));return b.some(a=>new RegExp(a.regexp).test(e))}function K(a){let b=(0,m.getLocationOrigin)();return a.startsWith(b)?a.substring(b.length):a}function L(a,b,c){let[d,e]=(0,y.resolveHref)(a,b,!0),f=(0,m.getLocationOrigin)(),g=d.startsWith(f),h=e&&e.startsWith(f);d=K(d),e=e?K(e):e;let i=g?d:(0,w.addBasePath)(d),j=c?K((0,y.resolveHref)(a,c)):e||d;return{url:i,as:h?j:(0,w.addBasePath)(j)}}function M(a,b){let c=(0,f.removeTrailingSlash)((0,j.denormalizePagePath)(a));return"/404"===c||"/_error"===c?a:(b.includes(c)||b.some(b=>{if((0,n.isDynamicRoute)(b)&&(0,q.getRouteRegex)(b).re.test(c))return a=b,!0}),(0,f.removeTrailingSlash)(a))}async function N(a){if(!await J(a)||!a.fetchData)return null;let b=await a.fetchData(),c=await function(a,b,c){let d={basePath:c.router.basePath,i18n:{locales:c.router.locales},trailingSlash:!1},e=b.headers.get("x-nextjs-rewrite"),h=e||b.headers.get("x-nextjs-matched-path"),i=b.headers.get(H.MATCHED_PATH_HEADER);if(!i||h||i.includes("__next_data_catchall")||i.includes("/_error")||i.includes("/404")||(h=i),h){if(h.startsWith("/")){let b=(0,o.parseRelativeUrl)(h),i=(0,A.getNextPathnameInfo)(b.pathname,{nextConfig:d,parseData:!0}),j=(0,f.removeTrailingSlash)(i.pathname);return Promise.all([c.router.pageLoader.getPageList(),(0,g.getClientBuildManifest)()]).then(f=>{let[g,{__rewrites:h}]=f,l=(0,t.addLocale)(i.pathname,i.locale);if((0,n.isDynamicRoute)(l)||!e&&g.includes((0,k.normalizeLocalePath)((0,v.removeBasePath)(l),c.router.locales).pathname)){let c=(0,A.getNextPathnameInfo)((0,o.parseRelativeUrl)(a).pathname,{nextConfig:d,parseData:!0});b.pathname=l=(0,w.addBasePath)(c.pathname)}if(!g.includes(j)){let a=M(j,g);a!==j&&(j=a)}let m=g.includes(j)?j:M((0,k.normalizeLocalePath)((0,v.removeBasePath)(b.pathname),c.router.locales).pathname,g);if((0,n.isDynamicRoute)(m)){let a=(0,p.getRouteMatcher)((0,q.getRouteRegex)(m))(l);Object.assign(b.query,a||{})}return{type:"rewrite",parsedAs:b,resolvedHref:m}})}let b=(0,s.parsePath)(a);return Promise.resolve({type:"redirect-external",destination:""+(0,B.formatNextPathnameInfo)({...(0,A.getNextPathnameInfo)(b.pathname,{nextConfig:d,parseData:!0}),defaultLocale:c.router.defaultLocale,buildId:""})+b.query+b.hash})}let j=b.headers.get("x-nextjs-redirect");if(j){if(j.startsWith("/")){let a=(0,s.parsePath)(j),b=(0,B.formatNextPathnameInfo)({...(0,A.getNextPathnameInfo)(a.pathname,{nextConfig:d,parseData:!0}),defaultLocale:c.router.defaultLocale,buildId:""});return Promise.resolve({type:"redirect-internal",newAs:""+b+a.query+a.hash,newUrl:""+b+a.query+a.hash})}return Promise.resolve({type:"redirect-external",destination:j})}return Promise.resolve({type:"next"})}(b.dataHref,b.response,a);return{dataHref:b.dataHref,json:b.json,response:b.response,text:b.text,cacheKey:b.cacheKey,effect:c}}let O=Symbol("SSG_DATA_NOT_FOUND");function P(a){try{return JSON.parse(a)}catch(a){return null}}function Q(a){let{dataHref:b,inflightCache:c,isPrefetch:d,hasMiddleware:e,isServerRender:f,parseJSON:h,persistCache:i,isBackground:j,unstable_skipClientCache:k}=a,{href:l}=new URL(b,window.location.href),m=a=>{var j;return(function a(b,c,d){return fetch(b,{credentials:"same-origin",method:d.method||"GET",headers:Object.assign({},d.headers,{"x-nextjs-data":"1"})}).then(e=>!e.ok&&c>1&&e.status>=500?a(b,c-1,d):e)})(b,f?3:1,{headers:Object.assign({},d?{purpose:"prefetch"}:{},d&&e?{"x-middleware-prefetch":"1"}:{},{}),method:null!=(j=null==a?void 0:a.method)?j:"GET"}).then(c=>c.ok&&(null==a?void 0:a.method)==="HEAD"?{dataHref:b,response:c,text:"",json:{},cacheKey:l}:c.text().then(a=>{if(!c.ok){if(e&&[301,302,307,308].includes(c.status))return{dataHref:b,response:c,text:a,json:{},cacheKey:l};if(404===c.status){var d;if(null==(d=P(a))?void 0:d.notFound)return{dataHref:b,json:{notFound:O},response:c,text:a,cacheKey:l}}let h=Object.defineProperty(Error("Failed to load static props"),"__NEXT_ERROR_CODE",{value:"E124",enumerable:!1,configurable:!0});throw f||(0,g.markAssetError)(h),h}return{dataHref:b,json:h?P(a):null,response:c,text:a,cacheKey:l}})).then(a=>(i&&"no-cache"!==a.response.headers.get("x-middleware-cache")||delete c[l],a)).catch(a=>{throw k||delete c[l],("Failed to fetch"===a.message||"NetworkError when attempting to fetch resource."===a.message||"Load failed"===a.message)&&(0,g.markAssetError)(a),a})};return k&&i?m({}).then(a=>("no-cache"!==a.response.headers.get("x-middleware-cache")&&(c[l]=Promise.resolve(a)),a)):void 0!==c[l]?c[l]:c[l]=m(j?{method:"HEAD"}:{})}function R(){return Math.random().toString(36).slice(2,10)}function S(a){let{url:b,router:c}=a;if(b===(0,w.addBasePath)((0,t.addLocale)(c.asPath,c.locale)))throw Object.defineProperty(Error("Invariant: attempted to hard navigate to the same URL "+b+" "+location.href),"__NEXT_ERROR_CODE",{value:"E282",enumerable:!1,configurable:!0});window.location.href=b}let T=a=>{let{route:b,router:c}=a,d=!1,e=c.clc=()=>{d=!0};return()=>{if(d){let a=Object.defineProperty(Error('Abort fetching component for route: "'+b+'"'),"__NEXT_ERROR_CODE",{value:"E483",enumerable:!1,configurable:!0});throw a.cancelled=!0,a}e===c.clc&&(c.clc=null)}};class U{reload(){window.location.reload()}back(){window.history.back()}forward(){window.history.forward()}push(a,b,c){return void 0===c&&(c={}),{url:a,as:b}=L(this,a,b),this.change("pushState",a,b,c)}replace(a,b,c){return void 0===c&&(c={}),{url:a,as:b}=L(this,a,b),this.change("replaceState",a,b,c)}async _bfl(a,b,d,e){{if(!this._bfl_s&&!this._bfl_d){let b,f,{BloomFilter:h}=c(82359);try{({__routerFilterStatic:b,__routerFilterDynamic:f}=await (0,g.getClientBuildManifest)())}catch(b){if(console.error(b),e)return!0;return S({url:(0,w.addBasePath)((0,t.addLocale)(a,d||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{})}(null==b?void 0:b.numHashes)&&(this._bfl_s=new h(b.numItems,b.errorRate),this._bfl_s.import(b)),(null==f?void 0:f.numHashes)&&(this._bfl_d=new h(f.numItems,f.errorRate),this._bfl_d.import(f))}let k=!1,l=!1;for(let{as:c,allowMatchCurrent:g}of[{as:a},{as:b}])if(c){let b=(0,f.removeTrailingSlash)(new URL(c,"http://n").pathname),m=(0,w.addBasePath)((0,t.addLocale)(b,d||this.locale));if(g||b!==(0,f.removeTrailingSlash)(new URL(this.asPath,"http://n").pathname)){var h,i,j;for(let a of(k=k||!!(null==(h=this._bfl_s)?void 0:h.contains(b))||!!(null==(i=this._bfl_s)?void 0:i.contains(m)),[b,m])){let b=a.split("/");for(let a=0;!l&&a<b.length+1;a++){let c=b.slice(0,a).join("/");if(c&&(null==(j=this._bfl_d)?void 0:j.contains(c))){l=!0;break}}}if(k||l){if(e)return!0;return S({url:(0,w.addBasePath)((0,t.addLocale)(a,d||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{})}}}}return!1}async change(a,b,c,d,e){var j,k,l,y,z,A,B,G,H;let K,N;if(!(0,D.isLocalURL)(b))return S({url:b,router:this}),!1;let P=1===d._h;P||d.shallow||await this._bfl(c,void 0,d.locale);let Q=P||d._shouldResolveHref||(0,s.parsePath)(b).pathname===(0,s.parsePath)(c).pathname,R={...this.state},T=!0!==this.isReady;this.isReady=!0;let V=this.isSsr;if(P||(this.isSsr=!1),P&&this.clc)return!1;let W=R.locale;m.ST&&performance.mark("routeChange");let{shallow:X=!1,scroll:Y=!0}=d,Z={shallow:X};this._inFlightRoute&&this.clc&&(V||U.events.emit("routeChangeError",I(),this._inFlightRoute,Z),this.clc(),this.clc=null),c=(0,w.addBasePath)((0,t.addLocale)((0,x.hasBasePath)(c)?(0,v.removeBasePath)(c):c,d.locale,this.defaultLocale));let $=(0,u.removeLocale)((0,x.hasBasePath)(c)?(0,v.removeBasePath)(c):c,R.locale);this._inFlightRoute=c;let _=W!==R.locale;if(!P&&this.onlyAHashChange($)&&!_){R.asPath=$,U.events.emit("hashChangeStart",c,Z),this.changeState(a,b,c,{...d,scroll:!1}),Y&&this.scrollToHash($);try{await this.set(R,this.components[R.route],null)}catch(a){throw(0,i.default)(a)&&a.cancelled&&U.events.emit("routeChangeError",a,$,Z),a}return U.events.emit("hashChangeComplete",c,Z),!0}let aa=(0,o.parseRelativeUrl)(b),{pathname:ab,query:ac}=aa;try{[K,{__rewrites:N}]=await Promise.all([this.pageLoader.getPageList(),(0,g.getClientBuildManifest)(),this.pageLoader.getMiddleware()])}catch(a){return S({url:c,router:this}),!1}this.urlIsNew($)||_||(a="replaceState");let ad=c;ab=ab?(0,f.removeTrailingSlash)((0,v.removeBasePath)(ab)):ab;let ae=(0,f.removeTrailingSlash)(ab),af=c.startsWith("/")&&(0,o.parseRelativeUrl)(c).pathname;if(null==(j=this.components[ab])?void 0:j.__appRouter)return S({url:c,router:this}),new Promise(()=>{});let ag=!!(af&&ae!==af&&(!(0,n.isDynamicRoute)(ae)||!(0,p.getRouteMatcher)((0,q.getRouteRegex)(ae))(af))),ah=!d.shallow&&await J({asPath:c,locale:R.locale,router:this});if(P&&ah&&(Q=!1),Q&&"/_error"!==ab&&(d._shouldResolveHref=!0,aa.pathname=M(ab,K),aa.pathname!==ab&&(ab=aa.pathname,aa.pathname=(0,w.addBasePath)(ab),ah||(b=(0,r.formatWithValidation)(aa)))),!(0,D.isLocalURL)(c))return S({url:c,router:this}),!1;ad=(0,u.removeLocale)((0,v.removeBasePath)(ad),R.locale),ae=(0,f.removeTrailingSlash)(ab);let ai=!1;if((0,n.isDynamicRoute)(ae)){let a=(0,o.parseRelativeUrl)(ad),d=a.pathname,e=(0,q.getRouteRegex)(ae);ai=(0,p.getRouteMatcher)(e)(d);let f=ae===d,g=f?(0,F.interpolateAs)(ae,d,ac):{};if(ai&&(!f||g.result))f?c=(0,r.formatWithValidation)(Object.assign({},a,{pathname:g.result,query:(0,E.omit)(ac,g.params)})):Object.assign(ac,ai);else{let a=Object.keys(e.groups).filter(a=>!ac[a]&&!e.groups[a].optional);if(a.length>0&&!ah)throw Object.defineProperty(Error((f?"The provided `href` ("+b+") value is missing query values ("+a.join(", ")+") to be interpolated properly. ":"The provided `as` value ("+d+") is incompatible with the `href` value ("+ae+"). ")+"Read more: https://nextjs.org/docs/messages/"+(f?"href-interpolation-failed":"incompatible-href-as")),"__NEXT_ERROR_CODE",{value:"E344",enumerable:!1,configurable:!0})}}P||U.events.emit("routeChangeStart",c,Z);let aj="/404"===this.pathname||"/_error"===this.pathname;try{let f=await this.getRouteInfo({route:ae,pathname:ab,query:ac,as:c,resolvedAs:ad,routeProps:Z,locale:R.locale,isPreview:R.isPreview,hasMiddleware:ah,unstable_skipClientCache:d.unstable_skipClientCache,isQueryUpdating:P&&!this.isFallback,isMiddlewareRewrite:ag});if(P||d.shallow||await this._bfl(c,"resolvedAs"in f?f.resolvedAs:void 0,R.locale),"route"in f&&ah){ae=ab=f.route||ae,Z.shallow||(ac=Object.assign({},f.query||{},ac));let a=(0,x.hasBasePath)(aa.pathname)?(0,v.removeBasePath)(aa.pathname):aa.pathname;if(ai&&ab!==a&&Object.keys(ai).forEach(a=>{ai&&ac[a]===ai[a]&&delete ac[a]}),(0,n.isDynamicRoute)(ab)){let a=!Z.shallow&&f.resolvedAs?f.resolvedAs:(0,w.addBasePath)((0,t.addLocale)(new URL(c,location.href).pathname,R.locale),!0);(0,x.hasBasePath)(a)&&(a=(0,v.removeBasePath)(a));let b=(0,q.getRouteRegex)(ab),d=(0,p.getRouteMatcher)(b)(new URL(a,location.href).pathname);d&&Object.assign(ac,d)}}if("type"in f)if("redirect-internal"===f.type)return this.change(a,f.newUrl,f.newAs,d);else return S({url:f.destination,router:this}),new Promise(()=>{});let g=f.Component;if(g&&g.unstable_scriptLoader&&[].concat(g.unstable_scriptLoader()).forEach(a=>{(0,h.handleClientScriptLoad)(a.props)}),(f.__N_SSG||f.__N_SSP)&&f.props){if(f.props.pageProps&&f.props.pageProps.__N_REDIRECT){d.locale=!1;let b=f.props.pageProps.__N_REDIRECT;if(b.startsWith("/")&&!1!==f.props.pageProps.__N_REDIRECT_BASE_PATH){let c=(0,o.parseRelativeUrl)(b);c.pathname=M(c.pathname,K);let{url:e,as:f}=L(this,b,b);return this.change(a,e,f,d)}return S({url:b,router:this}),new Promise(()=>{})}if(R.isPreview=!!f.props.__N_PREVIEW,f.props.notFound===O){let a;try{await this.fetchComponent("/404"),a="/404"}catch(b){a="/_error"}if(f=await this.getRouteInfo({route:a,pathname:a,query:ac,as:c,resolvedAs:ad,routeProps:{shallow:!1},locale:R.locale,isPreview:R.isPreview,isNotFound:!0}),"type"in f)throw Object.defineProperty(Error("Unexpected middleware effect on /404"),"__NEXT_ERROR_CODE",{value:"E158",enumerable:!1,configurable:!0})}}P&&"/_error"===this.pathname&&(null==(l=self.__NEXT_DATA__.props)||null==(k=l.pageProps)?void 0:k.statusCode)===500&&(null==(y=f.props)?void 0:y.pageProps)&&(f.props.pageProps.statusCode=500);let j=d.shallow&&R.route===(null!=(z=f.route)?z:ae),m=null!=(A=d.scroll)?A:!P&&!j,r=null!=e?e:m?{x:0,y:0}:null,s={...R,route:ae,pathname:ab,query:ac,asPath:$,isFallback:!1};if(P&&aj){if(f=await this.getRouteInfo({route:this.pathname,pathname:this.pathname,query:ac,as:c,resolvedAs:ad,routeProps:{shallow:!1},locale:R.locale,isPreview:R.isPreview,isQueryUpdating:P&&!this.isFallback}),"type"in f)throw Object.defineProperty(Error("Unexpected middleware effect on "+this.pathname),"__NEXT_ERROR_CODE",{value:"E225",enumerable:!1,configurable:!0});"/_error"===this.pathname&&(null==(G=self.__NEXT_DATA__.props)||null==(B=G.pageProps)?void 0:B.statusCode)===500&&(null==(H=f.props)?void 0:H.pageProps)&&(f.props.pageProps.statusCode=500);try{await this.set(s,f,r)}catch(a){throw(0,i.default)(a)&&a.cancelled&&U.events.emit("routeChangeError",a,$,Z),a}return!0}if(U.events.emit("beforeHistoryChange",c,Z),this.changeState(a,b,c,d),!(P&&!r&&!T&&!_&&(0,C.compareRouterStates)(s,this.state))){try{await this.set(s,f,r)}catch(a){if(a.cancelled)f.error=f.error||a;else throw a}if(f.error)throw P||U.events.emit("routeChangeError",f.error,$,Z),f.error;P||U.events.emit("routeChangeComplete",c,Z),m&&/#.+$/.test(c)&&this.scrollToHash(c)}return!0}catch(a){if((0,i.default)(a)&&a.cancelled)return!1;throw a}}changeState(a,b,c,d){void 0===d&&(d={}),("pushState"!==a||(0,m.getURL)()!==c)&&(this._shallow=d.shallow,window.history[a]({url:b,as:c,options:d,__N:!0,key:this._key="pushState"!==a?this._key:R()},"",c))}async handleRouteInfoError(a,b,c,d,e,f){if(a.cancelled)throw a;if((0,g.isAssetError)(a)||f)throw U.events.emit("routeChangeError",a,d,e),S({url:d,router:this}),I();console.error(a);try{let d,{page:e,styleSheets:f}=await this.fetchComponent("/_error"),g={props:d,Component:e,styleSheets:f,err:a,error:a};if(!g.props)try{g.props=await this.getInitialProps(e,{err:a,pathname:b,query:c})}catch(a){console.error("Error in error page `getInitialProps`: ",a),g.props={}}return g}catch(a){return this.handleRouteInfoError((0,i.default)(a)?a:Object.defineProperty(Error(a+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0}),b,c,d,e,!0)}}async getRouteInfo(a){let{route:b,pathname:c,query:d,as:e,resolvedAs:g,routeProps:h,locale:j,hasMiddleware:l,isPreview:m,unstable_skipClientCache:n,isQueryUpdating:o,isMiddlewareRewrite:p,isNotFound:q}=a,s=b;try{var t,u,w,x;let a=this.components[s];if(h.shallow&&a&&this.route===s)return a;let b=T({route:s,router:this});l&&(a=void 0);let i=!a||"initial"in a?void 0:a,y={dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:c,query:d}),skipInterpolation:!0,asPath:q?"/404":g,locale:j}),hasMiddleware:!0,isServerRender:this.isSsr,parseJSON:!0,inflightCache:o?this.sbc:this.sdc,persistCache:!m,isPrefetch:!1,unstable_skipClientCache:n,isBackground:o},A=o&&!p?null:await N({fetchData:()=>Q(y),asPath:q?"/404":g,locale:j,router:this}).catch(a=>{if(o)return null;throw a});if(A&&("/_error"===c||"/404"===c)&&(A.effect=void 0),o&&(A?A.json=self.__NEXT_DATA__.props:A={json:self.__NEXT_DATA__.props}),b(),(null==A||null==(t=A.effect)?void 0:t.type)==="redirect-internal"||(null==A||null==(u=A.effect)?void 0:u.type)==="redirect-external")return A.effect;if((null==A||null==(w=A.effect)?void 0:w.type)==="rewrite"){let b=(0,f.removeTrailingSlash)(A.effect.resolvedHref),e=await this.pageLoader.getPageList();if((!o||e.includes(b))&&(s=b,c=A.effect.resolvedHref,d={...d,...A.effect.parsedAs.query},g=(0,v.removeBasePath)((0,k.normalizeLocalePath)(A.effect.parsedAs.pathname,this.locales).pathname),a=this.components[s],h.shallow&&a&&this.route===s&&!l))return{...a,route:s}}if((0,z.isAPIRoute)(s))return S({url:e,router:this}),new Promise(()=>{});let B=i||await this.fetchComponent(s).then(a=>({Component:a.page,styleSheets:a.styleSheets,__N_SSG:a.mod.__N_SSG,__N_SSP:a.mod.__N_SSP})),C=null==A||null==(x=A.response)?void 0:x.headers.get("x-middleware-skip"),D=B.__N_SSG||B.__N_SSP;C&&(null==A?void 0:A.dataHref)&&delete this.sdc[A.dataHref];let{props:E,cacheKey:F}=await this._getData(async()=>{if(D){if((null==A?void 0:A.json)&&!C)return{cacheKey:A.cacheKey,props:A.json};let a=(null==A?void 0:A.dataHref)?A.dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:c,query:d}),asPath:g,locale:j}),b=await Q({dataHref:a,isServerRender:this.isSsr,parseJSON:!0,inflightCache:C?{}:this.sdc,persistCache:!m,isPrefetch:!1,unstable_skipClientCache:n});return{cacheKey:b.cacheKey,props:b.json||{}}}return{headers:{},props:await this.getInitialProps(B.Component,{pathname:c,query:d,asPath:e,locale:j,locales:this.locales,defaultLocale:this.defaultLocale})}});return B.__N_SSP&&y.dataHref&&F&&delete this.sdc[F],this.isPreview||!B.__N_SSG||o||Q(Object.assign({},y,{isBackground:!0,persistCache:!1,inflightCache:this.sbc})).catch(()=>{}),E.pageProps=Object.assign({},E.pageProps),B.props=E,B.route=s,B.query=d,B.resolvedAs=g,this.components[s]=B,B}catch(a){return this.handleRouteInfoError((0,i.getProperError)(a),c,d,e,h)}}set(a,b,c){return this.state=a,this.sub(b,this.components["/_app"].Component,c)}beforePopState(a){this._bps=a}onlyAHashChange(a){if(!this.asPath)return!1;let[b,c]=this.asPath.split("#",2),[d,e]=a.split("#",2);return!!e&&b===d&&c===e||b===d&&c!==e}scrollToHash(a){let[,b=""]=a.split("#",2);(0,G.disableSmoothScrollDuringRouteTransition)(()=>{if(""===b||"top"===b)return void window.scrollTo(0,0);let a=decodeURIComponent(b),c=document.getElementById(a);if(c)return void c.scrollIntoView();let d=document.getElementsByName(a)[0];d&&d.scrollIntoView()},{onlyHashChange:this.onlyAHashChange(a)})}urlIsNew(a){return this.asPath!==a}async prefetch(a,b,c){void 0===b&&(b=a),void 0===c&&(c={});let d=(0,o.parseRelativeUrl)(a),e=d.pathname,{pathname:g,query:h}=d,i=g,j=await this.pageLoader.getPageList(),k=b,l=void 0!==c.locale?c.locale||void 0:this.locale,m=await J({asPath:b,locale:l,router:this});d.pathname=M(d.pathname,j),(0,n.isDynamicRoute)(d.pathname)&&(g=d.pathname,d.pathname=g,Object.assign(h,(0,p.getRouteMatcher)((0,q.getRouteRegex)(d.pathname))((0,s.parsePath)(b).pathname)||{}),m||(a=(0,r.formatWithValidation)(d)));let t=await N({fetchData:()=>Q({dataHref:this.pageLoader.getDataHref({href:(0,r.formatWithValidation)({pathname:i,query:h}),skipInterpolation:!0,asPath:k,locale:l}),hasMiddleware:!0,isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0}),asPath:b,locale:l,router:this});if((null==t?void 0:t.effect.type)==="rewrite"&&(d.pathname=t.effect.resolvedHref,g=t.effect.resolvedHref,h={...h,...t.effect.parsedAs.query},k=t.effect.parsedAs.pathname,a=(0,r.formatWithValidation)(d)),(null==t?void 0:t.effect.type)==="redirect-external")return;let u=(0,f.removeTrailingSlash)(g);await this._bfl(b,k,c.locale,!0)&&(this.components[e]={__appRouter:!0}),await Promise.all([this.pageLoader._isSsg(u).then(b=>!!b&&Q({dataHref:(null==t?void 0:t.json)?null==t?void 0:t.dataHref:this.pageLoader.getDataHref({href:a,asPath:k,locale:l}),isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0,unstable_skipClientCache:c.unstable_skipClientCache||c.priority&&!0}).then(()=>!1).catch(()=>!1)),this.pageLoader[c.priority?"loadPage":"prefetch"](u)])}async fetchComponent(a){let b=T({route:a,router:this});try{let c=await this.pageLoader.loadPage(a);return b(),c}catch(a){throw b(),a}}_getData(a){let b=!1,c=()=>{b=!0};return this.clc=c,a().then(a=>{if(c===this.clc&&(this.clc=null),b){let a=Object.defineProperty(Error("Loading initial props cancelled"),"__NEXT_ERROR_CODE",{value:"E405",enumerable:!1,configurable:!0});throw a.cancelled=!0,a}return a})}getInitialProps(a,b){let{Component:c}=this.components["/_app"],d=this._wrapApp(c);return b.AppTree=d,(0,m.loadGetInitialProps)(c,{AppTree:d,Component:a,router:this,ctx:b})}get route(){return this.state.route}get pathname(){return this.state.pathname}get query(){return this.state.query}get asPath(){return this.state.asPath}get locale(){return this.state.locale}get isFallback(){return this.state.isFallback}get isPreview(){return this.state.isPreview}constructor(a,b,c,{initialProps:d,pageLoader:e,App:g,wrapApp:h,Component:i,err:j,subscription:k,isFallback:l,locale:p,locales:q,defaultLocale:s,domainLocales:t,isPreview:u}){this.sdc={},this.sbc={},this.isFirstPopStateEvent=!0,this._key=R(),this.onPopState=a=>{let b,{isFirstPopStateEvent:c}=this;this.isFirstPopStateEvent=!1;let d=a.state;if(!d){let{pathname:a,query:b}=this;this.changeState("replaceState",(0,r.formatWithValidation)({pathname:(0,w.addBasePath)(a),query:b}),(0,m.getURL)());return}if(d.__NA)return void window.location.reload();if(!d.__N||c&&this.locale===d.options.locale&&d.as===this.asPath)return;let{url:e,as:f,options:g,key:h}=d;this._key=h;let{pathname:i}=(0,o.parseRelativeUrl)(e);(!this.isSsr||f!==(0,w.addBasePath)(this.asPath)||i!==(0,w.addBasePath)(this.pathname))&&(!this._bps||this._bps(d))&&this.change("replaceState",e,f,Object.assign({},g,{shallow:g.shallow&&this._shallow,locale:g.locale||this.defaultLocale,_h:0}),b)};let v=(0,f.removeTrailingSlash)(a);this.components={},"/_error"!==a&&(this.components[v]={Component:i,initial:!0,props:d,err:j,__N_SSG:d&&d.__N_SSG,__N_SSP:d&&d.__N_SSP}),this.components["/_app"]={Component:g,styleSheets:[]},this.events=U.events,this.pageLoader=e;let x=(0,n.isDynamicRoute)(a)&&self.__NEXT_DATA__.autoExport;this.basePath="",this.sub=k,this.clc=null,this._wrapApp=h,this.isSsr=!0,this.isLocaleDomain=!1,this.isReady=!!(self.__NEXT_DATA__.gssp||self.__NEXT_DATA__.gip||self.__NEXT_DATA__.isExperimentalCompile||self.__NEXT_DATA__.appGip&&!self.__NEXT_DATA__.gsp||!x&&!self.location.search),this.state={route:v,pathname:a,query:b,asPath:x?a:c,isPreview:!!u,locale:void 0,isFallback:l},this._initialMatchesMiddlewarePromise=Promise.resolve(!1)}}U.events=(0,l.default)()},86992:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getNamedMiddlewareRegex:function(){return n},getNamedRouteRegex:function(){return m},getRouteRegex:function(){return j}});let d=c(57504),e=c(21054),f=c(22708),g=c(92800),h=c(22595);function i(a,b,c){let d={},i=1,j=[];for(let k of(0,g.removeTrailingSlash)(a).slice(1).split("/")){let a=e.INTERCEPTION_ROUTE_MARKERS.find(a=>k.startsWith(a)),g=k.match(h.PARAMETER_PATTERN);if(a&&g&&g[2]){let{key:b,optional:c,repeat:e}=(0,h.parseMatchedParameter)(g[2]);d[b]={pos:i++,repeat:e,optional:c},j.push("/"+(0,f.escapeStringRegexp)(a)+"([^/]+?)")}else if(g&&g[2]){let{key:a,repeat:b,optional:e}=(0,h.parseMatchedParameter)(g[2]);d[a]={pos:i++,repeat:b,optional:e},c&&g[1]&&j.push("/"+(0,f.escapeStringRegexp)(g[1]));let k=b?e?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)";c&&g[1]&&(k=k.substring(1)),j.push(k)}else j.push("/"+(0,f.escapeStringRegexp)(k));b&&g&&g[3]&&j.push((0,f.escapeStringRegexp)(g[3]))}return{parameterizedRoute:j.join(""),groups:d}}function j(a,b){let{includeSuffix:c=!1,includePrefix:d=!1,excludeOptionalTrailingSlash:e=!1}=void 0===b?{}:b,{parameterizedRoute:f,groups:g}=i(a,c,d),h=f;return e||(h+="(?:/)?"),{re:RegExp("^"+h+"$"),groups:g}}function k(a){let b,{interceptionMarker:c,getSafeRouteKey:d,segment:e,routeKeys:g,keyPrefix:i,backreferenceDuplicateKeys:j}=a,{key:k,optional:l,repeat:m}=(0,h.parseMatchedParameter)(e),n=k.replace(/\W/g,"");i&&(n=""+i+n);let o=!1;(0===n.length||n.length>30)&&(o=!0),isNaN(parseInt(n.slice(0,1)))||(o=!0),o&&(n=d());let p=n in g;i?g[n]=""+i+k:g[n]=k;let q=c?(0,f.escapeStringRegexp)(c):"";return b=p&&j?"\\k<"+n+">":m?"(?<"+n+">.+?)":"(?<"+n+">[^/]+?)",l?"(?:/"+q+b+")?":"/"+q+b}function l(a,b,c,i,j){let l,m=(l=0,()=>{let a="",b=++l;for(;b>0;)a+=String.fromCharCode(97+(b-1)%26),b=Math.floor((b-1)/26);return a}),n={},o=[];for(let l of(0,g.removeTrailingSlash)(a).slice(1).split("/")){let a=e.INTERCEPTION_ROUTE_MARKERS.some(a=>l.startsWith(a)),g=l.match(h.PARAMETER_PATTERN);if(a&&g&&g[2])o.push(k({getSafeRouteKey:m,interceptionMarker:g[1],segment:g[2],routeKeys:n,keyPrefix:b?d.NEXT_INTERCEPTION_MARKER_PREFIX:void 0,backreferenceDuplicateKeys:j}));else if(g&&g[2]){i&&g[1]&&o.push("/"+(0,f.escapeStringRegexp)(g[1]));let a=k({getSafeRouteKey:m,segment:g[2],routeKeys:n,keyPrefix:b?d.NEXT_QUERY_PARAM_PREFIX:void 0,backreferenceDuplicateKeys:j});i&&g[1]&&(a=a.substring(1)),o.push(a)}else o.push("/"+(0,f.escapeStringRegexp)(l));c&&g&&g[3]&&o.push((0,f.escapeStringRegexp)(g[3]))}return{namedParameterizedRoute:o.join(""),routeKeys:n}}function m(a,b){var c,d,e;let f=l(a,b.prefixRouteKeys,null!=(c=b.includeSuffix)&&c,null!=(d=b.includePrefix)&&d,null!=(e=b.backreferenceDuplicateKeys)&&e),g=f.namedParameterizedRoute;return b.excludeOptionalTrailingSlash||(g+="(?:/)?"),{...j(a,b),namedRegex:"^"+g+"$",routeKeys:f.routeKeys}}function n(a,b){let{parameterizedRoute:c}=i(a,!1,!1),{catchAll:d=!0}=b;if("/"===c)return{namedRegex:"^/"+(d?".*":"")+"$"};let{namedParameterizedRoute:e}=l(a,!1,!1,!1,!1);return{namedRegex:"^"+e+(d?"(?:(/.*)?)":"")+"$"}}},87307:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return f}}),c(35288);let d=c(21124);c(38301);let e=c(1056);function f(a){function b(b){return(0,d.jsx)(a,{router:(0,e.useRouter)(),...b})}return b.getInitialProps=a.getInitialProps,b.origGetInitialProps=a.origGetInitialProps,b}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},88633:a=>{"use strict";var b=Object.prototype.hasOwnProperty,c=Object.prototype.toString,d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===c.call(a)},g=function(a){if(!a||"[object Object]"!==c.call(a))return!1;var d,e=b.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&b.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!e&&!f)return!1;for(d in a);return void 0===d||b.call(a,d)},h=function(a,b){d&&"__proto__"===b.name?d(a,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):a[b.name]=b.newValue},i=function(a,c){if("__proto__"===c){if(!b.call(a,c))return;else if(e)return e(a,c).value}return a[c]};a.exports=function a(){var b,c,d,e,j,k,l=arguments[0],m=1,n=arguments.length,o=!1;for("boolean"==typeof l&&(o=l,l=arguments[1]||{},m=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});m<n;++m)if(b=arguments[m],null!=b)for(c in b)d=i(l,c),l!==(e=i(b,c))&&(o&&e&&(g(e)||(j=f(e)))?(j?(j=!1,k=d&&f(d)?d:[]):k=d&&g(d)?d:{},h(l,{name:c,newValue:a(o,k,e)})):void 0!==e&&h(l,{name:c,newValue:e}));return l}},88828:(a,b,c)=>{var d=c(62253).Buffer,e=c(27910);function f(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=d.alloc(0),this;if("function"==typeof a.pipe)return this.buffer=d.alloc(0),a.pipe(this),this;if(a.length||"object"==typeof a)return this.buffer=a,this.writable=!1,process.nextTick((function(){this.emit("end",a),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof a+")")}c(28354).inherits(f,e),f.prototype.write=function(a){this.buffer=d.concat([this.buffer,d.from(a)]),this.emit("data",a)},f.prototype.end=function(a){a&&this.write(a),this.emit("end",a),this.emit("close"),this.writable=!1,this.readable=!1},a.exports=f},89090:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"detectDomainLocale",{enumerable:!0,get:function(){return c}});let c=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c]};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},89158:(a,b,c)=>{"use strict";var d=c(62253).Buffer,e=c(58211);function f(a){if(d.isBuffer(a))return a;if("string"==typeof a)return d.from(a,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function g(a,b,c){for(var d=0;b+d<c&&0===a[b+d];)++d;return a[b+d]>=128&&--d,d}a.exports={derToJose:function(a,b){a=f(a);var c=e(b),g=c+1,h=a.length,i=0;if(48!==a[i++])throw Error('Could not find expected "seq"');var j=a[i++];if(129===j&&(j=a[i++]),h-i<j)throw Error('"seq" specified length of "'+j+'", only "'+(h-i)+'" remaining');if(2!==a[i++])throw Error('Could not find expected "int" for "r"');var k=a[i++];if(h-i-2<k)throw Error('"r" specified length of "'+k+'", only "'+(h-i-2)+'" available');if(g<k)throw Error('"r" specified length of "'+k+'", max of "'+g+'" is acceptable');var l=i;if(i+=k,2!==a[i++])throw Error('Could not find expected "int" for "s"');var m=a[i++];if(h-i!==m)throw Error('"s" specified length of "'+m+'", expected "'+(h-i)+'"');if(g<m)throw Error('"s" specified length of "'+m+'", max of "'+g+'" is acceptable');var n=i;if((i+=m)!==h)throw Error('Expected to consume entire buffer, but "'+(h-i)+'" bytes remain');var o=c-k,p=c-m,q=d.allocUnsafe(o+k+p+m);for(i=0;i<o;++i)q[i]=0;a.copy(q,i,l+Math.max(-o,0),l+k),i=c;for(var r=i;i<r+p;++i)q[i]=0;return a.copy(q,i,n+Math.max(-p,0),n+m),q=(q=q.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(a,b){a=f(a);var c=e(b),h=a.length;if(h!==2*c)throw TypeError('"'+b+'" signatures must be "'+2*c+'" bytes, saw "'+h+'"');var i=g(a,0,c),j=g(a,c,a.length),k=c-i,l=c-j,m=2+k+1+1+l,n=m<128,o=d.allocUnsafe((n?2:3)+m),p=0;return o[p++]=48,n?o[p++]=m:(o[p++]=129,o[p++]=255&m),o[p++]=2,o[p++]=k,i<0?(o[p++]=0,p+=a.copy(o,p,0,c)):p+=a.copy(o,p,i,c),o[p++]=2,o[p++]=l,j<0?(o[p++]=0,a.copy(o,p,c)):a.copy(o,p,c+j),o}}},91645:a=>{"use strict";a.exports=require("net")},92464:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"addBasePath",{enumerable:!0,get:function(){return f}});let d=c(42511),e=c(11107);function f(a,b){return(0,e.normalizePathTrailingSlash)((0,d.addPathPrefix)(a,""))}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},92800:(a,b)=>{"use strict";function c(a){return a.replace(/\/$/,"")||"/"}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"removeTrailingSlash",{enumerable:!0,get:function(){return c}})},92910:(a,b,c)=>{"use strict";let d,{Duplex:e}=c(27910),{randomFillSync:f}=c(55511),g=c(20879),{EMPTY_BUFFER:h,kWebSocket:i,NOOP:j}=c(63674),{isBlob:k,isValidStatusCode:l}=c(86200),{mask:m,toBuffer:n}=c(78086),o=Symbol("kByteLength"),p=Buffer.alloc(4),q=8192;class r{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=j,this[i]=void 0}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||p,b.generateMask?b.generateMask(c):(8192===q&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),q=0),c[0]=d[q++],c[1]=d[q++],c[2]=d[q++],c[3]=d[q++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[o]?b[o]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let j=e;e>=65536?(h+=8,j=127):e>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?e+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(e,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(e,4,6)),b.mask)?(k[1]|=128,k[h-4]=c[0],k[h-3]=c[1],k[h-2]=c[2],k[h-1]=c[3],i)?[k,a]:g?(m(a,c,k,h,e),[k]):(m(a,c,a,0,e),[k,a]):[k,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&l(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[o]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(r.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let j={[o]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,j,c]):this.getBlobData(a,this._compress,j,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,j,c]):this.dispatch(a,this._compress,j,c)}getBlobData(a,b,c,d){this._bufferedBytes+=c[o],this._state=2,a.arrayBuffer().then(a=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(s,this,a,d);return}this._bufferedBytes-=c[o];let e=n(a);b?this.dispatch(e,b,c,d):(this._state=0,this.sendFrame(r.frame(e,c),d),this.dequeue())}).catch(a=>{process.nextTick(t,this,a,d)})}dispatch(a,b,c,d){if(!b)return void this.sendFrame(r.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[o],this._state=1,e.compress(a,c.fin,(a,b)=>{if(this._socket.destroyed)return void s(this,Error("The socket was closed while data was being compressed"),d);this._bufferedBytes-=c[o],this._state=0,c.readOnly=!1,this.sendFrame(r.frame(b,c),d),this.dequeue()})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][o],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][o],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}function s(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function t(a,b,c){s(a,b,c),a.onerror(b)}a.exports=r},93759:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IdTokenClient=void 0;let d=c(32852);class e extends d.OAuth2Client{targetAudience;idTokenProvider;constructor(a){super(a),this.targetAudience=a.targetAudience,this.idTokenProvider=a.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let a=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:a,expiry_date:this.getIdTokenExpiryDate(a)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(a){let b=a.split(".")[1];if(b)return 1e3*JSON.parse(Buffer.from(b,"base64").toString("ascii")).exp}}b.IdTokenClient=e},94217:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"parseRelativeUrl",{enumerable:!0,get:function(){return e}}),c(61962);let d=c(15238);function e(a,b,c){void 0===c&&(c=!0);let e=new URL("http://n"),f=b?new URL(b,e):a.startsWith(".")?new URL("http://n"):e,{pathname:g,searchParams:h,search:i,hash:j,href:k,origin:l}=new URL(a,f);if(l!==e.origin)throw Object.defineProperty(Error("invariant: invalid relative URL, router received "+a),"__NEXT_ERROR_CODE",{value:"E159",enumerable:!1,configurable:!0});return{pathname:g,query:c?(0,d.searchParamsToUrlQuery)(h):void 0,search:i,hash:j,href:k.slice(l.length),slashes:void 0}}},94735:a=>{"use strict";a.exports=require("events")},96693:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NodeCrypto=void 0;let d=c(55511);class e{async sha256DigestBase64(a){return d.createHash("sha256").update(a).digest("base64")}randomBytesBase64(a){return d.randomBytes(a).toString("base64")}async verify(a,b,c){let e=d.createVerify("RSA-SHA256");return e.update(b),e.end(),e.verify(a,c,"base64")}async sign(a,b){let c=d.createSign("RSA-SHA256");return c.update(b),c.end(),c.sign(a,"base64")}decodeBase64StringUtf8(a){return Buffer.from(a,"base64").toString("utf-8")}encodeBase64StringUtf8(a){return Buffer.from(a,"utf-8").toString("base64")}async sha256DigestHex(a){return d.createHash("sha256").update(a).digest("hex")}async signWithHmacSha256(a,b){var c,e;let f="string"==typeof a?a:(c=a,Buffer.from(c));return(e=d.createHmac("sha256",f).update(b).digest()).buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}b.NodeCrypto=e},97376:(a,b,c)=>{"use strict";a.exports={pkg:c(50619)}},98122:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{default:function(){return e},getProperError:function(){return f}});let d=c(70664);function e(a){return"object"==typeof a&&null!==a&&"name"in a&&"message"in a}function f(a){return e(a)?a:Object.defineProperty(Error((0,d.isPlainObject)(a)?function(a){let b=new WeakSet;return JSON.stringify(a,(a,c)=>{if("object"==typeof c&&null!==c){if(b.has(c))return"[Circular]";b.add(c)}return c})}(a):a+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},99255:(a,b,c)=>{var d=c(56735),e=c(74539);b.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],b.sign=d.sign,b.verify=e.verify,b.decode=e.decode,b.isValid=e.isValid,b.createSign=function(a){return new d(a)},b.createVerify=function(a){return new e(a)}},99290:(a,b)=>{"use strict";b.byteLength=function(a){var b=i(a),c=b[0],d=b[1];return(c+d)*3/4-d},b.toByteArray=function(a){var b,c,f=i(a),g=f[0],h=f[1],j=new e((g+h)*3/4-h),k=0,l=h>0?g-4:g;for(c=0;c<l;c+=4)b=d[a.charCodeAt(c)]<<18|d[a.charCodeAt(c+1)]<<12|d[a.charCodeAt(c+2)]<<6|d[a.charCodeAt(c+3)],j[k++]=b>>16&255,j[k++]=b>>8&255,j[k++]=255&b;return 2===h&&(b=d[a.charCodeAt(c)]<<2|d[a.charCodeAt(c+1)]>>4,j[k++]=255&b),1===h&&(b=d[a.charCodeAt(c)]<<10|d[a.charCodeAt(c+1)]<<4|d[a.charCodeAt(c+2)]>>2,j[k++]=b>>8&255,j[k++]=255&b),j},b.fromByteArray=function(a){for(var b,d=a.length,e=d%3,f=[],g=0,h=d-e;g<h;g+=16383)f.push(function(a,b,d){for(var e,f=[],g=b;g<d;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(c[(b=a[d-1])>>2]+c[b<<4&63]+"=="):2===e&&f.push(c[(b=(a[d-2]<<8)+a[d-1])>>10]+c[b>>4&63]+c[b<<2&63]+"="),f.join("")};for(var c=[],d=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,h=f.length;g<h;++g)c[g]=f[g],d[f.charCodeAt(g)]=g;function i(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}d[45]=62,d[95]=63}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[926],()=>b(b.s=10279));module.exports=c})();